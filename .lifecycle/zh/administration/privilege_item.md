---
displayed_sidebar: English
---

# StarRocks 支持的权限

授予用户或角色的权限决定了他们可以对特定对象执行哪些操作。权限用于实现细粒度的访问控制，以确保数据安全。

本主题介绍 StarRocks 对不同对象所提供的权限及其含义。权限的授予和撤销通过使用 [GRANT](../sql-reference/sql-statements/account-management/GRANT.md) 和 [REVOKE](../sql-reference/sql-statements/account-management/REVOKE.md) 命令来完成。可授予某对象的权限因对象类型而异。例如，表的权限与数据库的权限是不同的。

> 注意：本主题中描述的权限仅从 v3.0 版本开始可用。v3.0 版本中的权限框架和语法与早期版本不兼容。升级至 v3.0 后，除了某些特定操作，大多数原有权限都将被保留。详细差异请参阅[升级说明](#upgrade-notes)。

## 权限列表

本节描述了不同对象上可用的权限。

### 系统

|特权|说明|
|---|---|
|NODE|操作节点，例如添加、删除或停用节点。为了保证集群安全，该权限不能直接授予用户或角色。 cluster_admin 角色具有此权限。|
|GRANT|创建用户或角色、更改用户或角色或者向用户或角色授予权限。此权限不能直接授予用户或角色。 user_admin 角色具有此权限。|
|创建资源组|创建资源组。|
|CREATE RESOURCE|为 Spark Load 作业或外部表创建资源。|
|创建外部目录|创建外部目录。|
|PLUGIN|安装或卸载插件。|
|REPOSITORY|创建、删除或查看存储库。|
|BLACKLIST|创建、删除或显示 SQL 黑名单。|
|FILE|创建、删除或查看文件。|
|OPERATE|管理副本、配置项、变量和事务。|
|创建全局函数|创建全局 UDF。|
|创建存储卷|为远程存储系统创建存储卷。|

### 资源组

|特权|说明|
|---|---|
|ALTER|添加或删除资源组的分类器。|
|DROP|删除资源组。|
|ALL|对资源组具有所有上述权限。|

### 资源

|特权|说明|
|---|---|
|用法|使用资源。|
|ALTER|更改资源。|
|DROP|删除资源。|
|ALL|拥有资源的所有上述权限。|

### 用户

|特权|说明|
|---|---|
|IMPERSONATE|允许用户 A 以用户 B 的身份执行操作。|

### 全局函数（全局 UDF）

|特权|说明|
|---|---|
|用法|在查询中使用函数。|
|DROP|删除函数。|
|ALL|对某个函数具有所有上述权限。|

### 目录

|对象|权限|描述|
|---|---|---|
|CATALOG（内部目录）|用法|使用内部目录（default_catalog）。|
|CATALOG（内部目录）|CREATE DATABASE|在内部目录中创建数据库。|
|CATALOG（内部目录）|ALL|对内部目录具有以上所有权限。|
|CATALOG（外部目录）|用法|使用外部目录查看其中的表。|
|CATALOG（外部目录）|DROP|删除外部目录。|
|CATALOG（外部目录）|ALL|对外部目录具有以上所有权限。|

> 注意：StarRocks 的内部目录不能被删除。

### 数据库

|特权|说明|
|---|---|
|ALTER|设置数据库属性、重命名数据库或设置数据库配额。|
|DROP|删除数据库。|
|CREATE TABLE|在数据库中创建表。|
|创建视图|创建视图。|
|CREATE FUNCTION|创建函数。|
|创建物化视图|创建物化视图。|
|ALL|拥有数据库的所有上述权限。|

### 表

|特权|说明|
|---|---|
|ALTER|修改表或刷新外部表中的元数据。|
|DROP|删除一个表。|
|SELECT|查询表中的数据。|
|INSERT|将数据插入表中。|
|UPDATE|更新表中的数据。|
|EXPORT|从 StarRocks 表导出数据。|
|DELETE|根据指定条件删除表中的数据或删除表中的所有数据。|
|ALL|对表具有以上所有权限。|

### 视图

|特权|说明|
|---|---|
|SELECT|查询视图中的数据。|
|ALTER|修改视图的定义。|
|DROP|删除逻辑视图。|
|ALL|对视图具有所有上述权限。|

### 物化视图

|特权|说明|
|---|---|
|SELECT|查询物化视图以加速查询。|
|ALTER|更改物化视图。|
|REFRESH|刷新物化视图。|
|DROP|删除物化视图。|
|ALL|在物化视图上具有所有上述权限。|

### 函数（数据库级别 UDF）

|特权|说明|
|---|---|
|用法|使用函数。|
|DROP|删除函数。|
|ALL|对某个函数具有所有上述权限。|

### 存储卷

|特权|说明|
|---|---|
|ALTER|更改存储卷的凭证属性、注释或状态（已启用）。|
|DROP|删除存储卷。|
|用法|描述存储卷并将存储卷设置为默认存储卷。|
|ALL|在存储卷上具有所有上述权限。|

## 升级说明

从 v2.x 升级到 v3.0 时，由于新权限系统的引入，您可能无法执行某些操作。下表描述了升级前后的变化。

|操作|涉及命令|之前|之后|
|---|---|---|---|
|更改表|ALTER TABLE、CANCEL ALTER TABLE|对表或表所属数据库具有 LOAD_PRIV 权限的用户可以执行 ALTER TABLE 和 CANCEL ALTER TABLE 操作。|您必须对表具有 ALTER 权限才能执行执行这两个操作。|
|刷新外部表|REFRESH EXTERNAL TABLE|对外部表具有 LOAD_PRIV 权限的用户可以刷新外部表。|您必须对外部表具有 ALTER 权限才能执行此操作。|
|备份和恢复|BACKUP、RESTORE|对数据库具有LOAD_PRIV权限的用户可以备份和恢复数据库或数据库中的任何表。|升级后管理员必须重新向用户授予备份和恢复权限。|
|删除后恢复|RECOVER|对数据库和表具有 ALTER_PRIV、CREATE_PRIV 和 DROP_PRIV 权限的用户可以恢复数据库和表。|您必须对 default_catalog 具有 CREATE DATABASE 权限才能恢复数据库。您必须拥有数据库的 CREATE TABLE 权限和表的 DROP 权限。|
|创建和更改用户|CREATE USER、ALTER USER|对数据库具有 GRANT_PRIV 权限的用户可以创建和更改用户。|您必须具有 user_admin 角色才能创建和更改用户。|
|授予和撤销权限|GRANT、REVOKE|对某个对象拥有 GRANT_PRIV 权限的用户可以将该对象的权限授予其他用户或角色。|升级后，您仍然可以将该对象已拥有的权限授予其他用户或角色。升级后的用户或角色。在新的权限系统中：您必须拥有user_admin角色才能向其他用户或角色授予权限。如果您的GRANT语句中包含WITH GRANT OPTION，您可以将语句中涉及的权限授予其他用户或角色角色。 |

在 v2.x 版本中，StarRocks 并未完全实现基于角色的访问控制（RBAC）。当您为用户分配角色时，StarRocks 直接将角色的所有权限授予用户，而非角色本身。因此，用户实际上并不拥有角色。

在 v3.0 版本中，StarRocks 对其权限系统进行了更新。升级至 v3.0 后，您原有的角色将被保留，但用户和角色之间仍然没有所有权关系。如果您想使用新的 RBAC 系统，请执行 GRANT 操作来分配角色和权限。
