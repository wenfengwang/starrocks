---
displayed_sidebar: English
---

# JSON 运算符

StarRocks 支持以下 JSON 比较运算符：小于（<）、小于等于（<=）、大于（>）、大于等于（>=）、等于（=）和不等于（!=）。您可以使用这些运算符来查询 JSON 数据。但是，StarRocks 不支持使用 IN 运算符来查询 JSON 数据。

    > 运算符的两个操作数必须均为 JSON 值。

    > 如果运算符的一个操作数是 JSON 值，而另一个操作数不是，则在执行算术运算时，非 JSON 值的操作数将被转换为 JSON 值。有关转换规则的更多信息，请参考 [CAST](./json-query-and-processing-functions/cast.md) 文档。

## 算术规则

JSON 运算符遵循以下算术规则：

- 当运算符的操作数均为同一数据类型的 JSON 值时：
  - - 如果两个操作数都是基础数据类型的 JSON 值，如数字（NUMBER）、字符串（STRING）或布尔值（BOOLEAN），则运算符将根据基础数据类型的算术规则执行运算。

>   注意：如果两个操作数都是数字，但一个是双精度浮点数（DOUBLE）而另一个是整型（INT），则运算符会将整型值转换为双精度浮点数。

- - 如果两个操作数都是复合数据类型的 JSON 值，如对象（OBJECT）或数组（ARRAY），则运算符会首先根据第一个操作数中键的顺序，按字典序对操作数中的键进行排序，然后比较操作数之间对应键的值。

  示例 1：

  第一个操作数是 {"a": 1, "c": 2}，第二个操作数是 {"b": 1, "a": 2}。在此示例中，运算符比较两个操作数中键 "a" 的值。第一个操作数中键 "a" 的值为 1，而第二个操作数中键 "a" 的值为 2。因此，值 1 小于值 2，运算符得出结论：第一个操作数 {"a": 1, "c": 2} 小于第二个操作数 {"b": 1, "a": 2}。

```plaintext
mysql> SELECT PARSE_JSON('{"a": 1, "c": 2}') < PARSE_JSON('{"b": 1, "a": 2} ');

       -> 1
```

  示例 2：

  第一个操作数是 {"a": 1, "c": 2}，第二个操作数是 {"b": 1, "a": 1}。在此示例中，运算符首先比较两个操作数中键 "a" 的值，发现均为 1。然后，运算符比较键 "c" 的值。由于第二个操作数不包含键 "c"，因此运算符得出结论：第一个操作数 {"a": 1, "c": 2} 大于第二个操作数 {"b": 1, "a": 1}。

```plaintext
mysql> SELECT PARSE_JSON('{"a": 1, "c": 2}') < PARSE_JSON('{"b": 1, "a": 1}');

       -> 0
```

- 当运算符的操作数为两种不同数据类型的 JSON 值时，运算符将根据以下优先级规则进行比较：NULL < 布尔值（BOOLEAN） < 数组（ARRAY） < 对象（OBJECT） < 双精度浮点数（DOUBLE） < 整型（INT） < 字符串（STRING）。

```plaintext
mysql> SELECT PARSE_JSON('"a"') < PARSE_JSON('{"a": 1, "c": 2}');

       -> 0
```
