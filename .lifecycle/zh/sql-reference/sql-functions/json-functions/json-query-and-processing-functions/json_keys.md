---
displayed_sidebar: English
---

# json_keys

## 描述

返回 JSON 对象的顶级键作为一个 JSON 数组，或者如果指定了路径，返回该路径下的顶级键。

## 语法

```Haskell
json_keys(json_doc[, path])
```

## 参数

json_doc：必须。需要返回键的 JSON 文档。该文档必须是一个 JSON 对象。

path：可选。路径通常以 $ 开头，并使用 . 作为路径分隔符。[] 用作数组下标，从 0 开始。

## 返回值

返回一个 JSON 数组。

如果 JSON 对象为空，则返回一个空数组。

如果 JSON 文档不是一个 JSON 对象，或者路径没有在文档中找到对应的值，则返回 NULL。

如果 JSON 文档是一个数组并嵌套有 JSON 对象，可以使用路径参数来获取该对象的键。

## 示例

示例 1：输入的 JSON 对象为空，因此返回一个空数组。

```Plain
select json_keys('{}');
+-----------------+
| json_keys('{}') |
+-----------------+
| []              |
+-----------------+
```

示例 2：返回一个 JSON 对象的键。

```Plain
select json_keys('{"a": 1, "b": 2, "c": 3}');
+----------------+
| json_keys('1') |
+----------------+
|["a", "b", "c"] |
+----------------+
```

示例 3：返回与指定路径相匹配的 JSON 对象的键。

```Plain
select json_keys('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.c');
+---------------------------------------------------------------------+
| json_keys('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.c') |
+---------------------------------------------------------------------+
| ["d", "e", "f"]                                                     |
+---------------------------------------------------------------------+
```

示例 4：路径不存在。

```Plain
select json_keys('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.e');
+---------------------------------------------------------------------+
| json_keys('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.e') |
+---------------------------------------------------------------------+
| NULL                                                                |
+---------------------------------------------------------------------+
```

示例 5：JSON 文档不是一个 JSON 对象。

```Plain
select json_keys('[1, 2, {"a": 1, "b": 2}]');
+---------------------------------------+
| json_keys('[1, 2, {"a": 1, "b": 2}]') |
+---------------------------------------+
| NULL                                  |
+---------------------------------------+
```

示例 6：JSON 文档是一个嵌套了 JSON 对象的数组。通过指定路径来获取该对象的键。

```Plain
select json_keys('[0, 1, {"a": 1, "b": 2}]', '$[2]');
+-----------------------------------------------+
| json_keys('[0, 1, {"a": 1, "b": 2}]', '$[2]') |
+-----------------------------------------------+
| ["a", "b"]                                    |
+-----------------------------------------------+
```
