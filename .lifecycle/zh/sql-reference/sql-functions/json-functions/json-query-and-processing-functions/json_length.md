---
displayed_sidebar: English
---

# json_length

## 描述

返回JSON文档的长度。如果指定了路径，该函数将返回由路径所标识的值的长度。

文档的长度是根据以下规则来确定的：

- 标量值的长度为1。例如，1、“a”、true、false和null的长度都是1。

- 数组的长度是其元素的个数。例如，[1, 2]的长度是2。

- 对象的长度是其成员的个数。例如，{"a": 1}的长度是1。

- 嵌套数组或对象的长度不计入总长度。例如，{"a": [1, 2]}的长度是1，因为嵌套的数组[1, 2]不计入长度。

## 语法

```Haskell
json_length(json_doc[, path])
```

## 参数

json_doc：必需，要返回长度的JSON文档。

path：可选。用于返回文档内某个值的长度。路径通常以$开头，并使用.作为路径分隔符。[]用作数组下标，从0开始。

## 返回值

返回INT类型的值。

如果JSON文档不是有效的，则会返回错误。

在以下任一情况下，都会返回0：

- **`路径`**没有标识出文档中的任何值。

- 路径不是一个有效的路径表达式。

- 路径包含*或**通配符。

## 示例

示例1：返回标量值的长度。

```Plain
select json_length('1');
+------------------+
| json_length('1') |
+------------------+
|                1 |
+------------------+
```

示例2：返回空对象的长度。

```Plain
select json_length('{}');
+-------------------+
| json_length('{}') |
+-------------------+
|                 0 |
+-------------------+
```

示例3：返回含有数据的对象的长度。

```Plain
select json_length('{"Name": "Homer"}');
+----------------------------------+
| json_length('{"Name": "Homer"}') |
+----------------------------------+
|                                1 |
+----------------------------------+
```

示例4：返回JSON数组的长度。

```plain
select json_length('[1, 2, 3]');
+--------------------------+
| json_length('[1, 2, 3]') |
+--------------------------+
|                        3 |
+--------------------------+
```

示例5：返回其中一个元素包含嵌套数组的JSON数组的长度。

嵌套数组[3, 4]不计入长度。

```plain
select json_length('[1, 2, [3, 4]]');
+-------------------------------+
| json_length('[1, 2, [3, 4]]') |
+-------------------------------+
|                             3 |
+-------------------------------+
```

示例6：返回由路径$.Person指定的对象的长度。

```SQL
SET @file = '{  
    "Person": {    
       "Name": "Homer", 
       "Age": 39,
       "Hobbies": ["Eating", "Sleeping"]  
    }
 }';
select json_length(@file, '$.Person') 'Result';
```

示例7：返回由路径$.y指定的值的长度。

```plain
select json_length('{"x": 1, "y": [1, 2]}', '$.y');
+---------------------------------------------+
| json_length('{"x": 1, "y": [1, 2]}', '$.y') |
+---------------------------------------------+
|                                           2 |
+---------------------------------------------+
```
