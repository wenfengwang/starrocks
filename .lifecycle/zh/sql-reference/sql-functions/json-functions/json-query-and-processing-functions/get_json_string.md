---
displayed_sidebar: English
---

# 获取 JSON 字符串

## 描述

此函数用于解析 JSON 字符串，并从指定的路径中提取字符串。

json_path 必须以 $ 开头，并使用 . 作为路径分隔符。

如果路径包含 .，应使用双引号 " 将其括起来。

[ ] 用作数组下标，其起始索引为 0。

路径内容不应包含双引号 "、左中括号 [ 或右中括号 ]。

如果 json_string 或 json_path 的格式不正确，此函数将返回 NULL。

## 语法

```Haskell
VARCHAR get_json_string(VARCHAR json_str, VARCHAR json_path)
```

## 示例

1. 获取键名为 "k1" 的值

   ```Plain
   MySQL > SELECT get_json_string('{"k1":"v1", "k2":"v2"}', "$.k1");
   +---------------------------------------------------+
   | get_json_string('{"k1":"v1", "k2":"v2"}', '$.k1') |
   +---------------------------------------------------+
   | v1                                                |
   +---------------------------------------------------+
   ```

2. 获取键名为 "my.key" 的数组中的第二个元素

   ```Plain
   MySQL > SELECT get_json_string('{"k1":"v1", "my.key":["e1", "e2", "e3"]}', '$."my.key"[1]');
   +------------------------------------------------------------------------------+
   | get_json_string('{"k1":"v1", "my.key":["e1", "e2", "e3"]}', '$."my.key"[1]') |
   +------------------------------------------------------------------------------+
   | e2                                                                           |
   +------------------------------------------------------------------------------+
   ```

3. 获取路径为 k1.key -> k2 的数组中的第一个元素

   ```Plain
   MySQL > SELECT get_json_string('{"k1.key":{"k2":["v1", "v2"]}}', '$."k1.key".k2[0]');
   +-----------------------------------------------------------------------+
   | get_json_string('{"k1.key":{"k2":["v1", "v2"]}}', '$."k1.key".k2[0]') |
   +-----------------------------------------------------------------------+
   | v1                                                                    |
   +-----------------------------------------------------------------------+
   ```

4. 从数组中获取所有键名为 "k1" 的值

   ```Plain
   MySQL > SELECT get_json_string('[{"k1":"v1"}, {"k2":"v2"}, {"k1":"v3"}, {"k1":"v4"}]', '$.k1');
   +---------------------------------------------------------------------------------+
   | get_json_string('[{"k1":"v1"}, {"k2":"v2"}, {"k1":"v3"}, {"k1":"v4"}]', '$.k1') |
   +---------------------------------------------------------------------------------+
   | ["v1","v3","v4"]                                                                |
   +---------------------------------------------------------------------------------+
   ```

## 关键字

GET_JSON_STRING, GET, JSON, STRING
