---
displayed_sidebar: English
---

# to_binary

## 描述

此函数能将 VARCHAR 类型的字符串根据指定的二进制格式（binary_type）转换成二进制值。支持以下几种二进制格式：hex（十六进制）、encode64（64位编码）和 utf8。如果没有明确指定 binary_type，默认使用的是 hex 格式。

## 语法

```Haskell
to_binary(str[, binary_type])
```

## 参数

- str：需要转换的字符串，此参数是必须的。该字符串必须为 VARCHAR 类型。
- binary_type：转换时使用的二进制格式，此参数是可选的。

  - hex（默认）：to_binary 会将输入的字符串视为十六进制字符串，其中所有字符都应包含在“0123456789abcdef”中。如果输入的字符串不符合要求，则会返回一个空的二进制值（不会抛出异常）。to_binary 将直接将输入的字符串转换为二进制。例如，“abab”会被转换为 x'abab'。输入的字符串在处理时不区分大小写。
  - encode64：to_binary 假设输入的字符串是一个经过 base64 编码的字符串。如果输入的字符串不合法，则同样会返回一个空的二进制值（不会抛出异常）。to_binary 将解码 base64 编码的字符串，得到二进制结果。例如，“YWJhYg==”会被转换为 x'abab'。
  - utf8：to_binary 直接将输入的字符串视为二进制值进行转换，不进行任何形式的变换。

## 返回值

返回一个 VARCHAR 类型的值。

## 示例

以下示例假设您在通过 MySQL 客户端访问 StarRocks 时已经启用了 --binary-as-hex 选项。这样设置后，二进制数据会以十六进制的形式展示。

```Plain
mysql> select to_binary('ABAB', 'hex');
+----------------------------------------------------+
| to_binary('ABAB', 'hex')                           |
+----------------------------------------------------+
| 0xABAB                                             |
+----------------------------------------------------+
1 row in set (0.01 sec)

mysql> select to_binary('U1RBUlJPQ0tT', 'encode64');
+------------------------------------------------------------------------------+
| to_binary('U1RBUlJPQ0tT', 'encode64')                                        |
+------------------------------------------------------------------------------+
| 0x53544152524F434B53                                                         |
+------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> select to_binary('STARROCKS', 'utf8');
+----------------------------------------------------------------+
| to_binary('STARROCKS', 'utf8')                                 |
+----------------------------------------------------------------+
| 0x53544152524F434B53                                           |
+----------------------------------------------------------------+
1 row in set (0.00 sec)

-- The input string does not match the binary format and an empty binary is returned.

mysql> select to_binary('U1RBUlJPQ0tT', 'hex');
+--------------------------------------------------------------------+
| to_binary('U1RBUlJPQ0tT', 'hex')                                   |
+--------------------------------------------------------------------+
| 0x                                                                 |
+--------------------------------------------------------------------+
1 row in set (0.00 sec)
```

## 参考资料

- [from_binary](from_binary.md)
- [BINARY/VARBINARY 数据类型](../../sql-statements/data-types/BINARY.md)
