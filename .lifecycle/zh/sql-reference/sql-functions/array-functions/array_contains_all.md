---
displayed_sidebar: English
---

# 数组完全包含检查

## 描述

验证数组arr1是否包含数组arr2的所有元素，即判断arr2是否为arr1的子集。若是，则返回1；若不是，则返回0。

## 语法

```Haskell
BOOLEAN array_contains_all(arr1, arr2)
```

## 参数

arr：需要比较的两个数组。该语法用于检查arr2是否为arr1的子集。

两个数组中的元素数据类型必须相同。有关StarRocks支持的数组元素数据类型，请参阅[ARRAY](../../../sql-reference/sql-statements/data-types/Array.md)文档。

## 返回值

返回布尔类型（BOOLEAN）的值。

如果arr2是arr1的子集，返回1；否则，返回0。

如果两个数组中任一个为NULL，返回NULL。

## 使用说明

- 如果数组中包含null元素，那么null将被当作一个普通值处理。

- 空数组被认为是任何数组的子集。

- 两个数组中的元素可以是不同的顺序。

## 示例

1. 创建一个名为t1的表，并向该表插入数据。

   ```SQL
   CREATE TABLE t1 (
       c0 INT,
       c1 ARRAY<INT>,
       c2 ARRAY<INT>
   ) ENGINE=OLAP
   DUPLICATE KEY(c0)
   DISTRIBUTED BY HASH(c0);
   
   INSERT INTO t1 VALUES
       (1,[1,2,3],[1,2]),
       (2,[1,2,3],[1,4]),
       (3,NULL,[1]),
       (4,[1,2,null],NULL),
       (5,[1,2,null],[null]),
       (6,[2,3],[]);
   ```

2. 从该表中查询数据。

   ```Plain
   SELECT * FROM t1 ORDER BY c0;
   +------+------------+----------+
   | c0   | c1         | c2       |
   +------+------------+----------+
   |    1 | [1,2,3]    | [1,2]    |
   |    2 | [1,2,3]    | [1,4]    |
   |    3 | NULL       | [1]      |
   |    4 | [1,2,null] | NULL     |
   |    5 | [1,2,null] | [null]   |
   |    6 | [2,3]      | []       |
   +------+------------+----------+
   ```

3. 检查每一行的c2是否为对应c1行的子集。

   ```Plaintext
   SELECT c0, c1, c2, array_contains_all(c1, c2) FROM t1 ORDER BY c0;
   +------+------------+----------+----------------------------+
   | c0   | c1         | c2       | array_contains_all(c1, c2) |
   +------+------------+----------+----------------------------+
   |    1 | [1,2,3]    | [1,2]    |                          1 |
   |    2 | [1,2,3]    | [1,4]    |                          0 |
   |    3 | NULL       | [1]      |                       NULL |
   |    4 | [1,2,null] | NULL     |                       NULL |
   |    5 | [1,2,null] | [null]   |                          1 |
   |    6 | [2,3]      | []       |                          1 |
   +------+------------+----------+----------------------------+
   ```

输出结果：

对于第1行，c2是c1的子集，返回1。

对于第2行，c2不是c1的子集，返回0。

对于第3行，c1为NULL，返回NULL。

对于第4行，c2为NULL，返回NULL。

对于第5行，两个数组均包含null，null被当作正常值处理，返回1。

对于第6行，c2是一个空数组，它被视为c1的子集，因此返回1。
