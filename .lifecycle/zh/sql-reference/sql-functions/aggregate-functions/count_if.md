---
displayed_sidebar: English
---


# 计数如果 -> count_if

## 描述 -> 描述：

返回满足指定条件的总行数。 -> 返回满足特定条件的行总数。

此函数不支持 DISTINCT，例如 count_if(DISTINCT x) 无效。 -> 本函数不支持使用 DISTINCT，例如 count_if(DISTINCT x) 是不合法的。

该函数在内部转换为 COUNT + IF： -> 在内部，此函数被转换为 COUNT 加上 IF 的组合：

之前：COUNT_IF(x)之后：COUNT(IF(x, 1, NULL)) -> 转换前：COUNT_IF(x)，转换后：COUNT(IF(x, 1, NULL))。

## 句法 -> 语法：

```Haskell
COUNT_IF(expr)
```

## 参数 -> 参数：

expr：执行 count_if() 所基于的列或表达式。如果 expr 是列名，则该列可以是任何数据类型。 -> expr：进行 count_if() 操作所依据的列或表达式。如果 expr 是一个列名，这个列可以是任意数据类型。

## 返回值 -> 返回值：

返回一个数值。如果找不到行，则返回 0。该函数忽略 NULL 值。 -> 返回一个数字值。如果没有符合条件的行，则返回 0。此函数会忽略 NULL 值。

## 例子 -> 示例：

假设有一个名为 test_count_if 的表。 -> 假设存在一个名为 test_count_if 的表格。

```Plain
select * from test_count_if;
+------+------+---------------------+------+
| v1   | v2   | v3                  | v4   |
+------+------+---------------------+------+
| a    | NULL | 2022-04-18 02:05:00 |    1 |
| a    | a    | 2022-04-18 01:01:00 |    1 |
| a    | b    | 2022-04-18 02:01:00 | NULL |
| a    | b    | 2022-04-18 02:15:00 |    3 |
| a    | b    | 2022-04-18 03:15:00 |    7 |
| c    | NULL | 2022-04-18 03:25:00 |    2 |
| c    | NULL | 2022-04-18 03:45:00 | NULL |
| c    | a    | 2022-04-18 03:27:00 |    3 |
+------+------+---------------------+------+
```

示例 1：计算表 test_count_if 中 v2 为空的行数。 -> 示例 1：统计表 test_count_if 中 v2 为 NULL 的行数。

```Plain
select count_if(v2 is null) from test_count_if;
+----------------------+
| count_if(v2 IS NULL) |
+----------------------+
|                    3 |
+----------------------+
```

示例 2：计算 v1 >= v2 或 v4 = 1 的行数。 -> 示例 2：统计 v1 大于等于 v2 或者 v4 等于 1 的行数。

```Plain
select count_if(v1 >= v2 or v4 = 1)from test_count_if;
+----------------------------------+
| count_if((v1 >= v2) OR (v4 = 1)) |
+----------------------------------+
|                                3 |
+----------------------------------+
```
