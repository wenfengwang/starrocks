---
displayed_sidebar: English
---

# 日期差

## 描述

返回两个日期值之间的差异，单位由用户指定。该函数计算的是 expr1 与 expr2 之间的差值，并以指定的单位来表示。

例如，date_diff('second', '2010-11-30 23:59:59', '2010-11-30 20:58:59') 会返回两个 DATETIME 值之间的秒数差。

该功能从 v3.1 版本开始支持。

The difference between date_diff and [datediff](./datediff.md) lies in that datediff() does not support the `unit` parameter.

## 语法

```Haskell
BIGINT DATE_DIFF(VARCHAR unit, DATETIME expr1, DATETIME expr2)
```

## 参数

- expr1 和 expr2：需要比较的两个日期时间值，这两个参数是必须的。支持的数据类型包括 DATETIME 和 DATE。

- unit：用来表示时间差的单位，这是必须的。支持以下单位值：年、季、月、周、天、小时、分钟、秒、毫秒。

## 返回值

返回一个 BIGINT 类型的值。

## 使用须知

- 如果 expr1 早于 expr2，将返回一个负数。
- 如果单位不合法，将返回一个错误。
- 如果任一输入值为 NULL，将返回 NULL。
- 如果指定的日期不存在，例如 2022-11-31，将返回 NULL。

## 示例

```Plain
mysql> select date_diff('second', '2010-11-30 23:59:59', '2010-11-30 20:58:59');
+-------------------------------------------------------------------+
| date_diff('second', '2010-11-30 23:59:59', '2010-11-30 20:58:59') |
+-------------------------------------------------------------------+
|                                                             10860 |
+-------------------------------------------------------------------+

mysql> select date_diff('minute', '2010-11-30 23:59:59', '2010-11-30 20:58:59');
+-------------------------------------------------------------------+
| date_diff('minute', '2010-11-30 23:59:59', '2010-11-30 20:58:59') |
+-------------------------------------------------------------------+
|                                                               181 |
+-------------------------------------------------------------------+

mysql> select date_diff('hour', '2010-11-30 23:59:59', '2010-11-30 20:58:59');
+-----------------------------------------------------------------+
| date_diff('hour', '2010-11-30 23:59:59', '2010-11-30 20:58:59') |
+-----------------------------------------------------------------+
|                                                               3 |
+-----------------------------------------------------------------+

mysql> select date_diff('millisecond', '2010-11-30 23:59:59', '2010-11-30 20:58:59');
+------------------------------------------------------------------------+
| date_diff('millisecond', '2010-11-30 23:59:59', '2010-11-30 20:58:59') |
+------------------------------------------------------------------------+
|                                                               10860000 |
+------------------------------------------------------------------------+
```

## 参考资料

[datediff](./datediff.md)
