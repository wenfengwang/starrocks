---
displayed_sidebar: English
---

# 日期截断

## 描述

根据指定的日期部分（如年、日、小时或分钟）截断时间值。

StarRocks 还提供了年、季度、月、周、日和小时等函数，以便您提取指定的日期部分。

## 语法

```Haskell
DATETIME date_trunc(VARCHAR fmt, DATETIME|DATE datetime)
```

## 参数

- datetime：要截断的时间，可以是 DATETIME 或 DATE 类型。日期和时间必须是有效的，否则将返回 NULL。例如，2021-02-29 11:12:13 不存在作为一个日期，因此会返回 NULL。

- fmt：日期部分，即将 datetime 截断到哪个精度。该值必须是 VARCHAR 类型的常量。

  fmt 必须设置为下表中列出的值。如果该值不正确，则会返回错误。

  如果 datetime 是 DATE 类型的值，那么 fmt 只能是年、季度、月、周或日。如果将 fmt 设置为其他日期单位，例如小时，将会报告错误。请参见示例 5。

|值|描述|
|---|---|
|第二个|截断为第二个。|
|分钟|截断为分钟。第二部分将归零。|
|hour|截断为小时。分钟和秒部分将被清零。|
|day|截断为日。时间部分将清零。|
|week|截断为 datetime 所在周的第一个日期。时间部分将为零。|
|month|截断为 datetime 所在月份的第一个日期。时间部分将为零。|
|quarter|截断为日期时间所在季度的第一个日期。时间部分将为零。|
|year|截断为 datetime 所在年份的第一个日期。时间部分将为零。|

## 返回值

返回 DATETIME 类型的值。

如果 datetime 是 DATE 类型，并且 fmt 设置为小时、分钟或秒，那么返回值的时间部分默认为 00:00:00。

## 示例

示例 1：将输入时间截断到分钟。

```Plain
select date_trunc("minute", "2020-11-04 11:12:13");
+---------------------------------------------+
| date_trunc('minute', '2020-11-04 11:12:13') |
+---------------------------------------------+
| 2020-11-04 11:12:00                         |
+---------------------------------------------+
```

示例 2：将输入时间截断到小时。

```Plain
select date_trunc("hour", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('hour', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-11-04 11:00:00                       |
+-------------------------------------------+
```

示例 3：将输入时间截断到所在周的第一天。

```Plain
select date_trunc("week", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('week', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-11-02 00:00:00                       |
+-------------------------------------------+
```

示例 4：将输入时间截断到所在年的第一天。

```Plain
select date_trunc("year", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('year', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-01-01 00:00:00                       |
+-------------------------------------------+
```

示例 5：将 DATE 类型的值截断到小时。这会返回错误。

```Plain
select date_trunc("hour", cast("2020-11-04" as date));

ERROR 1064 (HY000): Getting analyzing error from line 1, column 26 to line 1, column 51. Detail message: date_trunc function can't support argument other than year|quarter|month|week|day.
```
