---
displayed_sidebar: English
---

# 表类型概述

在创建表时，您必须指定一个表类型，并定义一个或多个列作为排序键。这样，当数据最初被加载到您创建的表中时，StarRocks 能够根据排序键对数据进行排序、处理和存储。本主题旨在介绍 StarRocks 提供的表类型，以满足您不同的业务需求。

## 基本概念

### 表类型

StarRocks 提供了四种表类型：重复键表（Duplicate Key table）、聚合表（Aggregate table）、唯一键表（Unique Key table）和主键表（Primary Key table）。这四种表类型非常适合各种数据分析场景，如日志分析、数据聚合与分析、实时数据分析等。

### 排序键

当数据被加载到某个特定表类型的表中时，会根据在创建表时定义的一个或多个排序键列对数据进行排序和存储。排序键通常是一个或多个经常用作查询过滤条件的列，因此能够加快查询速度。

在重复键表（Duplicate Key table）中，由 DUPLICATE KEY 指定的排序键用于对数据进行排序，但不会赋予 UNIQUE 约束。在聚合表（Aggregate table）中，由 AGGREGATE KEY 指定的排序键用于对数据进行排序，并且赋予了 UNIQUE 约束。在唯一键表（Unique Key table）中，由 UNIQUE KEY 指定的排序键用于对数据进行排序，并且赋予了 UNIQUE 约束。在主键表（Primary Key table）中，主键和排序键是分开的。由 PRIMARY KEY 指定的主键赋予了 UNIQUE 和 NOT NULL 约束，而由 ORDER BY 指定的排序键用于数据排序。

> **注意**
- 在 v3.0 之前的版本中，主键表不支持分别定义主键和排序键。
- 要了解更多关于排序键的信息，请参考[Sort keys and prefix indexes](../Sort_key.md)部分。

## 注意事项

- 在创建表的语句中，必须先定义排序键列，再定义其他列。

- 创建表的语句中排序键列的顺序决定了表中行的排序依据。

- 表的前缀索引长度限制为 36 字节。如果排序键列的总长度超过了 36 字节，StarRocks 仅会为前缀索引存储在长度限制内的前几个排序键列。

- 如果要加载到表中的记录具有相同的主键，StarRocks 会根据表的类型来处理和存储这些记录：
-   重复键表
    StarRocks 把每条记录作为独立的行加载到表中。数据加载完成后，表中会包含具有相同主键的多行，并且这些行与源记录保持一对一的映射关系。您可以查询到您加载的所有历史数据。

-   聚合表

    StarRocks 把记录聚合成一条记录，并将这条聚合记录作为一行加载到表中。加载完成后，表中不会包含具有相同主键的多行。您可以查询到您加载的所有历史数据的聚合结果。但是，您无法查询到所有的历史数据。

-   唯一键表和主键表

    StarRocks 用新加载的记录替换掉之前加载的记录，并且只保留最新加载的记录作为表中的一行。加载完成后，表中不会包含具有相同主键的多行。唯一键表和主键表可以被视为一种特殊的聚合表，在这种表中，为度量列指定了 REPLACE 聚合函数，以返回具有相同主键的记录组中最新的记录。
