---
displayed_sidebar: "Japanese"
---

# SHOW EXPORT（エクスポートの表示）

## 説明

指定した条件を満たすエクスポートジョブの実行情報を問い合わせます。

## 構文

```SQL
SHOW EXPORT
[ FROM <db_name> ]
[
WHERE
    [ QUERYID = <query_id> ]
    [ STATE = { "PENDING" | "EXPORTING" | "FINISHED" | "CANCELLED" } ]
]
[ ORDER BY <field_name> [ ASC | DESC ] [, ... ] ]
[ LIMIT <count> ]
```

## パラメーター

このステートメントには、次のオプションの句を含めることができます。

- FROM

  問い合わせたいデータベースの名前を指定します。FROM句を指定しない場合、StarRocksは現在のデータベースを問い合わせます。

- WHERE

  指定した条件に基づいてエクスポートジョブをフィルタリングする条件を指定します。指定した条件を満たすエクスポートジョブのみが、クエリの結果セットに返されます。

  | **パラメーター** | **必須** | **説明**                                              |
  | ------------- | ------------ | ------------------------------------------------------------ |
  | QUERYID       | いいえ           | 問い合わせたいエクスポートジョブのID。このパラメーターは、単一のエクスポートジョブの実行情報を問い合わせるために使用されます。 |
  | STATE         | いいえ           | 問い合わせたいエクスポートジョブの状態。有効な値:<ul><li>`PENDING`: スケジュール待ちのエクスポートジョブを問い合わせることを指定します。</li><li>`EXPORTING`: 実行中のエクスポートジョブを問い合わせることを指定します。</li><li>`FINISHED`: 正常に完了したエクスポートジョブを問い合わせることを指定します。</li><li>`CANCELLED`: 失敗したエクスポートジョブを問い合わせることを指定します。</li></ul> |

- ORDER BY

  クエリの結果セット内でエクスポートジョブのレコードをソートする基準のフィールド名を指定します。複数のフィールドを指定することができ、カンマ（`,`）で区切る必要があります。さらに、指定したフィールドに基づいてエクスポートジョブのレコードを昇順または降順でソートすることを指定するために、`ASC`または`DESC`キーワードを使用することができます。

- LIMIT

  クエリの結果セットを指定した最大行数に制限します。有効な値: 正の整数。LIMIT句を指定しない場合、StarRocksは指定した条件を満たすすべてのエクスポートジョブを返します。

## 結果の表示

例えば、IDが`edee47f0-abe1-11ec-b9d1-00163e1e238f`であるエクスポートジョブの実行情報を問い合わせる場合:

```SQL
SHOW EXPORT
WHERE QUERYID = "edee47f0-abe1-11ec-b9d1-00163e1e238f";
```

次の実行情報が返されます:

```SQL
     JobId: 14008
   QueryId: edee47f0-abe1-11ec-b9d1-00163e1e238f
     State: FINISHED
  Progress: 100%
  TaskInfo: {"partitions":["*"],"column separator":"\t","columns":["*"],"tablet num":10,"broker":"","coord num":1,"db":"db0","tbl":"tbl_simple","row delimiter":"\n","mem limit":2147483648}
      Path: hdfs://127.0.0.1:9000/users/230320/
CreateTime: 2023-03-20 11:16:14
 StartTime: 2023-03-20 11:16:17
FinishTime: 2023-03-20 11:16:26
   Timeout: 7200
```

結果のパラメーターは次のように説明されます:

- `JobId`: エクスポートジョブのID。
- `QueryId`: クエリのID。
- `State`: エクスポートジョブの状態。

  有効な値:

  - `PENDING`: エクスポートジョブはスケジュール待ちです。
  - `EXPORTING`: エクスポートジョブは実行中です。
  - `FINISHED`: エクスポートジョブは正常に完了しました。
  - `CANCELLED`: エクスポートジョブは失敗しました。

- `Progress`: エクスポートジョブの進行状況。進行状況はクエリプランの単位で測定されます。例えば、エクスポートジョブが10のクエリプランに分割されており、そのうち3つが完了している場合、エクスポートジョブの進行状況は30%となります。詳細については、["EXPORT > ワークフロー"](../../../unloading/Export.md#workflow)を参照してください。
- `TaskInfo`: エクスポートジョブの情報。

  この情報は次のキーで構成されるJSONオブジェクトです:

  - `partitions`: エクスポートされたデータが存在するパーティション。このキーの値としてワイルドカード(`*`)が返された場合、エクスポートジョブはすべてのパーティションからデータをエクスポートするために実行されます。
  - `column separator`: エクスポートされたデータファイルで使用される列の区切り記号。
  - `columns`: データがエクスポートされる列の名前。
  - `tablet num`: エクスポートされるタブレットの総数。
  - `broker`: v2.4以前では、このフィールドを使用してエクスポートジョブで使用されるブローカーの名前が返されます。v2.5以降では、このフィールドは空の文字列が返されます。詳細については、["EXPORT > バックグラウンド情報"](../../../unloading/Export.md#background-information)を参照してください。
  - `coord num`: エクスポートジョブが分割されるクエリプランの数。
  - `db`: エクスポートされたデータが所属するデータベースの名前。
  - `tbl`: エクスポートされたデータが所属するテーブルの名前。
  - `row delimiter`: エクスポートされたデータファイルで使用される行の区切り記号。
  - `mem limit`: エクスポートジョブに許可された最大メモリ量。単位: バイト。

- `Path`: リモートストレージに保存されたエクスポートされたデータのパス。
- `CreateTime`: エクスポートジョブが作成された時間。
- `StartTime`: エクスポートジョブがスケジュールされた時間。
- `FinishTime`: エクスポートジョブが完了した時間。
- `Timeout`: 予想よりも長くかかったエクスポートジョブの時間。単位: 秒。時間は`CreateTime`から数えられます。
- `ErrorMsg`: エクスポートジョブがエラーをスローした理由。このフィールドは、エクスポートジョブがエラーに遭遇した場合にのみ返されます。

## 例

- 現在のデータベース内のすべてのエクスポートジョブを問い合わせる:

  ```SQL
  SHOW EXPORT;
  ```

- データベース`example_db`内のIDが`921d8f80-7c9d-11eb-9342-acde48001122`であるエクスポートジョブを問い合わせる:

  ```SQL
  SHOW EXPORT FROM example_db
  WHERE queryid = "921d8f80-7c9d-11eb-9342-acde48001122";
  ```

- 状態が`EXPORTING`である`example_db`内のエクスポートジョブを問い合わせ、結果セット内のエクスポートジョブのレコードを`StartTime`で昇順にソートするよう指定する:

  ```SQL
  SHOW EXPORT FROM example_db
  WHERE STATE = "exporting"
  ORDER BY StartTime ASC;
  ```

- データベース`example_db`内のすべてのエクスポートジョブを問い合わせ、結果セット内のエクスポートジョブのレコードを`StartTime`で降順にソートするよう指定する:

  ```SQL
  SHOW EXPORT FROM example_db
  ORDER BY StartTime DESC;
  ```