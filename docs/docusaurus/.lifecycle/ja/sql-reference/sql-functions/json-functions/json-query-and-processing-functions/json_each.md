---
displayed_sidebar: "Japanese"
---

# json_each

## 説明

JSONオブジェクトの最も外側の要素をキーと値のペアのセットに展開し、それぞれの要素に対して1行ずつ含むテーブルを返します。

## 構文

```Haskell
json_each(json_object_expr)
```

## パラメータ

`json_object_expr`: JSONオブジェクトを表す式。オブジェクトはJSON列であったり、PARSE_JSONなどのJSONコンストラクタ関数によって生成されたJSONオブジェクトです。

## 戻り値

二つの列を返します: 一つはkeyと名付けられ、もう一つはvalueと名付けられます。key列はVARCHAR値を保存し、value列はJSON値を保存します。

## 使用上の注意

json_each関数はテーブルを返すテーブル関数です。返されるテーブルは複数の行で構成される結果セットです。したがって、返されたテーブルを元のテーブルにJOINするためにFROM句にLATERAL JOINを使用する必要があります。LATERAL JOINは必須ですが、LATERALキーワードはオプションです。また、json_each関数はSELECT句で使用することはできません。

## 例

```plaintext
-- tjという名前のテーブルが例として使用されています。tjテーブルでは、j列はJSONオブジェクトです。
mysql> SELECT * FROM tj;
+------+------------------+
| id   | j                |
+------+------------------+
|    1 | {"a": 1, "b": 2} |
|    3 | {"a": 3}         |
+------+------------------+

-- tjテーブルのj列をkeyとvalueの二つの列に展開し、複数の行で構成される結果セットを取得します。この例では、LATERALキーワードを使用して結果セットをtjテーブルにJOINしています。

mysql> SELECT * FROM tj, LATERAL json_each(j);
+------+------------------+------+-------+
| id   | j                | key  | value |
+------+------------------+------+-------+
|    1 | {"a": 1, "b": 2} | a    | 1     |
|    1 | {"a": 1, "b": 2} | b    | 2     |
|    3 | {"a": 3}         | a    | 3     |
+------+------------------+------+-------+
```