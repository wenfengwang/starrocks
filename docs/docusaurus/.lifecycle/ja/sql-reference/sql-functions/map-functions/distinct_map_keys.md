---
displayed_sidebar: "Japanese"
---

# distinct_map_keys

## 説明

マップから重複するキーを削除します。なぜなら、マップ内のキーは意味の上で一意でなければならないからです。この関数は同じキーに対して最後の値のみを保持し、LAST WIN と呼ばれます。この関数は、外部テーブルからMAPデータをクエリする際に、マップ内に重複するキーがある場合に使用されます。StarRocksの内部テーブルでは、ネイティブでマップ内の重複するキーを削除します。

この関数はv3.1からサポートされています。

## 構文

```Haskell
distinct_map_keys(any_map)
```

## パラメータ

`any_map`: 重複するキーを削除したいMAPの値。

## 戻り値

各マップ内の重複するキーがない新しいマップを返します。

入力がNULLの場合、NULLが返されます。

## 例

例1: 単純な使用例。

```plain
select distinct_map_keys(map{"a":1,"a":2});
+-------------------------------------+
| distinct_map_keys(map{'a':1,'a':2}) |
+-------------------------------------+
| {"a":2}                             |
+-------------------------------------+
```

例2: 外部テーブルからMAPデータをクエリし、`col_map`列から重複するキーを削除します。

```plain
select distinct_map_keys(col_map) as unique, col_map from external_table;
+---------------+---------------+
|      unique   | col_map       |
+---------------+---------------+
|       {"c":2} | {"c":1,"c":2} |
|           NULL|          NULL |
| {"e":4,"d":5} | {"e":4,"d":5} |
+---------------+---------------+
3 rows in set (0.05 sec)
```