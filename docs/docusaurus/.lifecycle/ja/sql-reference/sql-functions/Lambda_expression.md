---
displayed_sidebar: "Japanese"
---

# ラムダ式

ラムダ式は、高階SQL関数のパラメータとして渡すことができる匿名関数です。ラムダ式を使用すると、コードをより簡潔で優雅、かつ拡張可能にすることができます。

ラムダ式は `->` 演算子で記述され、左側は入力パラメータ（あれば）であり、右側は式です。

v2.5以降、StarRocksは次の高階SQL関数でラムダ式の使用をサポートしています: [array_map()](./array-functions/array_map.md), [array_filter()](./array-functions/array_filter.md), [array_sum()](./array-functions/array_sum.md), および [array_sortby()](./array-functions/array_sortby.md)。

## 構文

```Haskell
parameter -> expression
```

## パラメータ

- `parameter`: ラムダ式の入力パラメータであり、ゼロ個、1個以上のパラメータを受け入れることができます。2個以上の入力パラメータは括弧で囲みます。

- `expression`: `parameter` を参照する単純な式です。式は入力パラメータに対して有効である必要があります。

## 戻り値

戻り値の型は `expression` の結果型によって決まります。

## 使用上の注意

殆どのスカラー関数は、ラムダ本体で使用することができます。ただし、以下の例外があります:

- サブクエリはサポートされていません。例: `x -> 5 + (SELECT 3)`.
- 集約関数はサポートされていません。例: `x -> min(y)`.
- ウィンドウ関数はサポートされていません。
- テーブル関数はサポートされていません。
- 相関カラムはラムダ関数には現れません。

## 例

ラムダ式の簡単な例:

```SQL
-- パラメータを受け入れず、5を返します。
() -> 5    
-- xを取り、(x + 2)の値を返します。
x -> x + 2 
-- xとyを取り、それらの合計を返します。
(x, y) -> x + y 
-- xを取り、xに関数を適用します。
x -> COALESCE(x, 0)
x -> day(x)
x -> split(x,",")
x -> if(x>0,"positive","negative")
```

高階関数でのラムダ式の使用例:

```Haskell
select array_map((x,y,z) -> x + y, [1], [2], [4]);
+----------------------------------------------+
| array_map((x, y, z) -> x + y, [1], [2], [4]) |
+----------------------------------------------+
| [3]                                          |
+----------------------------------------------+
1 行が返されました (0.01 秒)
```