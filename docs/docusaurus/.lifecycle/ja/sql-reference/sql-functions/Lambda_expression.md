---
displayed_sidebar: "Japanese"
---

# ラムダ式

ラムダ式は、ハイアーオーダーSQL関数のパラメータとして渡すことができる匿名関数です。ラムダ式を使用すると、より簡潔でエレガントで拡張可能なコードを開発できます。

ラムダ式は `->` 演算子で記述され、左側は入力パラメータ（あれば）であり、右側は式です。

v2.5以降、StarRocksは以下のハイアーオーダーSQL関数でラムダ式の使用をサポートしています：[array_map()](./array-functions/array_map.md), [array_filter()](./array-functions/array_filter.md), [array_sum()](./array-functions/array_sum.md), および [array_sortby()](./array-functions/array_sortby.md)。

## 構文

```Haskell
parameter -> expression
```

## パラメータ

- `parameter`：ラムダ式の入力パラメータで、ゼロ個、あるいは複数個のパラメータを受け入れることができます。二つ以上の入力パラメータは括弧で括られます。

- `expression`：`parameter` を参照する単純な式です。式は入力パラメータに対して有効である必要があります。

## 戻り値

戻り値の型は `expression` の結果型によって決まります。

## 使用上の注意

ほとんどすべてのスカラ関数はラムダの本体で使用できます。ただし、いくつかの例外があります：

- サブクエリはサポートされません。たとえば、 `x -> 5 + (SELECT 3)` はサポートされません。
- 集約関数はサポートされません。たとえば、 `x -> min(y)` はサポートされません。
- ウィンドウ関数はサポートされません。
- テーブル関数はサポートされません。
- 相関列はラムダ関数には現れることができません。

## 例

ラムダ式の簡単な例：

```SQL
-- パラメータなしで5を返す。
() -> 5    
-- x を取り、(x + 2) の値を返す。
x -> x + 2 
-- x と y を取り、それらの合計を返す。
(x, y) -> x + y 
-- x を取り、x に関数を適用します。
x -> COALESCE(x, 0)
x -> day(x)
x -> split(x,",")
x -> if(x>0,"positive","negative")
```

ハイアーオーダー関数でラムダ式を使用する例：

```Haskell
select array_map((x, y, z) -> x + y, [1], [2], [4]);
+----------------------------------------------+
| array_map((x, y, z) -> x + y, [1], [2], [4]) |
+----------------------------------------------+
| [3]                                          |
+----------------------------------------------+
1 行が返されました (0.01 秒)
```