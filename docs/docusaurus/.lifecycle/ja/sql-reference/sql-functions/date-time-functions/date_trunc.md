---
displayed_sidebar: "Japanese"
---

# date_trunc

## 説明

指定された日付部分、たとえば年、日、時、または分に基づいて、時刻値を切り捨てます。

StarRocksでは、年、四半期、月、週、日、および時間の関数も提供されており、指定された日付部分を抽出するために使用できます。

## 構文

```Haskell
DATETIME date_trunc(VARCHAR fmt, DATETIME|DATE datetime)
```

## パラメーター

- `datetime`: 切り捨てる時刻。DATETIMEまたはDATEタイプである必要があります。日付と時刻は存在している必要があります。そうでない場合、NULLが返されます。たとえば、`2021-02-29 11:12:13`は日付として存在しないため、NULLが返されます。

- `fmt`: 日付部分、つまり`datetime`が切り捨てられる精度を示します。値はVARCHAR定数である必要があります。

  `fmt`は、次の表にリストされている値に設定する必要があります。値が正しくない場合、エラーが返されます。

  `datetime`がDATE値の場合、`fmt`は`year`、`quarter`、`month`、`week`、または`day`にのみ設定できます。それ以外の日付単位を設定した場合、たとえば`hour`、エラーが報告されます。Example 5を参照してください。

| 値      | 説明                                                         |
| ------- | ------------------------------------------------------------ |
| second  | 秒に切り捨てます。                                           |
| minute  | 分に切り捨てます。秒部分は0になります。                       |
| hour    | 時に切り捨てます。分および秒部分は0になります。               |
| day     | 日に切り捨てます。時刻部分は0になります。                     |
| week    | `datetime`が含まれる週の最初の日付に切り捨てます。時刻部分は0になります。 |
| month   | `datetime`が含まれる月の最初の日付に切り捨てます。時刻部分は0になります。 |
| quarter | `datetime`が含まれる四半期の最初の日付に切り捨てます。時刻部分は0になります。 |
| year    | `datetime`が含まれる年の最初の日付に切り捨てます。時刻部分は0になります。 |

## 戻り値

DATETIMEタイプの値を返します。

`datetime`がDATEタイプであり、`fmt`が`hour`、`minute`、または`second`に設定されている場合、返される値の時刻部分はデフォルトで`00:00:00`になります。

## 例

Example 1: 入力時刻を分単位で切り捨てます。

```Plain
select date_trunc("minute", "2020-11-04 11:12:13");
+---------------------------------------------+
| date_trunc('minute', '2020-11-04 11:12:13') |
+---------------------------------------------+
| 2020-11-04 11:12:00                         |
+---------------------------------------------+
```

Example 2: 入力時刻を時単位で切り捨てます。

```Plain
select date_trunc("hour", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('hour', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-11-04 11:00:00                       |
+-------------------------------------------+
```

Example 3: 入力時刻を週の最初の日付に切り捨てます。

```Plain
select date_trunc("week", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('week', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-11-02 00:00:00                       |
+-------------------------------------------+
```

Example 4: 入力時刻を年の最初の日付に切り捨てます。

```Plain
select date_trunc("year", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('year', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-01-01 00:00:00                       |
+-------------------------------------------+
```

Example 5: DATE値を時単位で切り捨てます。エラーが返されます。

```Plain
select date_trunc("hour", cast("2020-11-04" as date));

ERROR 1064 (HY000): Getting analyzing error from line 1, column 26 to line 1, column 51. Detail message: date_trunc function can't support argument other than year|quarter|month|week|day.
```