---
displayed_sidebar: "Japanese"
---

# to_binary

## 説明

指定されたバイナリ形式（`binary_type`）に基づいて、入力文字列のVARCHARをバイナリ値に変換します。以下のバイナリ形式がサポートされます：`hex`、`encode64`、および`utf8`。`binary_type`が指定されていない場合、`hex`がデフォルトです。

## 構文

```Haskell
to_binary(str[, binary_type])
```

## パラメータ

- `str`：変換する文字列、必須。VARCHAR文字列である必要があります。
- `binary_type`：変換のバイナリ形式、オプションです。

  - `hex`（デフォルト）：`to_binary`は、すべての文字が '0123456789abcdef' である16進文字列として入力を想定します。入力文字列が無効な場合、空のバイナリが返されます（例外はスローされません）。`to_binary`は、入力文字列を直接バイナリに変換します。例えば、`"abab"` は `x'abab'` に変換されます。入力文字列は大文字と小文字を区別しません。
  - `encode64`：`to_binary`は、入力文字列が base64でエンコードされた文字列と想定します。入力文字列が無効な場合、空のバイナリが返されます（例外はスローされません）。`to_binary`は、base64でエンコードされた文字列をバイナリ結果としてデコードします。例えば、`"YWJhYg=="` は `x'abab'` に変換されます。
  - `utf8`：`to_binary`は、変換なしで、入力文字列をバイナリ値に変換します。

## 戻り値

VARCHAR値を返します。

## 例

以下の例は、StarRocksにMySQLクライアントからアクセスする際に、`--binary-as-hex`オプションが有効になっていることを想定しています。これにより、バイナリデータは16進数表記で表示されます。

```Plain
mysql> select to_binary('ABAB', 'hex');
+----------------------------------------------------+
| to_binary('ABAB', 'hex')                           |
+----------------------------------------------------+
| 0xABAB                                             |
+----------------------------------------------------+
1 row in set (0.01 sec)

mysql> select to_binary('U1RBUlJPQ0tT', 'encode64');
+------------------------------------------------------------------------------+
| to_binary('U1RBUlJPQ0tT', 'encode64')                                        |
+------------------------------------------------------------------------------+
| 0x53544152524F434B53                                                         |
+------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> select to_binary('STARROCKS', 'utf8');
+----------------------------------------------------------------+
| to_binary('STARROCKS', 'utf8')                                 |
+----------------------------------------------------------------+
| 0x53544152524F434B53                                           |
+----------------------------------------------------------------+
1 row in set (0.00 sec)

-- 入力文字列がバイナリ形式に一致せず、空のバイナリが返されます。

mysql> select to_binary('U1RBUlJPQ0tT', 'hex');
+--------------------------------------------------------------------+
| to_binary('U1RBUlJPQ0tT', 'hex')                                   |
+--------------------------------------------------------------------+
| 0x                                                                 |
+--------------------------------------------------------------------+
1 row in set (0.00 sec)
```

## 参照

- [from_binary](from_binary.md)
- [BINARY/VARBINARY データ型](../../sql-statements/data-types/BINARY.md)