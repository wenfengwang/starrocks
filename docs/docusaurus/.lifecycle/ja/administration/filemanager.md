---
displayed_sidebar: "Japanese"
---

# ファイルマネージャ

ファイルマネージャを使用すると、外部データソースへのアクセスに使用されるファイルの作成、表示、削除などができます。これには、公開鍵ファイル、秘密鍵ファイル、証明書ファイルなどが含まれます。作成したファイルはコマンドを使用して参照またはアクセスできます。

## 基本的な概念

**ファイル**: StarRocksに作成および保存されるファイルを指します。ファイルがStarRocksに作成され、保存された後、StarRocksはファイルに固有の識別子を割り当てます。データベース名、カタログ、ファイル名に基づいてファイルを見つけることができます。データベース内で、管理者ユーザーのみがファイルを作成および削除でき、データベースへのアクセス権を持つすべてのユーザーがデータベースに属するファイルを使用できます。

## 開始する前に

- それぞれのFEについて、以下のパラメータを構成します。
  - `small_file_dir`: アップロードされたファイルが保存されるパス。デフォルトのパスは`small_files/`で、それはFEのランタイムディレクトリにあります。このパラメータを**fe.conf**ファイルで指定し、その後FEを再起動して変更を有効にする必要があります。
  - `max_small_file_size_bytes`: 単一ファイルの最大サイズ。このパラメータのデフォルト値は1 MBです。ファイルのサイズがこのパラメータの値を超えると、ファイルは作成できません。このパラメータは[ADMIN SET CONFIG](../sql-reference/sql-statements/Administration/ADMIN_SET_CONFIG.md)文を使用して指定できます。
  - `max_small_file_number`: クラスタ内で作成できるファイルの最大数。このパラメータのデフォルト値は100です。作成したファイルの数がこのパラメータの値に達すると、ファイルの作成を続行できません。このパラメータはADMIN SET CONFIG文を使用して指定できます。

> 注意: 2つのパラメータの値を増やすと、FEのメモリ使用量が増加します。そのため、必要がない限り、2つのパラメータの値を増やさないようお勧めします。

- それぞれのBEについて、以下のパラメータを構成します。

`small_file_dir`: ダウンロードされたファイルが保存されるパス。デフォルトのパスは`lib/small_files/`で、それはBEのランタイムディレクトリにあります。このパラメータは**be.conf**ファイルで指定できます。

## ファイルを作成する

ファイルを作成するには、CREATE FILE文を実行できます。詳細については、[CREATE FILE](../sql-reference/sql-statements/Administration/CREATE_FILE.md)を参照してください。ファイルが作成されると、ファイルはStarRocksにアップロードされ、永続化されます。

## ファイルを表示する

SHOW FILE文を実行して、データベースに保存されているファイルの情報を表示できます。詳細については、[SHOW FILE](../sql-reference/sql-statements/Administration/SHOW_FILE.md)を参照してください。

## ファイルを削除する

削除するには、DROP FILE文を実行できます。詳細については、[DROP FILE](../sql-reference/sql-statements/Administration/DROP_FILE.md)を参照してください。

## FEおよびBEがファイルを使用する方法

- **FE**: SmallFileMgrクラスは、指定されたディレクトリ内に関連するファイルのデータを保存します。その後、SmallFileMgrクラスは、FEがファイルを使用するためのローカルファイルパスを返します。
- **BE**: BEは、**/api/get_small_file API** (HTTP)を呼び出してファイルを指定されたディレクトリにダウンロードし、ファイルの情報を記録します。BEがファイルを使用するためのリクエストを行うと、BEはファイルがダウンロードされているかどうかを確認し、その後ファイルを検証します。ファイルが検証に合格した場合、ファイルのパスが返されます。ファイルが検証に合格しない場合、ファイルは削除され、FEから再度ダウンロードされます。BEが再起動すると、ダウンロードされたファイルがメモリにプリロードされます。