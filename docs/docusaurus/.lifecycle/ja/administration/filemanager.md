---
displayed_sidebar: "Japanese"
---

# ファイルマネージャ

ファイルマネージャを使用すると、外部データソースにアクセスするために使用されるファイル（公開鍵ファイル、秘密鍵ファイル、証明書ファイルなど）を作成、表示、削除することができます。作成したファイルはコマンドを使用して参照またはアクセスできます。

## 基本的な概念

**ファイル**: StarRocksに作成および保存されたファイルを指します。ファイルが作成され、StarRocksに保存されると、StarRocksはファイルに固有のIDを割り当てます。データベース名、カタログ、ファイル名に基づいてファイルを見つけることができます。データベースでは、管理者ユーザーのみがファイルを作成および削除でき、データベースにアクセス権限を持つすべてのユーザーがデータベースに属するファイルを使用できます。

## 開始する前に

- 各FEに対して次のパラメータを構成します。
  - `small_file_dir`: アップロードされたファイルが保存されるパス。デフォルトのパスは`small_files/`であり、FEのランタイムディレクトリにあります。このパラメータを**fe.conf**ファイルに指定し、その後FEを再起動して変更を有効にする必要があります。
  - `max_small_file_size_bytes`: 単一ファイルの最大サイズ。このパラメータのデフォルト値は1 MBです。ファイルのサイズがこのパラメータの値を超えると、ファイルは作成できません。このパラメータは[ADMIN SET CONFIG](../sql-reference/sql-statements/Administration/ADMIN_SET_CONFIG.md)ステートメントを使用して指定できます。
  - `max_small_file_number`: クラスタ内で作成できるファイルの最大数。このパラメータのデフォルト値は100です。作成したファイルの数がこのパラメータの値に達すると、ファイルの作成を続行できません。このパラメータはADMIN SET CONFIGステートメントを使用して指定できます。

> 注意: 2つのパラメータの値を増やすと、FEのメモリ使用量が増加します。したがって、必要がない限り、2つのパラメータの値を増やさないことをお勧めします。

- 各BEに対して次のパラメータを構成します。

`small_file_dir`: ダウンロードされたファイルが保存されるパス。デフォルトのパスは`lib/small_files/`であり、BEのランタイムディレクトリにあります。このパラメータを**be.conf**ファイルに指定できます。

## ファイルの作成

ファイルを作成するには、CREATE FILEステートメントを実行できます。詳細については[CREATE FILE](../sql-reference/sql-statements/Administration/CREATE_FILE.md)を参照してください。ファイルが作成されると、ファイルはStarRocksにアップロードされ、永続化されます。

## ファイルの表示

SHOW FILEステートメントを実行して、データベースに格納されているファイルの情報を表示できます。詳細については[SHOW FILE](../sql-reference/sql-statements/Administration/SHOW_FILE.md)を参照してください。

## ファイルの削除

ファイルを削除するには、DROP FILEステートメントを実行できます。詳細については[DROP FILE](../sql-reference/sql-statements/Administration/DROP_FILE.md)を参照してください。

## FEおよびBEのファイルの使用方法

- **FE**: SmallFileMgrクラスは、指定されたディレクトリのファイルに関連するデータを保持します。その後、SmallFileMgrクラスはFEがファイルを使用するためのローカルファイルパスを返します。
- **BE**: BEは**/api/get_small_file API** (HTTP)を呼び出して、ファイルを指定されたディレクトリにダウンロードし、ファイルの情報を記録します。BEがファイルを使用するよう要求すると、BEはファイルがダウンロードされているかどうかをチェックし、その後ファイルを検証します。ファイルが検証に合格すると、ファイルのパスが返されます。ファイルが検証に失敗すると、ファイルは削除され、FEから再度ダウンロードされます。BEが再起動すると、ダウンロードされたファイルがメモリにプリロードされます。