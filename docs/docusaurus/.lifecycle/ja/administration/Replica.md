---
displayed_sidebar: "Japanese"
---

# レプリカ管理

## 用語

* Tablet: テーブルの論理的なスライスで、1つのテーブルには複数のテーブルがあります。
* Replica: Tabletのコピーで、デフォルトで1つのテーブルあたり3つのレプリカがあります。
* Healthy Replica: バックエンドが稼働しており、バージョンが完全なレプリカ。
* TabletChecker（TC）: 定期的にすべてのTabletをスキャンし、その状態に基づいてTabletSchedulerにテーブルを送信するかどうかを決定するバックグラウンドスレッド。
* TabletScheduler（TS）: TabletCheckerによって送信されたテーブルを処理し、クラスターのレプリカのバランシングも行うバックグラウンドスレッド。
* TabletSchedCtx（TSC）: Tabletを選択すると、TCによってTSCとしてカプセル化され、TSに送信されます。
* Storage Medium: StarRocksはSSDおよびHDDを含むさまざまなストレージ媒体をサポートしており、異なるストレージ媒体に対してレプリカのスケジューリングが異なります。

## ステータス

### レプリカのステータス

レプリカの健康状態は次のとおりです。

* **BAD**

レプリカが破損しています。これには、ディスク障害、バグなどによるレプリカの復旧不能な損傷が含まれます。

* **VERSION_MISSING**

各バッチのインポートには1つのデータバージョンが対応しています。1つのレプリカには複数の連続したバージョンが表示されるはずです。インポートエラーのため、一部のレプリカには不完全なデータバージョンが含まれることがあります。

* **HEALTHY**

レプリカには正しいデータが含まれており、それが配置されているBEノードは通常状態であり（通常のハートビートを送信し、オフラインになるプロセスになっていない）、完全な状態です。

### Tabletのステータス

Tabletの健康状態は、そのすべてのレプリカの状態によって決定されます。

* **REPLICA_MISSING**

レプリカが見つかりません。つまり、残っているレプリカの数が期待されるレプリカの数よりも少ないです。

* **VERSION_INCOMPLETE**

残っているレプリカの数は期待される数以上ですが、健全なレプリカの数が期待される数よりも少ないです。

* **REPLICA_RELOCATING**

完全なバージョンを持つ残存レプリカの数が「レプリケーション数」と等しいですが、いくつかのレプリカが配置されているBEノードが利用できなくなっています（例：廃止された状態）。

* **REPLICA_MISSING_IN_CLUSTER**

複数のクラスターを使用する場合、健全なレプリカの数が期待よりも大きいか等しいですが、対応するクラスター内のレプリカの数が期待よりも少ないです。

* **REDUNDANT**

レプリカ冗長性。すべての健全なレプリカは対応するクラスターにありますが、冗長な利用できないレプリカのために期待される数よりも多くのレプリカがあります。

* **FORCE_REDUNDANT**

これは特別な状態です。これは、期待されるレプリカ数が利用可能なノード数以上であり、Tabletがレプリカが不足している状態が発生した場合にのみ発生します。この場合、新しいレプリカを作成するための利用可能なノードがあることを確保するために、まず1つのレプリカを削除する必要があります。

* **COLOCATE_MISMATCH**

コロケーション属性のためのTablet状態で、分割されたレプリカがコロケーショングループで指定された分布と一致しないことを示しています。

* **COLOCATE_REDUNDANT**

コロケーション属性のためのTablet状態で、コロケーションテーブルのレプリカが冗長であることを示しています。

* **HEALTHY**

健全なTablet。

## レプリカの修復

TabletCheckerは定期的にすべてのTabletの状態をチェックします。不健康なTabletは、スケジューリングおよび修復のためにTabletSchedulerに引き渡されます。修復は、BEでクローンタスクとして行われます。クローンタスクの生成はFEが担当します。

> 注1：レプリカの修復の主なアイデアは、まず目標値に達するために新しいレプリカを作成したりパッチを当てたりし、余分なレプリカを削除することです。
> 注2：クローンタスクは、リモートBEから宛先BEに対象データをコピーするタスクです。

異なる状態に対して、異なる方法で修復を行います。

1. REPLICA_MISSING/REPLICA_RELOCATING
   利用可能なBEノードを宛先BEとして選択します。健康なレプリカをソースとして選択します。クローンタスクはソースから宛先BEに完全なレプリカをコピーします。レプリカの補充では、ストレージ媒体に関係なく利用可能なBEノードが選択されます。
2. VERSION_INCOMPLETE
   比較的完全なレプリカを宛先として選択します。健康なレプリカをソースとして選択します。クローンタスクはソースから宛先に不足しているバージョンをコピーします。

3. REPLICA_MISSING_IN_CLUSTER
   この状態は`REPLICA_MISSING`と同様に処理されます。
4. REDUNDANT
  通常、レプリカの修復後には冗長なレプリカが存在します。冗長なレプリカを選択して削除します。冗長なレプリカの選択方法は次のとおりです：

   * レプリカの配置されたBEが既にオフライン状態である
   * レプリカが破損している
   * レプリカが接続されていないか、オフラインになるプロセスになっているBEノードに配置されている
   * レプリカがCLONE状態であり（クローンタスク実行中の中間的な状態）
   * レプリカに不足しているバージョンがある
   * レプリカが誤ったクラスターに配置されています
   * レプリカが配置されているBEノードに負荷がかかっています

5. FORCE_REDUNDANT
   Tabletには欠損したレプリカがありますが、新しいレプリカを作成するための利用可能なノードがありません。この場合、新しいレプリカを作成するためのノードを確保するために、まずレプリカを削除する必要があります。レプリカの削除順序は`REDUNDANT`と同じです。
6. COLOCATE_MISMATCH
   コロケーショングループで指定されたBEノードのうち1つを宛先ノードとして選択して、レプリカを補充します。
7. COLOCATE_REDUNDANT
   コロケーショングループで指定されていないBEノード上のレプリカを削除します。

StarRocksは、同じTabletのレプリカを同じホストの異なるBEに配置しないため、同じホストのすべてのBEが故障してもいくつかのレプリカが健全な状態で残ることを保証します。

## レプリカのスケジューリング

### スケジューリングの優先度

TabletSchedulerでスケジュール待ちのTabletには、状態に応じて異なる優先度が与えられます。優先度の高いTabletが最初にスケジュールされます。優先度レベルは次の通りです。

* VERY_HIGH

* `REDUNDANT`状態。冗長なレプリカを持つTabletは非常に高い優先度が与えられます。レプリカ冗長性は最も緊急な状態ではないですが、最も迅速に処理され、リソース（ディスクスペースなど）が解放されます。
* `FORCE_REDUNDANT`状態。上記と同じです。

* HIGH

* `REPLICA_MISSING`状態で、ほとんどのレプリカが不足しています（例：3つのうち2つのレプリカが不足している）
* `VERSION_INCOMPLETE`状態で、ほとんどのレプリカが不足しているバージョンがあります
* `COLOCATE_MISMATCH`状態。Colocationテーブルに関連するTabletはできるだけ早く修正されます。
* `COLOCATE_REDUNDANT`状態。

* NORMAL

* `REPLICA_MISSING`状態ですが、ほとんどのレプリカが残っています（例：3つのうち1つのレプリカが不足している）
* `VERSION_INCOMPLETE`状態ですが、ほとんどのレプリカが完全なバージョンを持っています
* `REPLICA_RELOCATING`状態で、ほとんどのレプリカが配置先を変更する必要があります（例：3つのうち2つがある状態）

* LOW

* `REPLICA_MISSING_IN_CLUSTER`状態
* `REPLICA_RELOCATING`状態ですが、ほとんどのレプリカが安定しています

### 手動で優先度を決定

システムは自動的にスケジューリングの優先度を決定します。ただし、特定のTabletをより速く修復したい場合があります。そのため、ユーザーが特定のテーブルまたはパーティションのTabletが最初に修復されるように指定できるコマンドを提供しています。

ADMIN REPAIR TABLE tbl [PARTITION (p1, p2, ...)] ;

このコマンドは、問題のあるTabletに`VERY_HIGH`優先度を与え、最初に修復されるようにTCに指示します。

> 注：このコマンドは成功した修復を保証するものではありませんし、TSのスケジューリングとともに優先度が変化します。リーダーFEが変更されたり再起動されたりすると、この情報は失われます。

優先度の設定を以下のコマンドで取り消すことができます。

ADMIN CANCEL REPAIR TABLE tbl [PARTITION (p1, p2, ...)] ;

### 優先度スケジューリング

優先度付けにより、深刻に損傷したTabletが最初に修復されることが保証されます。ただし、高優先度の修復タスクが続けて失敗すると、低優先度のタスクがスケジュールされないままになります。そのため、各タスクの状況に基づいて動的に優先度を調整し、すべてのタスクにスケジュールされる機会が得られるようにします。

* 5回連続でスケジューリングに失敗した場合（リソースを取得できない、適切なソースや宛先を見つけられないなど）、タスクは優先度が下げられます。
* タスクは30分間スケジュールされなかった場合、優先度が上げられます。
* 5分以内にタスクの優先度を2回調整することはできません。

最初の優先度レベルが重要であることを確保するため、`VERY_HIGH`タスクは最大で`NORMAL`に優先度を下げることができ、`LOW`タスクは最大で`HIGH`に優先度を上げることができます。優先度の調整は、ユーザーが手動で設定したタスクにも適用されます。

## レプリカのバランシング

StarRocksはクラスター内で自動的にレプリカのバランシングを行います。バランシングの主なアイデアは、低負荷ノードにレプリカを作成し、高負荷ノードからレプリカを削除することです。同じクラスター内の異なるBEノードには複数のストレージ媒体が存在する場合があります。バランシング後もTabletを元のストレージ媒体に保つために、BEノードはストレージ媒体に基づいて分割され、適切に負荷を分散します。

同様に、レプリカのバランシングにより、同じホストの異なるBEに同じTabletのレプリカが配置されることはありません。

### BEノードの負荷

{R}
```
ClusterLoadStatistics (CLS)は、クラスタ内の各バックエンドの負荷分散を表示し、`TabletScheduler`をトリガーしてクラスタをバランスさせます。現在、私たちは各バックエンドの `loadScore` を計算するために `**Disk Utilization**` と `**Number of Replicas**` を使用します。スコアが高いほど、BE上の負荷が重くなります。

`capacityCoefficient` と `replicaNumCoefficient` （合計が1）は、それぞれ `Disk Utilization` と `Number of Replicas` の重み付け係数です。 `capacityCoefficient` は実際のディスク使用量に応じて動的に調整されます。BEの全体的なディスク使用率が50%未満の場合、`capacityCoefficient` の値は0.5になります。ディスク使用率が75%を超える場合（FEの構成項目 `capacity_used_percent_high_water` で設定可能）、値は1になります。使用率が50%から75%の間の場合、重み付け係数は以下の式に基づいてスムーズに増加します。

`capacityCoefficient= 2 * ディスク使用率 - 0.5`

この重み付け係数により、ディスク使用量が高すぎる場合、このバックエンドの負荷スコアが高くなり、このBE上の負荷をできるだけ早く減らすようになっています。

TabletSchedulerはCLSを1分ごとに更新します。

### バランシングポリシー

TabletSchedulerは、各スケジューリングラウンドでLoadBalancerを介してバランシングの対象となる一定数の健全なタブレットを選択し、これらの候補スライスに基づいて将来のスケジューリングを調整します。

## リソース制御

レプリカ修復およびバランシングは、いずれもBE間のコピーによって行われます。同じBEで同時に行われるタスクが多すぎると、I/O圧力が増加します。そのため、StarRocksはスケジューリング中に各ノードで実行できるタスクの数を制御します。リソース制御の最小単位は、ディスク（つまり、`be.conf` で指定されたデータパス）です。デフォルトでは、レプリカ修復については各ディスクにつき2つのスロットが割り当てられます。クローンタスクは、元のディスクで1つのスロットを占有し、宛先で1つのスロットを占有します。ディスクにスロットがない場合、それ以上のタスクは割り当てられません。これらのスロットの数は、FEの `schedule_slot_num_per_path` パラメータで設定できます。

また、デフォルトでは、レプリカバランシングについても各ディスクに2つのスロットが割り当てられます。これは、負荷が高くなったノードが修復タスクに占拠され、バランシングを通じてスペースを解放できなくなるのを防ぐためです。

## レプリカステータスの表示

レプリカステータスは**リーダーFEノードのみに存在**します。そのため、以下のコマンドは、リーダーFEに直接接続して実行する必要があります。

### レプリカステータスの表示

1. グローバルステータスの確認  
   `SHOW PROC '/statistic';` コマンドを使用すると、クラスタ全体のレプリカステータスを表示できます。

   ```plaintext
   +----------+-----------------------------+----------+--------------+----------+-----------+------------+--------------------+-----------------------+
   | DbId     | DbName                      | TableNum | PartitionNum | IndexNum | TabletNum | ReplicaNum | UnhealthyTabletNum | InconsistentTabletNum |
   +----------+-----------------------------+----------+--------------+----------+-----------+------------+--------------------+-----------------------+
   | 35153636 | default_cluster:DF_Newrisk  | 3        | 3            | 3        | 96        | 288        | 0                  | 0                     |
   | 48297972 | default_cluster:PaperData   | 0        | 0            | 0        | 0         | 0          | 0                  | 0                     |
   | 5909381  | default_cluster:UM_TEST     | 7        | 7            | 10       | 320       | 960        | 1                  | 0                     |
   | Total    | 240                         | 10       | 10           | 13       | 416       | 1248       | 1                  | 0                     |
   +----------+-----------------------------+----------+--------------+----------+-----------+------------+--------------------+-----------------------+
   ```

   `UnhealthyTabletNum` 列は、対応するデータベース内に何個の不健康なタブレットがあるかを示します。`InconsistentTabletNum` 列は、対応するデータベース内のどれだけのタブレットがレプリカの一貫性がない状態にあるかを示します。最後の `Total` 行は、クラスタ全体の統計を示します。通常、`UnhealthyTabletNum` と `InconsistentTabletNum` はゼロである必要があります。ゼロでない場合は、タブレットの情報をさらにチェックできます。上記のように、`UM_TEST` データベースには不健康な状態のタブレットが1つあります。その場合は、次のコマンドを使用してどのタブレットかを確認できます。

   `SHOW PROC '/statistic/5909381';`  
   ここで `5909381` は対応するDbIdです。

   ```plaintext
   +------------------+---------------------+
   | UnhealthyTablets | InconsistentTablets |
   +------------------+---------------------+
   | [40467980]       | []                  |
   +------------------+---------------------+
   ```

   上記の結果は、特定の不健康なタブレットID（40467980）を示しています。次に、特定のタブレットの各レプリカの状態を確認する方法について説明します。

2. テーブル（パーティション）レベルの状態確認  
   ユーザーは、以下のコマンドを使用して特定のテーブルまたはパーティションのレプリカの状態を確認でき、WHERE文で状態をフィルタリングできます。たとえば、`tbl1` の `p1` と `p2` のNORMALレプリカの状態を表示するには次のコマンドを使用します。  
   `ADMIN SHOW REPLICA STATUS FROM tbl1 PARTITION (p1, p2) WHERE STATUS = "OK";`

   ```plaintext
   +----------+-----------+-----------+---------+-------------------+--------------------+------------------+------------+------------+-------+--------+--------+
   | TabletId | ReplicaId | BackendId | Version | LastFailedVersion | LastSuccessVersion | CommittedVersion | SchemaHash | VersionNum | IsBad | State  | Status |
   +----------+-----------+-----------+---------+-------------------+--------------------+------------------+------------+------------+-------+--------+--------+
   | 29502429 | 29502432  | 10006     | 2       | -1                | 2                  | 1                | -1         | 2          | false | NORMAL | OK     |
   | 29502429 | 36885996  | 10002     | 2       | -1                | -1                 | 1                | -1         | 2          | false | NORMAL | OK     |
   | 29502429 | 48100551  | 10007     | 2       | -1                | -1                 | 1                | -1         | 2          | false | NORMAL | OK     |
   | 29502433 | 29502434  | 10001     | 2       | -1                | 2                  | 1                | -1         | 2          | false | NORMAL | OK     |
   | 29502433 | 44900737  | 10004     | 2       | -1                | -1                 | 1                | -1         | 2          | false | NORMAL | OK     |
   | 29502433 | 48369135  | 10006     | 2       | -1                | -1                 | 1                | -1         | 2          | false | NORMAL | OK     |
   +----------+-----------+-----------+---------+-------------------+--------------------+------------------+------------+------------+-------+--------+--------+
   ```

   `IsBad = true` の場合、そのレプリカが破損していることを意味します。 `Status` 列には追加情報が表示されます。
   `ADMIN SHOW REPLICA STATUS` コマンドは、主にレプリカの健全性状態を表示するために使用されます。ユーザーは次のコマンドで追加情報を表示することもできます。  

   `SHOW TABLET FROM tbl1;`

   ```plaintext
   +----------+-----------+-----------+------------+---------+-------------+-------------------+-----------------------+------------------+----------------------+---------------+----------+----------+--------+-------------------------+--------------+----------------------+--------------+----------------------+----------------------+----------------------+----------------------+
   | TabletId | ReplicaId | BackendId | SchemaHash | Version | VersionHash | LstSuccessVersion | LstSuccessVersionHash | LstFailedVersion | LstFailedVersionHash | LstFailedTime | DataSize | RowCount | State  | LstConsistencyCheckTime | CheckVersion |     CheckVersionHash | VersionCount | PathHash             | MetaUrl              | CompactionStatus     |
   +----------+-----------+-----------+------------+---------+-------------+-------------------+-----------------------+------------------+----------------------+---------------+----------+----------+--------+-------------------------+--------------+----------------------+--------------+----------------------+----------------------+----------------------+
   | 29502429 | 29502432  | 10006     | 1421156361 | 2       | 0           | 2                 | 0                     | -1               | 0                    | N/A           | 784      | 0        | NORMAL | N/A                     | -1           |     -1               | 2            | -5822326203532286804 | url                  | url                  |
   | 29502429 | 36885996  | 10002     | 1421156361 | 2       | 0           | -1                | 0                     | -1               | 0                    | N/A           | 784      | 0        | NORMAL | N/A                     | -1           |     -1               | 2            | -1441285706148429853 | url                  | url                  |
   | 29502429 | 48100551  | 10007     | 1421156361 | 2       | 0           | -1                | 0                     | -1               | 0                    | N/A           | 784      | 0        | NORMAL | N/A                     | -1           |     -1               | 2            | -1441285706148429853 | url                  | url                  |
    | 29502429 | 48100551  | 10007     | 1421156361 | 2       | 0           | -1                | 0                     | -1               | 0                    | N/A           | 784      | 0        | NORMAL | N/A                     | -1           |     -1               | 2            | -4784691547051455525 | url                  | url                  |
    +----------+-----------+-----------+------------+---------+-------------+-------------------+-----------------------+------------------+----------------------+---------------+----------+----------+--------+-------------------------+--------------+----------------------+--------------+----------------------+----------------------+----------------------+
    ```

追加情報には、レプリカのサイズ、行数、バージョン数、データの配置パスなどが含まれています。

> 注意: `State`列はレプリカ自体の健全状態を表すものではなく、特定のタスク（例: `CLONE`、`SCHEMA_CHANGE`、`ROLLUP`など）の状態を表します。

さらに、ユーザーは以下のコマンドを使用してレプリカが均等に分散されているかどうかを確認できます  
`ADMIN SHOW REPLICA DISTRIBUTION FROM tbl1;`

  ```plaintext
  +-----------+------------+-------+---------+
  | BackendId | ReplicaNum | Graph | Percent |
  +-----------+------------+-------+---------+
  | 10000     | 7          |       | 7.29 %  |
  | 10001     | 9          |       | 9.38 %  |
  | 10002     | 7          |       | 7.29 %  |
  | 10003     | 7          |       | 7.29 %  |
  | 10004     | 9          |       | 9.38 %  |
  | 10005     | 11         | >     | 11.46 % |
  | 10006     | 18         | >     | 18.75 % |
  | 10007     | 15         | >     | 15.62 % |
  | 10008     | 13         | >     | 13.54 % |
  +-----------+------------+-------+---------+
  ```

情報には、各BEノード上のレプリカの数、パーセンテージ、シンプルなグラフィカル表示が含まれています。

Tabletレベルのステータスチェック  

ユーザーは特定のTabletのステータスをチェックするために以下のコマンドを使用できます。たとえば、IDが29502553のtabletのステータスをチェックするには  

`SHOW TABLET 29502553;`

  ```plaintext
  +------------------------+-----------+---------------+-----------+----------+----------+-------------+----------+--------+---------------------------------------------------------------------------+
  | DbName                 | TableName | PartitionName | IndexName | DbId     | TableId  | PartitionId | IndexId  | IsSync | DetailCmd                                                                 |
  +------------------------+-----------+---------------+-----------+----------+----------+-------------+----------+--------+---------------------------------------------------------------------------+
  | default_cluster:test   | test      | test          | test      | 29502391 | 29502428 | 29502427    | 29502428 | true   | SHOW PROC '/dbs/29502391/29502428/partitions/29502427/29502428/29502553'; |
  +------------------------+-----------+---------------+-----------+----------+----------+-------------+----------+--------+---------------------------------------------------------------------------+
  ```

上記は、tabletに対応するデータベース、テーブル、パーティション、インデックスなどの情報を示しています。ユーザーは`DetailCmd`のコマンドをコピーして詳細を確認できます。
    `SHOW PROC '/dbs/29502391/29502428/partitions/29502427/29502428/29502553';`

  ```plaintext
  +-----------+-----------+---------+-------------+-------------------+-----------------------+------------------+----------------------+---------------+------------+----------+----------+--------+-------+--------------+----------------------+----------+------------------+
  | ReplicaId | BackendId | Version | VersionHash | LstSuccessVersion | LstSuccessVersionHash | LstFailedVersion | LstFailedVersionHash | LstFailedTime | SchemaHash | DataSize | RowCount | State  | IsBad | VersionCount | PathHash             | MetaUrl  | CompactionStatus |
  +-----------+-----------+---------+-------------+-------------------+-----------------------+------------------+----------------------+---------------+------------+----------+----------+--------+-------+--------------+----------------------+----------+------------------+
  | 43734060  | 10004     | 2       | 0           | -1                | 0                     | -1               | 0                    | N/A           | -1         | 784      | 0        | NORMAL | false | 2            | -8566523878520798656 | url      | url              |
  | 29502555  | 10002     | 2       | 0           | 2                 | 0                     | -1               | 0                    | N/A           | -1         | 784      | 0        | NORMAL | false | 2            | 1885826196444191611  | url      | url              |
  | 39279319  | 10007     | 2       | 0           | -1                | 0                     | -1               | 0                    | N/A           | -1         | 784      | 0        | NORMAL | false | 2            | 1656508631294397870  | url      | url              |
  +-----------+-----------+---------+-------------+-------------------+-----------------------+------------------+----------------------+---------------+------------+----------+----------+--------+-------+--------------+----------------------+----------+------------------+
  ```

上記は、対応するTabletのすべてのレプリカを示しています。ここで表示される内容は`SHOW TABLET FROM tbl1;`と同じです。しかし、ここでは特定のTabletのすべてのレプリカのステータスを明確に確認できます。

### レプリカのスケジューリングタスク

1.  `SHOW PROC '/cluster_balance/pending_tablets';`を使用してスケジュール待ちのタスクを表示します。

     ```plaintext
     +----------+--------+-----------------+---------+----------+----------+-------+---------+--------+----------+---------+---------------------+---------------------+---------------------+----------+------+-------------+---------------+---------------------+------------+---------------------+--------+---------------------+-------------------------------+
     | TabletId | Type   | Status          | State   | OrigPrio | DynmPrio | SrcBe | SrcPath | DestBe | DestPath | Timeout | Create              | LstSched            | LstVisit            | Finished | Rate | FailedSched | FailedRunning | LstAdjPrio          | VisibleVer | VisibleVerHash      | CmtVer | CmtVerHash          | ErrMsg                        |
     +----------+--------+-----------------+---------+----------+----------+-------+---------+--------+----------+---------+---------------------+---------------------+---------------------+----------+------+-------------+---------------+---------------------+------------+---------------------+--------+---------------------+-------------------------------+
     | 4203036  | REPAIR | REPLICA_MISSING | PENDING | HIGH     | LOW      | -1    | -1      | -1     | -1       | 0       | 2019-02-21 15:00:20 | 2019-02-24 11:18:41 | 2019-02-24 11:18:41 | N/A      | N/A  | 2           | 0             | 2019-02-21 15:00:43 | 1          | 0                   | 2      | 0                   | unable to find source replica |
     +----------+--------+-----------------+---------+----------+----------+-------+---------+--------+----------+---------+---------------------+---------------------+---------------------+----------+------+-------------+---------------+---------------------+------------+---------------------+--------+---------------------+-------------------------------+
     ```

      |   Field   | Description   |
      |-----------|---------------|
      | TabletId  | スケジューリング待ちのtabletのID。 |
      | Type      | タスクの種類、REPAIRまたはBALANCE。 |
      |  Status   | Tableの現在のステータス、例: `REPLICA_MISSING`。 |
      |  State    |  スケジューリングタスクの状態。値: `PENDING`/`RUNNING`/`FINISHED`/`CANCELLED`/`TIMEOUT`/`UNEXPECTED` |
      | OrigPrio  | 初期優先度。 |
      | DynmPrio  | 動的優先度。 |
      | SrcBe     | ソースBEノードのID。|
      | SrcPath   |  ソースBEノードのパス。|
      |  DestBe   | 宛先BEノードのID。|
      | DestPath  |  宛先BEノードのパス。|
      | Timeout   | タスクが正常にスケジュールされた場合、ここにタスクのタイムアウトが秒単位で表示されます。|
      | Create    | タスクが作成された時間。|
      | LstSched  | タスクが最後にスケジュールされた時間。|
      | LstVisit   | タスクが最後にアクセスされた時間。"アクセス"とは、スケジューリング、タスク実行の報告を指します。|
      | Finished  | タスクが終了した時間。|
      | Rate   |クローンタスクのデータコピー速度|
      | FailedSched |  タスクスケジューリングが失敗した回数|
      | FailedRunning| タスクが実行に失敗した回数|
      | LstAdjPrio | タスクの優先度が最後に調整された時刻 |
      | CmtVer/CmtVerHash/VisibleVer/VisibleVerHash| クローンタスクを実行するために使用されるバージョン情報 |
      | ErrMsg | タスクがスケジュールされて実行された時のエラーメッセージ|

2. `SHOW PROC '/cluster_balance/running_tablets';` を使用して実行中のタスクを表示します。
   同じプロパティがここで使用されます。詳細は `pending tablets` を参照してください。

3. `SHOW PROC '/cluster_balance/history_tablets';` を使用して完了したタスクを表示します。
   デフォルトでは、最後の1000件の完了したタスクのみが保持されます。同じプロパティがここで使用されます。詳細は `pending tablets` を参照してください。`State` が `FINISHED` の場合、タスクは正常に完了したことを意味します。それ以外の場合は、失敗したタスクの理由を調べるために `ErrMsg` を確認してください。