---
displayed_sidebar: "Japanese"
---

# タイムゾーンの設定

このトピックでは、タイムゾーンの設定方法とその設定の影響について説明します。

## セッションレベルのタイムゾーンまたはグローバルタイムゾーンの設定

`time_zone` パラメータを使用して、StarRocksクラスターのセッションレベルのタイムゾーンまたはグローバルタイムゾーンを設定することができます。

- セッションレベルのタイムゾーンを設定するには、`SET time_zone = 'xxx';` コマンドを実行します。異なるセッションごとに異なるタイムゾーンを設定することができます。FEとの接続が切断された場合、タイムゾーンの設定は無効になります。
- グローバルタイムゾーンを設定するには、`SET global time_zone = 'xxx';` コマンドを実行します。タイムゾーンの設定はFEに永続化され、FEとの接続が切断された場合でも有効です。

> **注意**
>
> StarRocksにデータをロードする前に、StarRocksクラスターのグローバルタイムゾーンを `system_time_zone` パラメータの値と同じ値に変更してください。そうしないと、データのロード後に DATE 型のデータが正しくありません。 `system_time_zone` パラメータは、FEをホストするマシンのタイムゾーンを参照します。マシンが起動されると、その時点のマシンのタイムゾーンがこのパラメータの値として記録されます。このパラメータは手動で設定することはできません。

### タイムゾーンの形式

`time_zone` パラメータの値は大文字と小文字を区別しません。パラメータの値は、次の形式のいずれかであることができます。

| **形式**       | **例**                                                       |
| -------------- | ------------------------------------------------------------ |
| UTC オフセット | `SET time_zone = '+10:00';` `SET global time_zone = '-6:00';` |
| タイムゾーン名 | `SET time_zone = 'Asia/Shanghai';` `SET global time_zone = 'America/Los_Angeles';` |

タイムゾーンの形式の詳細については、[tzデータベースのタイムゾーン一覧](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)を参照してください。

> **注意**
>
> CST を除いて、タイムゾーンの略語はサポートされていません。`time_zone` の値を `CST` に設定した場合、StarRocks は `CST` を `Asia/Shanghai` に変換します。

### デフォルトのタイムゾーン

`time_zone` パラメータのデフォルト値は `Asia/Shanghai` です。

## タイムゾーン設定の表示

タイムゾーンの設定を表示するには、次のコマンドを実行します。

```plaintext
 SHOW VARIABLES LIKE '%time_zone%';
```

## タイムゾーン設定の影響

- タイムゾーンの設定は、SHOW LOAD および SHOW BACKENDS 文で返される時刻値に影響します。ただし、指定された分割列の値が DATE 型または DATETIME 型であるときの CREATE TABLE 文の `LESS THAN` 句で指定された値には影響しません。この設定はまた、DATE 型および DATETIME 型のデータには影響しません。
- タイムゾーンの設定は、以下の関数の表示および保存に影響します。
  - **from_unixtime**: 指定されたUTCタイムスタンプに基づいて指定されたタイムゾーンの日付と時刻を返します。たとえば、StarRocksクラスターのグローバルタイムゾーンが `Asia/Shanghai` の場合、`select FROM_UNIXTIME(0);` は `1970-01-01 08:00:00` を返します。
  - **unix_timestamp**: 指定されたタイムゾーンの日付と時刻に基づいてUTCタイムスタンプを返します。たとえば、StarRocksクラスターのグローバルタイムゾーンが `Asia/Shanghai` の場合、`select UNIX_TIMESTAMP('1970-01-01 08:00:00');` は `0` を返します。
  - **curtime**: 指定されたタイムゾーンの現在時刻を返します。たとえば、指定されたタイムゾーンの現在時刻が16:34:05の場合、`select CURTIME();` は `16:34:05` を返します。
  - **now**: 指定されたタイムゾーンの現在の日付と時刻を返します。たとえば、指定されたタイムゾーンの現在の日付と時刻が2021-02-11 16:34:13の場合、`select NOW();` は `2021-02-11 16:34:13` を返します。
  - **convert_tz**: 日付と時刻をあるタイムゾーンから別のタイムゾーンに変換します。たとえば、`select CONVERT_TZ('2021-08-01 11:11:11', 'Asia/Shanghai', 'America/Los_Angeles');` は `2021-07-31 20:11:11` を返します。