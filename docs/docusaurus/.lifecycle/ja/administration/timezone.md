```yaml
    displayed_sidebar: "English"
```

# タイムゾーンの構成

このトピックでは、タイムゾーンの構成方法とその設定の影響について説明します。

## セッションレベルのタイムゾーンまたはグローバルタイムゾーンの構成

`time_zone`パラメータを使用して、StarRocksクラスタにセッションレベルのタイムゾーンまたはグローバルタイムゾーンを構成できます。

- セッションレベルのタイムゾーンを構成するには、`SET time_zone = 'xxx';`コマンドを実行します。異なるセッションに異なるタイムゾーンを構成できます。FEとの接続が切断された場合、タイムゾーン設定は無効になります。
- グローバルタイムゾーンを構成するには、`SET global time_zone = 'xxx';`コマンドを実行します。タイムゾーン設定はFEに永続化され、FEとの接続が切断されても有効です。

> **注記**
>
> StarRocksにデータをロードする前に、StarRocksクラスタのグローバルタイムゾーンを`system_time_zone`パラメータの値に一致させてください。そうしないと、データのロード後、DATE型のデータが正しくなくなります。`system_time_zone`パラメータは、FEをホストするマシンのタイムゾーンを指します。マシンが起動すると、そのマシンのタイムゾーンがこのパラメータの値として記録されます。このパラメータは手動で構成することはできません。

### タイムゾーンの形式

`time_zone`パラメータの値は大文字と小文字を区別しません。パラメータの値は次のいずれかの形式であることができます。

| **形式**        | **例**                                                      |
| -------------- | ------------------------------------------------------------ |
| UTCオフセット    | `SET time_zone = '+10:00';` `SET global time_zone = '-6:00';` |
| タイムゾーン名   | `SET time_zone = 'Asia/Shanghai';` `SET global time_zone = 'America/Los_Angeles';` |

タイムゾーンの形式に関する詳細情報については、[tzデータベースのタイムゾーンのリスト](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)を参照してください。

> **注記**
>
> `CST`以外のタイムゾーンの略称はサポートされていません。`time_zone`の値を`CST`に設定すると、StarRocksは`CST`を`Asia/Shanghai`に変換します。

### デフォルトのタイムゾーン

`time_zone`パラメータのデフォルト値は`Asia/Shanghai`です。

## タイムゾーン設定の表示

タイムゾーン設定を表示するには、次のコマンドを実行します。

```plaintext
SHOW VARIABLES LIKE '%time_zone%';
```

## タイムゾーン設定の影響

- タイムゾーンの設定は、SHOW LOADおよびSHOW BACKENDSステートメントによって返される時刻値に影響します。ただし、パーティショニングされた列がDATE型またはDATETIME型であるときのCREATE TABLEステートメントで指定された`LESS THAN`句で指定された値には影響しません。また、DATE型およびDATETIME型のデータにも影響しません。
- タイムゾーンの設定は、以下の関数の表示および格納に影響します:
  - **from_unixtime**: 指定されたUTCタイムスタンプに基づいて指定されたタイムゾーンの日付および時刻を返します。たとえば、StarRocksクラスタのグローバルタイムゾーンが`Asia/Shanghai`である場合、`select FROM_UNIXTIME(0);`によって`1970-01-01 08:00:00`が返されます。
  - **unix_timestamp**: 指定されたタイムゾーンの日付および時刻に基づいてUTCタイムスタンプを返します。たとえば、StarRocksクラスタのグローバルタイムゾーンが`Asia/Shanghai`である場合、`select UNIX_TIMESTAMP('1970-01-01 08:00:00');`によって`0`が返されます。
  - **curtime**: 指定されたタイムゾーンの現在時刻を返します。たとえば、指定されたタイムゾーンの現在時刻が16:34:05の場合、`select CURTIME();`によって`16:34:05`が返されます。
  - **now**: 指定されたタイムゾーンの現在の日付および時刻を返します。たとえば、指定されたタイムゾーンの現在の日付および時刻が2021-02-11 16:34:13の場合、`select NOW();`によって`2021-02-11 16:34:13`が返されます。
  - **convert_tz**: 日付および時刻を一つのタイムゾーンから別のタイムゾーンに変換します。たとえば、`select CONVERT_TZ('2021-08-01 11:11:11', 'Asia/Shanghai', 'America/Los_Angeles');`によって`2021-07-31 20:11:11`が返されます。
```