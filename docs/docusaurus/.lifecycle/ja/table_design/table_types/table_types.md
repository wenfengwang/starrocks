---
displayed_sidebar: "Japanese"
---

# テーブル種類の概要

テーブルは、テーブルの作成時に一つ以上の列をソートキーとして指定する必要があります。これにより、作成したテーブルに初めてデータがロードされると、StarRocksはソートキーに基づいてデータをソート、処理、保存します。このトピックでは、StarRocksが提供するさまざまなビジネス要件に対応するためのテーブル種類について説明します。

## 基本的な概念

### テーブルの種類

StarRocksは、4つのテーブルの種類を提供します：重複キー・テーブル、集約テーブル、ユニークキー・テーブル、および主キー・テーブル。これら4つのテーブルの種類は、ログ分析、データの集約と分析、リアルタイムデータ解析など、さまざまなデータ分析シナリオに適しています。

### ソートキー

特定のテーブル種類を使用して作成されたテーブルにデータがロードされると、データは、テーブル作成時にソートキーとして定義された1つ以上の列に基づいてソートおよび保存されます。ソートキーは通常、クエリのフィルタ条件として頻繁に使用される1つ以上の列であり、それによりクエリが高速化されます。

- 重複キー・テーブルでは、`DUPLICATE KEY`で指定されたソートキーはデータをソートして保存され、UNIQUE制約は割り当てられません。
- 集約テーブルでは、`AGGREGATE KEY`で指定されたソートキーはデータをソートして保存され、UNIQUE制約が割り当てられます。
- ユニークキー・テーブルでは、`UNIQUE KEY`で指定されたソートキーはデータをソートして保存され、UNIQUE制約が割り当てられます。
- 主キー・テーブルでは、主キーとソートキーが切り離されています。`PRIMARY KEY`で指定された主キーには、UNIQUEおよびNOT NULL制約が割り当てられます。`ORDER BY`で指定されたソートキーは、データをソートするために使用されます。

> **注記**
>
> - v3.0より前のバージョンでは、主キー・テーブルでは、主キーとソートキーを別々に定義することはサポートされていません。
> - ソートキーの詳細については、[ソートキーとプレフィックスインデックス](../Sort_key.md)を参照してください。

## 注意事項

- ソートキー列は、テーブル作成の文において他の列よりも先に定義する必要があります。
- テーブル作成の文におけるソートキー列の順序は、テーブル内の行がソートされる条件の順序を指定します。
- テーブルのプレフィックスインデックスの長さは36バイトに制限されています。ソートキー列の合計長が36バイトを超える場合、StarRocksはプレフィックスインデックスの長さ制限内で最初のいくつかのソートキー列のみを保存します。
- テーブルにロードされるレコードの主キーが同じ場合、StarRocksは次のようにレコードを処理および保存します：
  - 重複キー・テーブル

    StarRocksは、各レコードを別々の行としてテーブルにロードします。データのロードが完了した後、テーブルには同じ主キーを持つ行が含まれ、行はソースレコードを一対一の関係でマッピングします。過去のすべてのデータをリコールできます。

  - 集約テーブル

    StarRocksは、レコードを1つのレコードに集約し、集約されたレコードを行としてテーブルにロードします。ロードが完了するとテーブルには同じ主キーを持つ行が含まれません。ロードしたすべての過去データの集計結果をリコールすることができますが、過去のすべてのデータをリコールすることはできません。

  - ユニークキー・テーブルと主キー・テーブル

    StarRocksは、新しくロードされた各レコードを以前にロードされたレコードと置換し、最も最近にロードされたレコードのみを行としてテーブルに保持します。ロードが完了するとテーブルには同じ主キーを持つ行が含まれません。ユニークキー・テーブルと主キー・テーブルは、同じ主キーを持つレコード群の中で最新のレコードを返すメトリック列にREPLACE集約関数が指定された特別な集約テーブルと見なすことができます。