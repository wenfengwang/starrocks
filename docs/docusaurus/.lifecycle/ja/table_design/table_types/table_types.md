---
displayed_sidebar: "Japanese"
---

# テーブルタイプの概要

テーブルを作成する際に、テーブルの種類を指定し、1つまたは複数の列をソートキーとして定義する必要があります。これにより、作成したテーブルに最初にデータをロードする際に、StarRocksはソートキーに基づいてデータをソートし、処理し、保存することができます。このトピックでは、StarRocksが提供するさまざまなビジネス要件に適したテーブルの種類について説明します。

## 基本概念

### テーブルの種類

StarRocksは、次の4つのテーブルの種類を提供しています：重複キー テーブル（Duplicate Key table）、集約テーブル（Aggregate table）、ユニークキー テーブル（Unique Key table）、およびプライマリキー テーブル（Primary Key table）。これら4つのテーブルの種類は、ログ解析、データの集約と解析、およびリアルタイムデータの解析など、さまざまなデータ分析シナリオに最適です。

### ソートキー

特定のテーブルの種類を使用して作成されたテーブルにデータがロードされると、データは、テーブル作成時にソートキーとして定義された1つまたは複数の列に従ってソートされて保存されます。ソートキーは通常、クエリのフィルタ条件として頻繁に使用される1つまたは複数の列であり、それによってクエリを加速させることができます。

重複キー テーブルでは、「DUPLICATE KEY」によって指定されたソートキーがデータをソートして保存され、一意制約は割り当てられません。
集約テーブルでは、「AGGREGATE KEY」によって指定されたソートキーがデータをソートして保存され、一意制約が割り当てられます。
ユニークキー テーブルでは、「UNIQUE KEY」によって指定されたソートキーがデータをソートして保存され、一意制約が割り当てられます。
プライマリキー テーブルでは、主キーとソートキーが切り離されます。つまり、ソートキーは「ORDER BY」で指定され、データのソーティングに使用されます。「PRIMARY KEY」によって指定された主キーには、一意制約およびNOT NULL制約が割り当てられます。

> **注記**
>
> - v3.0より前のバージョンでは、プライマリキー テーブルは主キーとソートキーを別々に定義することをサポートしていません。
> - ソートキーの詳細については、[ソートキーとプレフィックスインデックス](../Sort_key.md)を参照してください。

## 注意事項

- ソートキー列は、テーブルの作成ステートメント内で他の列よりも前に定義する必要があります。

- テーブルの作成ステートメント内でのソートキー列の順序は、テーブルの行がソートされる条件の順序を指定します。

- テーブルの接頭辞インデックスの長さは36バイトに制限されています。ソートキー列のトータル長が36バイトを超える場合、StarRocksはプレフィックスインデックスの長さ制限内に最初のいくつかのソートキー列のみを保存します。

- テーブルにロードされるレコードが同じ主キーを持つ場合、StarRocksはテーブルの種類に基づいてレコードを処理および保存します：
  - 重複キー テーブル：

    StarRocksはそれぞれのレコードを別々の行としてテーブルにロードします。データのロードが完了した後、テーブルには同じ主キーを持つ行が含まれ、行はソースレコードとの1対1の関係を持ちます。従って、ロードしたすべての過去のデータを呼び出すことができます。

  - 集約テーブル：

    StarRocksはレコードを1つに集約し、集約されたレコードをテーブルに行としてロードします。ロードが完了した後、テーブルには同じ主キーを持つ行が含まれていません。したがって、すべての過去のデータの集約結果を呼び出すことができます。ただし、すべての過去のデータを呼び出すことはできません。

  - ユニークキー テーブル および プライマリキー テーブル：

    StarRocksは、新たにロードされたレコードを以前にロードされたレコードで置き換え、最も最近のロードされたレコードのみをテーブルに行として保持します。ロードが完了した後、テーブルには同じ主キーを持つ行が含まれていません。ユニークキー テーブル および プライマリキー テーブルは、同じ主キーを持つ複数のレコードの中から最新のレコードを返すために、メトリクス列に対してREPLACE 集約関数が指定された特別な集約テーブルと考えることができます。
