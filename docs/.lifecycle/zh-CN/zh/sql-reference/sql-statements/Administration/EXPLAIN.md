---
displayed_sidebar: "汉语"
---

# 解释

## 功能

展示输入查询语句的逻辑或物理执行计划。

## 语法

```SQL
EXPLAIN <query>
```

## 参数说明

| **参数** | **说明**                                                 |
| -------- | -------------------------------------------------------- |
| query    | 需要查看执行计划的查询语句。                              |

## 返回

返回输入查询语句的执行计划。

| **返回**       | **说明**               |
| -------------- | ---------------------- |
| avgRowSize     | 扫描数据行的平均大小。   |
| cardinality    | 扫描表的数据总行数。     |
| colocate       | 是否为 Colocate 表。     |
| numNodes       | 待扫描的节点数。         |
| rollup         | 使用的同步物化视图。     |
| preaggregation | 预聚合的状态。           |
| predicates     | 查询中使用的谓词。       |

## 示例

```Plain
mysql> EXPLAIN select count(*)
from store_sales, 
    household_demographics, 
    time_dim, 
    store
where ss_sold_time_sk = time_dim.t_time_sk
    and ss_hdemo_sk = household_demographics.hd_demo_sk
    and ss_store_sk = s_store_sk
    and time_dim.t_hour = 8
    and time_dim.t_minute >= 30
    and household_demographics.hd_dep_count = 5
    and store.s_store_name = 'ese'
order by count(*) limit 100;

+------------------------------------------------------------------------------+
| 解释字符串                                                               |
+------------------------------------------------------------------------------+
| 计划片段 0                                                              |
|  输出表达式:<槽 11>                                                      |
|   分区: 未分区                                                           |
|   结果汇总器                                                              |
|   12:合并交换                                                             |
|      限制: 100                                                            |
|      元组 id: 5                                                           |
|                                                                            |
| 计划片段 1                                                              |
|  输出表达式:                                                             |
|   分区: 随机                                                             |
|   流数据汇总器                                                           |
|     交换号: 12                                                            |
|     未分区                                                               |
|                                                                            |
|   8:前 N 排序                                                             |
|   |  按: <槽 11> 升序排序                                                |
|   |  偏移量: 0                                                           |
|   |  限制: 100                                                            |
|   |  元组 id: 5                                                           |
|   |                                                                        |
|   7:聚合 (更新最终计算)                                                  |
|   |  输出: count(*)                                                       |
|   |  分组依据:                                                         |
|   |  元组 id: 4                                                           |
|   |                                                                        |
|   6:哈希连接                                                              |
|   |  连接操作: 内连接 (广播)                                              |
|   |  哈希谓词:                                                           |
|   |  是否 Colocate: 否，原因: 左侧哈希连接节点不支持 colocation           |
|   |  等值连接内涵: `ss_store_sk` = `s_store_sk`                           |
|   |  元组 id: 0 2 1 3                                                     |
|   |                                                                        |
|   |----11:交换                                                             |
|   |       元组 id: 3                                                       |
|   |                                                                        |
|   4:哈希连接                                                              |
|   |  连接操作: 内连接 (广播)                                              |
|   |  哈希谓词:                                                           |
|   |  是否 Colocate: 否，原因: 左侧哈希连接节点不支持 colocation           |
|   |  等值连接内涵: `ss_hdemo_sk`=`household_demographics`.`hd_demo_sk`     |
|   |  元组 id: 0 2 1                                                       |
|   |                                                                        |
|   |----10:交换                                                             |
|   |       元组 id: 1                                                       |
|   |                                                                        |
|   2:哈希连接                                                              |
|   |  连接操作: 内连接 (广播)                                              |
|   |  哈希谓词:                                                           |
|   |  是否 Colocate: 否，原因: 表不在同一组                                 |
|   |  等值连接内涵: `ss_sold_time_sk` = `time_dim`.`t_time_sk`              |
|   |  元组 id: 0 2                                                         |
|   |                                                                        |
|   |----9:交换                                                              |
|   |       元组 id: 2                                                       |
|   |                                                                        |
|   0:Olap扫描节点                                                          |
|      表: store_sales                                                       |
|      预聚合: 关闭。原因: `ss_sold_time_sk` 是值列                          |
|      分区=1/1                                                             |
|      同步物化视图: store_sales                                             |
|      平板电脑比率=0/0                                                      |
|      平板电脑列表=                                                        |
|      总行数=-1                                                            |
|      平均行大小=0.0                                                       |
|      节点数=0                                                             |
|      元组 id: 0                                                           |
|                                                                            |
| 计划片段 2                                                              |
|  输出表达式:                                                             |
|   分区: 随机                                                             |
|                                                                            |
|   流数据汇总器                                                           |
|     交换号: 11                                                            |
|     未分区                                                               |
|                                                                            |
|   5:Olap扫描节点                                                          |
|      表: 商店                                                             |
|      预聚合: 关闭。原因: 空                                                |
|      谓词: `store`.`s_store_name` = 'ese'                                 |
|      分区=1/1                                                             |
|      同步物化视图: 商店                                                     |
|      平板电脑比率=0/0                                                      |
|      平板电脑列表=                                                        |
|      总行数=-1                                                            |
|      平均行大小=0.0                                                       |
|      节点数=0                                                             |
|      元组 id: 3                                                           |
|                                                                            |
| 计划片段 3                                                              |
|  输出表达式:                                                             |
|   分区: 随机                                                             |
|   流数据汇总器                                                           |
|     交换号: 10                                                            |
|     未分区                                                               |
|                                                                            |
|   3:Olap扫描节点                                                          |
|      表: 家庭人口特征                                                      |
|      预聚合: 关闭。原因: 空                                                |
|      谓词: `household_demographics`.`hd_dep_count` = 5                     |
|      分区=1/1                                                             |
|      同步物化视图: 家庭人口特征                                             |
|      平板电脑比率=0/0                                                      |
|      平板电脑列表=                                                        |
|      总行数=-1                                                            |
|      平均行大小=0.0                                                       |
|      节点数=0                                                             |
|      元组 id: 1                                                           |
|                                                                            |
| 计划片段 4                                                              |
|  输出表达式:                                                             |
|   分区: 随机                                                             |
|   流数据汇总器                                                           |
|     交换号: 09                                                            |
|     未分区                                                               |
|                                                                            |
|   1:Olap扫描节点                                                          |
|      表: 时间维度                                                          |
|      预聚合: 关闭。原因: 空                                                |
|      谓词: `time_dim`.`t_hour` = 8, `time_dim`.`t_minute` >= 30            |
|      分区=1/1                                                             |
|      同步物化视图: 时间维度                                                 |
|      平板电脑比率=0/0                                                      |
|      平板电脑列表=                                                        |
|      总行数=-1                                                            |
|      平均行大小=0.0                                                       |
|      节点数=0                                                             |
|      元组 id: 2                                                           |
+------------------------------------------------------------------------------+
128 行在集合里 (0.02 秒)
```