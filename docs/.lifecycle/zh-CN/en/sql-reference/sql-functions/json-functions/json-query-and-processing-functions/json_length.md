```yaml
---
displayed_sidebar: "Chinese"
---

# json_length

## 描述

 返回JSON文档的长度。如果指定路径，则此函数将返回路径标识的值的长度。

根据以下规则确定文档的长度：

- 标量值的长度为1。例如，`1`、`"a"`、`true`、`false`和`null`的长度为1。

- 数组的长度为数组元素的数量。例如，`[1, 2]`的长度为2。

- 对象的长度为对象成员的数量。例如，`{"a": 1}`的长度为1。

- 不计算嵌套数组或对象的长度。例如，`{"a": [1, 2]}`的长度为1，因为嵌套的数组`[1, 2]`没有计算在内。

## 语法

```Haskell
json_length(json_doc[, path])
```

## 参数

`json_doc`：必选，要返回长度的JSON文档。

`path`：可选。用于返回文档中值的长度。路径通常以`$`开头，并使用`.`作为路径分隔符。`[]`用作数组下标，从0开始。

## 返回值

返回`INT`类型的值。

如果JSON文档不是有效文档，则返回错误。

在以下任何一种情况下返回0：

- **`path`**未标识文档中的值。

- 路径不是有效的路径表达式。

- 路径包含通配符`*`或`**`。

## 示例

示例1：返回标量值的长度。

```Plain
select json_length('1');
+------------------+
| json_length('1') |
+------------------+
|                1 |
+------------------+
```

示例2：返回空对象的长度。

```Plain
select json_length('{}');
+-------------------+
| json_length('{}') |
+-------------------+
|                 0 |
+-------------------+
```

示例3：返回具有数据的对象的长度。

```Plain
select json_length('{"Name": "Homer"}');
+----------------------------------+
| json_length('{"Name": "Homer"}') |
+----------------------------------+
|                                1 |
+----------------------------------+
```

示例4：返回JSON数组的长度。

```plain text
select json_length('[1, 2, 3]');
+--------------------------+
| json_length('[1, 2, 3]') |
+--------------------------+
|                        3 |
+--------------------------+
```

示例5：返回具有嵌套数组的JSON数组的长度。

嵌套数组`[3, 4]`不计算在长度内。

```plain text
select json_length('[1, 2, [3, 4]]');
+-------------------------------+
| json_length('[1, 2, [3, 4]]') |
+-------------------------------+
|                             3 |
+-------------------------------+
```

示例6：返回路径`$.Person`指定的对象的长度。

```SQL
SET @file = '{  
    "Person": {    
       "Name": "Homer", 
       "Age": 39,
       "Hobbies": ["Eating", "Sleeping"]  
    }
 }';
select json_length(@file, '$.Person') 'Result';
```

示例7：返回路径`$.y`指定值的长度。

```plain text
select json_length('{"x": 1, "y": [1, 2]}', '$.y');
+---------------------------------------------+
| json_length('{"x": 1, "y": [1, 2]}', '$.y') |
+---------------------------------------------+
|                                           2 |
+---------------------------------------------+
```