---
displayed_sidebar: "Chinese"
---

# get_json_string

## 描述

此函数用于分析并获取json字符串中指定路径的字符串。

json_path必须以`$`开头，并使用`.`作为路径分隔符。

如果路径中包含`.`，则可以用`"`和`"`括起来。

`[ ]` 用作数组下标，从0开始。

路径中的内容不应包含`"`，`[`和`]`。

如果json字符串或json路径格式错误，此函数将返回NULL。

## 语法

```Haskell
VARCHAR get_json_string(VARCHAR json_str, VARCHAR json_path)
```

## 示例

1. 获取键为"k1"的值

    ```Plain Text
    MySQL > SELECT get_json_string('{"k1":"v1", "k2":"v2"}', "$.k1");
    +---------------------------------------------------+
    | get_json_string('{"k1":"v1", "k2":"v2"}', '$.k1') |
    +---------------------------------------------------+
    | v1                                                |
    +---------------------------------------------------+
    ```

2. 获取键为"my.key"的数组中第二个元素

    ```Plain Text
    MySQL > SELECT get_json_string('{"k1":"v1", "my.key":["e1", "e2", "e3"]}', '$."my.key"[1]');
    +------------------------------------------------------------------------------+
    | get_json_string('{"k1":"v1", "my.key":["e1", "e2", "e3"]}', '$."my.key"[1]') |
    +------------------------------------------------------------------------------+
    | e2                                                                           |
    +------------------------------------------------------------------------------+
    ```

3. 获取路径为k1.key -> k2的数组中第一个元素

    ```Plain Text
    MySQL > SELECT get_json_string('{"k1.key":{"k2":["v1", "v2"]}}', '$."k1.key".k2[0]');
    +-----------------------------------------------------------------------+
    | get_json_string('{"k1.key":{"k2":["v1", "v2"]}}', '$."k1.key".k2[0]') |
    +-----------------------------------------------------------------------+
    | v1                                                                    |
    +-----------------------------------------------------------------------+
    ```

4. 从数组中获取键为"k1"的所有值

    ```Plain Text
    MySQL > SELECT get_json_string('[{"k1":"v1"}, {"k2":"v2"}, {"k1":"v3"}, {"k1":"v4"}]', '$.k1');
    +---------------------------------------------------------------------------------+
    | get_json_string('[{"k1":"v1"}, {"k2":"v2"}, {"k1":"v3"}, {"k1":"v4"}]', '$.k1') |
    +---------------------------------------------------------------------------------+
    | ["v1","v3","v4"]                                                                |
    +---------------------------------------------------------------------------------+
    ```

## 关键词

GET_JSON_STRING,GET,JSON,STRING