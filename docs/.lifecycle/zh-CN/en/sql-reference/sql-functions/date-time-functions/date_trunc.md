```yaml
---
displayed_sidebar: "中文"
---

# date_trunc

## 描述

根据指定的日期部分（例如年、日、小时或分钟），截断时间值。

StarRocks还为您提供了年、季度、月、周、日和小时等函数，以提取指定的日期部分。

## 语法

```Haskell
DATETIME date_trunc(VARCHAR fmt, DATETIME|DATE datetime)
```

## 参数

- `datetime`: 要截断的时间，可以是DATETIME或DATE类型。日期和时间必须存在。否则，将返回NULL。例如, `2021-02-29 11:12:13` 不作为一个日期存在，将返回NULL。

- `fmt`: 日期部分，即`datetime`将被截断到哪个精度。该值必须是VARCHAR常量。

  `fmt`必须设置为下表中列出的值。如果值不正确，将返回错误。

  如果`datetime`是DATE值，`fmt`只能是`year`，`quarter`，`month`，`week`或`day`。如果将`fmt`设置为其他日期单位，例如`hour`，将报错。请参见示例5。

| 值      | 描述                        |
| ------- | --------------------------- |
| second  | 截断到秒。                  |
| minute  | 截断到分钟。秒部分将被清零。 |
| hour    | 截断到小时。分钟和秒部分将被清零。 |
| day     | 截断到一天。时间部分将被清零。   |
| week    | 截断到`datetime`所在周的第一天。时间部分将被清零。 |
| month   | 截断到`datetime`所在月的第一天。时间部分将被清零。 |
| quarter | 截断到`datetime`所在季度的第一天。时间部分将被清零。 |
| year    | 截断到`datetime`所在年的第一天。时间部分将被清零。   |

## 返回值

返回一个DATETIME类型的值。

如果`datetime`是DATE类型，且`fmt`被设置为`hour`，`minute`或`second`，返回值的时间部分默认为`00:00:00`。

## 示例

示例1: 将输入时间截断到分钟。

```Plain
select date_trunc("minute", "2020-11-04 11:12:13");
+---------------------------------------------+
| date_trunc('minute', '2020-11-04 11:12:13') |
+---------------------------------------------+
| 2020-11-04 11:12:00                         |
+---------------------------------------------+
```

示例2: 将输入时间截断到小时。

```Plain
select date_trunc("hour", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('hour', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-11-04 11:00:00                       |
+-------------------------------------------+
```

示例3: 将输入时间截断到一周的第一天。

```Plain
select date_trunc("week", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('week', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-11-02 00:00:00                       |
+-------------------------------------------+
```

示例4: 将输入时间截断到一年的第一天。

```Plain
select date_trunc("year", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('year', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-01-01 00:00:00                       |
+-------------------------------------------+
```

示例5: 将一个DATE值截断到小时。将返回错误。

```Plain
select date_trunc("hour", cast("2020-11-04" as date));

ERROR 1064 (HY000): 获取分析错误，从第1行，第26列到第1行，第51列。详细消息: date_trunc函数不支持年|季度|月|周|日之外的参数。
```