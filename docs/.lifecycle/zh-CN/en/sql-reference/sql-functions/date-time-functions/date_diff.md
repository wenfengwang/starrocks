---
displayed_sidebar: "Chinese"
---

# date_diff

## 描述

返回指定单位中两个日期值之间的差异。该函数以 `unit` 表达的 `expr1 - expr2` 的值。

例如，`date_diff('second', '2010-11-30 23:59:59', '2010-11-30 20:58:59')` 返回两个DATETIME值之间以秒为单位的差异。

此函数从v3.1版本开始支持。

date_diff和[datediff](./datediff.md)之间的区别在于，datediff()不支持`unit`参数。

## 语法

```Haskell
BIGINT DATE_DIFF(VARCHAR unit, DATETIME expr1, DATETIME expr2)
```

## 参数

- `expr1` 和 `expr2`：要比较的两个日期时间值，必填。支持的数据类型为DATETIME和DATE。

- `unit`：用于表示时间差的单位，必填。支持以下`unit`值：year、quarter、month、week、day、hour、minute、second、millisecond。

## 返回值

返回一个BIGINT值。

## 使用注意事项

- 如果`expr1`早于`expr2`，则返回负值。
- 如果`unit`无效，则返回错误。
- 如果任何输入值为NULL，则返回NULL。
- 如果指定的日期不存在，例如`2022-11-31`，则返回NULL。

## 示例

```Plain Text
mysql> select date_diff('second', '2010-11-30 23:59:59', '2010-11-30 20:58:59');
+-------------------------------------------------------------------+
| date_diff('second', '2010-11-30 23:59:59', '2010-11-30 20:58:59') |
+-------------------------------------------------------------------+
|                                                             10860 |
+-------------------------------------------------------------------+

mysql> select date_diff('minute', '2010-11-30 23:59:59', '2010-11-30 20:58:59');
+-------------------------------------------------------------------+
| date_diff('minute', '2010-11-30 23:59:59', '2010-11-30 20:58:59') |
+-------------------------------------------------------------------+
|                                                               181 |
+-------------------------------------------------------------------+

mysql> select date_diff('hour', '2010-11-30 23:59:59', '2010-11-30 20:58:59');
+-----------------------------------------------------------------+
| date_diff('hour', '2010-11-30 23:59:59', '2010-11-30 20:58:59') |
+-----------------------------------------------------------------+
|                                                               3 |
+-----------------------------------------------------------------+

mysql> select date_diff('millisecond', '2010-11-30 23:59:59', '2010-11-30 20:58:59');
+------------------------------------------------------------------------+
| date_diff('millisecond', '2010-11-30 23:59:59', '2010-11-30 20:58:59') |
+------------------------------------------------------------------------+
|                                                               10860000 |
+------------------------------------------------------------------------+
```

## 参考资料

[datediff](./datediff.md)