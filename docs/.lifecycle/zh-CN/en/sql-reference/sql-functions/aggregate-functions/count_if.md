---
displayed_sidebar: "Chinese"
---


# count_if

## 描述

返回满足指定条件的行的总数。

此函数不支持`DISTINCT`，例如，`count_if(DISTINCT x)`是无效的。

此函数在内部转换为`COUNT` + `IF`：

之前：`COUNT_IF(x)`  
之后：`COUNT(IF(x, 1, NULL))`

## 语法

~~~Haskell
COUNT_IF(expr)
~~~

## 参数

`expr`：进行`count_if()`操作的列或基于其上的表达式。如果`expr`是列名，则列可以是任何数据类型。

## 返回值

返回一个数字值。如果找不到行，则返回0。此函数忽略NULL值。

## 示例

假设有一张名为`test_count_if`的表。

~~~Plain
select * from test_count_if;
+------+------+---------------------+------+
| v1   | v2   | v3                  | v4   |
+------+------+---------------------+------+
| a    | NULL | 2022-04-18 02:05:00 |    1 |
| a    | a    | 2022-04-18 01:01:00 |    1 |
| a    | b    | 2022-04-18 02:01:00 | NULL |
| a    | b    | 2022-04-18 02:15:00 |    3 |
| a    | b    | 2022-04-18 03:15:00 |    7 |
| c    | NULL | 2022-04-18 03:25:00 |    2 |
| c    | NULL | 2022-04-18 03:45:00 | NULL |
| c    | a    | 2022-04-18 03:27:00 |    3 |
+------+------+---------------------+------+
~~~

示例 1：统计`test_count_if`表中`v2`为null的行数。

~~~Plain
select count_if(v2 is null) from test_count_if;
+----------------------+
| count_if(v2 IS NULL) |
+----------------------+
|                    3 |
+----------------------+
~~~

示例 2：统计`v1 >= v2 or v4 = 1`的行数。

~~~Plain
select count_if(v1 >= v2 or v4 = 1)from test_count_if;
+----------------------------------+
| count_if((v1 >= v2) OR (v4 = 1)) |
+----------------------------------+
|                                3 |
+----------------------------------+
~~~