---
displayed_sidebar: English
---

# json_keys

## 説明

JSON オブジェクトの最上位キーを JSON 配列として返すか、`path` が指定されている場合はそのパスの最上位キーを返します。

## 構文

```Haskell
json_keys(json_doc[, path])
```

## パラメーター

`json_doc`: 必須。キーを返す JSON ドキュメント。JSON オブジェクトである必要があります。

`path`: 任意。通常、パスは `$` で始まり、`.` をパス区切り文字として使用します。`[]` は、0 から始まる配列の添字として使用されます。

## 戻り値

JSON 配列を返します。

JSON オブジェクトが空の場合は、空の配列が返されます。

`NULL` は、JSON ドキュメントが JSON オブジェクトでない場合、またはパスがドキュメント内の値を識別しない場合に返されます。

JSON ドキュメントが JSON オブジェクトでネストされた配列である場合、`path` パラメーターを使用してそのオブジェクトからキーを取得できます。

## 例

例 1: 入力 JSON オブジェクトが空であるため、空の配列を返します。

```Plain
select json_keys('{}');
+-----------------+
| json_keys('{}') |
+-----------------+
| []              |
+-----------------+
```

例 2: JSON オブジェクトのキーを返します。

```Plain
select json_keys('{"a": 1, "b": 2, "c": 3}');
+-------------------------------------------+
| json_keys('{"a": 1, "b": 2, "c": 3}')     |
+-------------------------------------------+
| ["a", "b", "c"]                           |
+-------------------------------------------+
```

例 3: 指定されたパスに一致する JSON オブジェクトのキーを返します。

```Plain
select json_keys('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.c');
+---------------------------------------------------------------------+
| json_keys('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.c') |
+---------------------------------------------------------------------+
| ["d", "e", "f"]                                                     |
+---------------------------------------------------------------------+
```

例 4: パスが存在しません。

```Plain
select json_keys('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.e');
+---------------------------------------------------------------------+
| json_keys('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.e') |
+---------------------------------------------------------------------+
| NULL                                                                |
+---------------------------------------------------------------------+
```

例 5: JSON ドキュメントは JSON オブジェクトではありません。

```Plain
select json_keys('[1, 2, {"a": 1, "b": 2}]');
+-------------------------------------------+
| json_keys('[1, 2, {"a": 1, "b": 2}]')     |
+-------------------------------------------+
| NULL                                      |
+-------------------------------------------+
```

例 6: JSON ドキュメントは JSON オブジェクトでネストされた配列です。そのオブジェクトからキーを取得するためのパスが指定されています。

```Plain
select json_keys('[0, 1, {"a": 1, "b": 2}]', '$[2]');
+-----------------------------------------------+
| json_keys('[0, 1, {"a": 1, "b": 2}]', '$[2]') |
+-----------------------------------------------+
| ["a", "b"]                                    |
+-----------------------------------------------+
```
