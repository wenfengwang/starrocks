---
displayed_sidebar: English
---

# json_each

## 説明

JSON オブジェクトの最も外側の要素を、2つの列に保持されるキーと値のペアのセットに展開し、各要素に対して1行ずつ構成されるテーブルを返します。

## 構文

```Haskell
json_each(json_object_expr)
```

## パラメーター

`json_object_expr`: JSON オブジェクトを表す式です。オブジェクトは、JSON 列であるか、PARSE_JSON などの JSON コンストラクタ関数によって生成された JSON オブジェクトである可能性があります。

## 戻り値

2つの列を返します。1つは `key` という名前の列で、もう1つは `value` という名前の列です。`key` 列には VARCHAR 値が格納され、`value` 列には JSON 値が格納されます。

## 使用上の注意

json_each 関数はテーブルを返すテーブル関数です。返されるテーブルは、複数の行からなる結果セットです。したがって、FROM 句で lateral join を使用して、返されたテーブルを元のテーブルに結合する必要があります。lateral join は必須ですが、LATERAL キーワードはオプショナルです。json_each 関数は SELECT 句で使用することはできません。

## 例

```plaintext
-- tj という名前のテーブルを例として使用します。tj テーブルの j 列は JSON オブジェクトです。
mysql> SELECT * FROM tj;
+------+------------------+
| id   | j                |
+------+------------------+
|    1 | {"a": 1, "b": 2} |
|    3 | {"a": 3}         |
+------+------------------+

-- tj テーブルの j 列をキーと値の2つの列に展開して、複数の行からなる結果セットを取得します。この例では、LATERAL キーワードを使用して結果セットを tj テーブルに結合します。

mysql> SELECT * FROM tj, LATERAL json_each(j);
+------+------------------+------+-------+
| id   | j                | key  | value |
+------+------------------+------+-------+
|    1 | {"a": 1, "b": 2} | a    | 1     |
|    1 | {"a": 1, "b": 2} | b    | 2     |
|    3 | {"a": 3}         | a    | 3     |
+------+------------------+------+-------+
```
