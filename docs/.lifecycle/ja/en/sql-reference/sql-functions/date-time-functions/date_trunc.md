---
displayed_sidebar: English
---

# date_trunc

## 説明

年、日、時、分など、指定した日付部分に基づいて時刻値を切り捨てます。

StarRocksは、指定された日付部分を抽出するための`year`、`quarter`、`month`、`week`、`day`、および`hour`関数も提供します。

## 構文

```Haskell
DATETIME date_trunc(VARCHAR fmt, DATETIME|DATE datetime)
```

## パラメーター

- `datetime`: 切り捨てる時刻で、DATETIME型またはDATE型です。日付と時刻が存在している必要があります。存在しない場合は、NULLが返されます。例えば、`2021-02-29 11:12:13`は存在しない日付であり、NULLが返されます。

- `fmt`: 日付部分、つまり`datetime`が切り捨てられる精度です。値はVARCHAR型の定数でなければなりません。

  `fmt`は次の表に示す値に設定する必要があります。値が正しくない場合は、エラーが返されます。

  `datetime`がDATE型の場合、`fmt`は`year`、`quarter`、`month`、`week`、または`day`のみに設定できます。`hour`など他の日付単位に設定すると、エラーが報告されます。例5を参照してください。

| 値      | 説明                                                      |
| ------- | ---------------------------------------------------------- |
| second  | 秒単位に切り捨てます。                                     |
| minute  | 分単位に切り捨てます。秒部分はゼロになります。             |
| hour    | 時単位に切り捨てます。分と秒部分はゼロになります。         |
| day     | 日単位に切り捨てます。時間部分はゼロになります。           |
| week    | `datetime`が含まれる週の最初の日に切り捨てます。時間部分はゼロになります。 |
| month   | `datetime`が含まれる月の最初の日に切り捨てます。時間部分はゼロになります。 |
| quarter | `datetime`が含まれる四半期の最初の日に切り捨てます。時間部分はゼロになります。 |
| year    | `datetime`が含まれる年の最初の日に切り捨てます。時間部分はゼロになります。 |

## 戻り値

DATETIME型の値を返します。

`datetime`がDATE型で`fmt`が`hour`、`minute`、または`second`に設定されている場合、戻り値の時間部分はデフォルトで`00:00:00`になります。

## 例

例1: 入力時間を分に切り捨てます。

```Plain
select date_trunc("minute", "2020-11-04 11:12:13");
+---------------------------------------------+
| date_trunc('minute', '2020-11-04 11:12:13') |
+---------------------------------------------+
| 2020-11-04 11:12:00                         |
+---------------------------------------------+
```

例2: 入力時間を時に切り捨てます。

```Plain
select date_trunc("hour", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('hour', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-11-04 11:00:00                       |
+-------------------------------------------+
```

例3: 入力時間を週の最初の日に切り捨てます。

```Plain
select date_trunc("week", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('week', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-11-02 00:00:00                       |
+-------------------------------------------+
```

例4: 入力時間を年の最初の日に切り捨てます。

```Plain
select date_trunc("year", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('year', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-01-01 00:00:00                       |
+-------------------------------------------+
```

例5: DATE型の値を時に切り捨てます。エラーが返されます。

```Plain
select date_trunc("hour", cast("2020-11-04" as date));

ERROR 1064 (HY000): Getting analyzing error from line 1, column 26 to line 1, column 51. Detail message: date_trunc function can't support argument other than year|quarter|month|week|day.
```
