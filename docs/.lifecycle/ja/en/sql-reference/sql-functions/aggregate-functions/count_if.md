---
displayed_sidebar: English
---


# count_if

## 説明

指定した条件を満たす行の合計数を返します。

この関数は `DISTINCT` をサポートしていません（例: `count_if(DISTINCT x)` は無効です）。

この関数は内部的に `COUNT` と `IF` に変換されます:

変換前: `COUNT_IF(x)`  
変換後: `COUNT(IF(x, 1, NULL))`

## 構文

~~~Haskell
COUNT_IF(expr)
~~~

## パラメーター

`expr`: `count_if()` が実行される列名または式です。`expr` が列名の場合、その列は任意のデータ型であることができます。

## 戻り値

数値を返します。該当する行がない場合は 0 が返されます。この関数は NULL 値を無視します。

## 例

`test_count_if` という名前のテーブルがあるとします。

~~~Plain
select * from test_count_if;
+------+------+---------------------+------+
| v1   | v2   | v3                  | v4   |
+------+------+---------------------+------+
| a    | NULL | 2022-04-18 02:05:00 |    1 |
| a    | a    | 2022-04-18 01:01:00 |    1 |
| a    | b    | 2022-04-18 02:01:00 | NULL |
| a    | b    | 2022-04-18 02:15:00 |    3 |
| a    | b    | 2022-04-18 03:15:00 |    7 |
| c    | NULL | 2022-04-18 03:25:00 |    2 |
| c    | NULL | 2022-04-18 03:45:00 | NULL |
| c    | a    | 2022-04-18 03:27:00 |    3 |
+------+------+---------------------+------+
~~~

例 1: `test_count_if` テーブルで `v2` が NULL の行数をカウントします。

~~~Plain
select count_if(v2 is null) from test_count_if;
+----------------------+
| count_if(v2 IS NULL) |
+----------------------+
|                    3 |
+----------------------+
~~~

例 2: `v1 >= v2` または `v4 = 1` の条件を満たす行数をカウントします。

~~~Plain
select count_if(v1 >= v2 or v4 = 1) from test_count_if;
+----------------------------------+
| count_if((v1 >= v2) OR (v4 = 1)) |
+----------------------------------+
|                                3 |
+----------------------------------+
~~~