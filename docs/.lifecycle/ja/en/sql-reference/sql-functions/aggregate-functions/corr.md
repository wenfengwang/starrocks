---
displayed_sidebar: English
---

# corr

## 説明

2つの式の間のピアソン相関係数を返します。この関数はv2.5.10からサポートされており、ウィンドウ関数としても使用可能です。

## 構文

```Haskell
CORR(expr1, expr2)
```

## パラメーター

`expr1` および `expr2` は、TINYINT、SMALLINT、INT、BIGINT、LARGEINT、FLOAT、DOUBLE、または DECIMAL に評価される必要があります。

`expr1` と `expr2` がテーブルの列である場合、この関数はこれら2つの列の相関係数を計算します。

## 戻り値

DOUBLE 値を返します。以下の式によって計算されます。ここで `n` はテーブルの行数を表します。

![corr formula](../../../assets/corr_formula.png)

<!--$$
\frac{\sum_{i=1}^{n}((x_i - \bar{x})(y_i - \bar{y}))}{\sqrt{\sum_{i=1}^{n}((x_i - \bar{x})^2) \cdot \sum_{i=1}^{n}((y_i - \bar{y})^2)}}
$$-->

## 使用上の注意

- 2つの列が非NULL値である行のみがカウントされます。それ以外の場合、その行は結果から除外されます。

- `n` が1の場合は0が返されます。

- いずれかの入力がNULLの場合はNULLが返されます。

## 例

`agg` テーブルに以下のデータがあるとします。

```plaintext
mysql> select * from agg;
+------+-------+-------+
| no   | k     | v     |
+------+-------+-------+
|    1 | 10.00 |  NULL |
|    2 | 10.00 | 11.00 |
|    2 | 20.00 | 22.00 |
|    2 | 25.00 |  NULL |
|    2 | 30.00 | 35.00 |
+------+-------+-------+
```

`k` と `v` 列の相関係数を計算します。

```plaintext
mysql> select no,CORR(k,v) from agg group by no;
+------+--------------------+
| no   | corr(k, v)         |
+------+--------------------+
|    1 |               NULL |
|    2 | 0.9988445981121532 |
+------+--------------------+
```
