---
displayed_sidebar: English
---

# to_binary

## 説明

VARCHAR文字列を、入力文字列の指定されたバイナリ形式(`binary_type`)に基づいてバイナリ値に変換します。サポートされているバイナリ形式は`hex`、`encode64`、`utf8`です。`binary_type`が指定されていない場合、デフォルトは`hex`です。

## 構文

```Haskell
to_binary(str[, binary_type])
```

## パラメーター

- `str`: 変換する文字列、必須。VARCHAR文字列でなければなりません。
- `binary_type`: 変換用のバイナリ形式、オプション。

  - `hex`(デフォルト): `to_binary`は入力文字列が'0123456789abcdef'の全文字を含む16進文字列であると想定します。入力文字列が有効でない場合、空のバイナリが返されます（例外は投げられません）。`to_binary`は入力文字列を直接バイナリに変換します。例えば、`"abab"`は`x'abab'`に変換されます。入力文字列は大文字小文字を区別しません。
  - `encode64`: `to_binary`は入力文字列がbase64エンコードされた文字列であると想定します。入力文字列が有効でない場合、空のバイナリが返されます（例外は投げられません）。`to_binary`はbase64エンコードされた文字列をバイナリ結果としてデコードします。例えば、`"YWJhYg=="`は`x'abab'`に変換されます。
  - `utf8`: `to_binary`は入力文字列を変換せずにバイナリ値として扱います。

## 戻り値

VARCHAR値を返します。

## 例

以下の例では、MySQLクライアントからStarRocksにアクセスする際に`--binary-as-hex`オプションが有効になっていることを前提としています。これにより、バイナリデータは16進数表記で表示されます。

```Plain
mysql> select to_binary('ABAB', 'hex');
+----------------------------------------------------+
| to_binary('ABAB', 'hex')                           |
+----------------------------------------------------+
| 0xABAB                                             |
+----------------------------------------------------+
1 row in set (0.01 sec)

mysql> select to_binary('U1RBUlJPQ0tT', 'encode64');
+------------------------------------------------------------------------------+
| to_binary('U1RBUlJPQ0tT', 'encode64')                                        |
+------------------------------------------------------------------------------+
| 0x53544152524F434B53                                                         |
+------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> select to_binary('STARROCKS', 'utf8');
+----------------------------------------------------------------+
| to_binary('STARROCKS', 'utf8')                                 |
+----------------------------------------------------------------+
| 0x53544152524F434B53                                           |
+----------------------------------------------------------------+
1 row in set (0.00 sec)

-- 入力文字列がバイナリ形式と一致しない場合、空のバイナリが返されます。

mysql> select to_binary('U1RBUlJPQ0tT', 'hex');
+--------------------------------------------------------------------+
| to_binary('U1RBUlJPQ0tT', 'hex')                                   |
+--------------------------------------------------------------------+
| 0x                                                                 |
+--------------------------------------------------------------------+
1 row in set (0.00 sec)
```

## 参照

- [from_binary](from_binary.md)
- [BINARY/VARBINARY データ型](../../sql-statements/data-types/BINARY.md)
