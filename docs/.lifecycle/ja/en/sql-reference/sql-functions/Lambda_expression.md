---
displayed_sidebar: English
---

# ラムダ式

ラムダ式は、高階SQL関数にパラメータとして渡すことができる匿名関数です。ラムダ式を使用すると、コードをより簡潔で、エレガントで、拡張性のあるものにすることができます。

ラムダ式は `->` 演算子を使って記述され、「〜になる」と読みます。`->` の左側は入力パラメータ（ある場合）、右側は式です。

バージョン2.5以降、StarRocksは以下の高階SQL関数でラムダ式の使用をサポートしています: [array_map()](./array-functions/array_map.md)、[array_filter()](./array-functions/array_filter.md)、[array_sum()](./array-functions/array_sum.md)、および[array_sortby()](./array-functions/array_sortby.md)。

## 構文

```Haskell
parameter -> expression
```

## パラメータ

- `parameter`: ラムダ式の入力パラメータで、0個、1個、または複数のパラメータを受け取ることができます。2つ以上の入力パラメータは括弧で囲まれます。

- `expression`: `parameter` を参照する単純な式です。この式は入力パラメータに対して有効でなければなりません。

## 戻り値

戻り値の型は、`expression` の結果の型によって決まります。

## 使用上の注意

ほとんどすべてのスカラー関数はラムダ本体で使用できますが、いくつかの例外があります:

- サブクエリはサポートされていません。例: `x -> 5 + (SELECT 3)`。
- 集約関数はサポートされていません。例: `x -> min(y)`。
- ウィンドウ関数はサポートされていません。
- テーブル関数はサポートされていません。
- 相関列はラムダ関数内では使用できません。

## 例

ラムダ式の簡単な例:

```SQL
-- パラメータを受け取らず、5を返します。
() -> 5    
-- xを受け取り、(x + 2)の値を返します。
x -> x + 2 
-- xとyを受け取り、それらの合計を返します。
(x, y) -> x + y 
-- xを受け取り、xに関数を適用します。
x -> COALESCE(x, 0)
x -> day(x)
x -> split(x, ",")
x -> if(x > 0, "positive", "negative")
```

高階関数でのラムダ式の使用例:

```Haskell
select array_map((x, y, z) -> x + y, [1], [2], [4]);
+----------------------------------------------+
| array_map((x, y, z) -> x + y, [1], [2], [4]) |
+----------------------------------------------+
| [3]                                          |
+----------------------------------------------+
1行がセットに含まれています (0.01秒)
```
