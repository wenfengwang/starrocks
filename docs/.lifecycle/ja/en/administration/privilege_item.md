---
displayed_sidebar: English
---

# StarRocksがサポートする権限

ユーザーやロールに付与された権限は、特定のオブジェクトに対してどのような操作が可能かを決定します。権限を用いて細かいアクセス制御を実装し、データセキュリティを保護することができます。

このトピックでは、StarRocksが提供するさまざまなオブジェクトに対する権限とその意味について説明します。権限は[GRANT](../sql-reference/sql-statements/account-management/GRANT.md)と[REVOKE](../sql-reference/sql-statements/account-management/REVOKE.md)を使用して付与および取り消しを行います。オブジェクトに付与できる権限は、オブジェクトのタイプに特有です。例えば、テーブルの権限はデータベースの権限とは異なります。

> 注意: このトピックで説明されている権限は、v3.0から利用可能です。v3.0の権限フレームワークと構文は、以前のバージョンとの下位互換性がありません。v3.0へのアップグレード後、特定の操作に関する権限を除き、既存の権限のほとんどは維持されます。詳細な違いについては、このトピックの最後にある[アップグレードノート](#upgrade-notes)を参照してください。

## 権限リスト

このセクションでは、さまざまなオブジェクトで利用可能な権限について説明します。

### SYSTEM

| 権限               | 説明                                                  |
| ----------------------- | ------------------------------------------------------------ |
| NODE                    | ノードの操作（追加、削除、廃止など）。クラスタのセキュリティを確保するため、この権限はユーザーやロールに直接付与できません。`cluster_admin` ロールがこの権限を持っています。 |
| GRANT                   | ユーザーやロールの作成、変更、権限の付与。この権限はユーザーやロールに直接付与できません。`user_admin` ロールがこの権限を持っています。 |
| CREATE_RESOURCE_GROUP   | リソースグループの作成。                                    |
| CREATE_RESOURCE         | Spark Loadジョブや外部テーブル用のリソースを作成。    |
| CREATE_EXTERNAL_CATALOG | 外部カタログの作成。                                 |
| PLUGIN                  | プラグインのインストールまたはアンインストール。                             |
| REPOSITORY              | リポジトリの作成、削除、閲覧。                     |
| BLACKLIST               | SQLブラックリストの作成、削除、表示。                |
| FILE                    | ファイルの作成、削除、閲覧。                            |
| OPERATE                 | レプリカ、設定項目、変数、トランザクションの管理。 |
| CREATE_GLOBAL_FUNCTION  | グローバルUDFの作成。                           |
| CREATE_STORAGE_VOLUME  | リモートストレージシステム用のストレージボリュームの作成。    |

### RESOURCE GROUP

| 権限 | 説明                                       |
| --------- | ------------------------------------------------- |
| ALTER     | リソースグループの分類器の追加または削除。 |
| DROP      | リソースグループの削除。                         |
| ALL       | リソースグループに対する上記の全権限。  |

### RESOURCE

| 権限 | 説明                                |
| --------- | ------------------------------------------ |
| USAGE     | リソースの使用。                           |
| ALTER     | リソースの変更。                         |
| DROP      | リソースの削除。                        |
| ALL       | リソースに対する上記の全権限。 |

### USER

| 権限   | 説明                                    |
| ----------- | ---------------------------------------------- |
| IMPERSONATE | ユーザーAがユーザーBとして操作を実行できるようにする。 |

### GLOBAL FUNCTION (グローバルUDF)

| 権限 | 説明                                 |
| --------- | ------------------------------------------- |
| USAGE     | クエリ内での関数の使用。                 |
| DROP      | 関数の削除。                         |
| ALL       | 関数に対する上記の全権限。 |

### CATALOG

| オブジェクト                      | 権限                                             | 説明                                    |
| --------------------------- | ----------------------------------------------------- | ---------------------------------------------- |
| CATALOG (内部カタログ) | USAGE                                                 | 内部カタログ（default_catalog）の使用。   |
| CATALOG (内部カタログ)             | CREATE_DATABASE           | 内部カタログにデータベースを作成。                                   |
| CATALOG (内部カタログ)                        | ALL  | 内部カタログに対する上記の全権限。                           |
| CATALOG (外部カタログ)  | USAGE                                                 | 外部カタログを使用してテーブルを閲覧。 |
| CATALOG (外部カタログ)                        | DROP                       | 外部カタログの削除。                                   |
| CATALOG (外部カタログ)                         | ALL   | 外部カタログに対する上記の全権限。                                |

> 注意: StarRocksの内部カタログは削除できません。

### DATABASE

| 権限                | 説明                                                  |
| ------------------------ | ------------------------------------------------------------ |
| ALTER                    | データベースのプロパティ設定、データベース名の変更、またはデータベースのクォータ設定。 |
| DROP                     | データベースの削除。                                          |
| CREATE_TABLE             | データベース内にテーブルを作成。                                |
| CREATE_VIEW              | ビューの作成。                                              |
| CREATE_FUNCTION          | 関数の作成。                                          |
| CREATE_MATERIALIZED_VIEW | マテリアライズドビューの作成。                                 |
| ALL                      | データベースに対する上記の全権限。                  |

### TABLE

| 権限 | 説明                                                  |
| --------- | ------------------------------------------------------------ |

| ALTER     | テーブルを変更するか、外部テーブルのメタデータを更新します。 |
| DROP      | テーブルを削除します。                                               |
| SELECT    | テーブル内のデータをクエリします。                                     |
| INSERT    | テーブルにデータを挿入します。                                   |
| UPDATE    | テーブル内のデータを更新します。                                     |
| EXPORT    | StarRocks テーブルからデータをエクスポートします。                         |
| DELETE    | 指定した条件に基づいてテーブルからデータを削除するか、テーブルからすべてのデータを削除します。 |
| ALL       | テーブルに対する上記のすべての権限を持ちます。                     |

### VIEW

| Privilege | Description                             |
| --------- | --------------------------------------- |
| SELECT    | ビュー内のデータをクエリします。                 |
| ALTER     | ビューの定義を変更します。      |
| DROP      | 論理ビューを削除します。                 |
| ALL       | ビューに対する上記のすべての権限を持ちます。 |

### MATERIALIZED VIEW

| Privilege | Description                                          |
| --------- | ---------------------------------------------------- |
| SELECT    | マテリアライズドビューをクエリして、クエリを高速化します。   |
| ALTER     | マテリアライズドビューを変更します。                         |
| REFRESH   | マテリアライズドビューをリフレッシュします。                       |
| DROP      | マテリアライズドビューを削除します。                         |
| ALL       | マテリアライズドビューに対する上記のすべての権限を持ちます。 |

### FUNCTION (Database-level UDFs)

| Privilege | Description                             |
| ------- | ------------------------------------------|
| USAGE | 関数を使用します。                            |
| DROP  | 関数を削除します。                         |
| ALL   | 関数に対する上記のすべての権限を持ちます。 |

### STORAGE VOLUME

| Privilege | Description                             |
| ------- | ------------------------------------------------------------ |
| ALTER | ストレージボリュームの認証情報のプロパティ、コメント、またはステータス（enabled）を変更します。      |
| DROP  | ストレージボリュームを削除します。               |
| USAGE | ストレージボリュームについて記述し、ストレージボリュームをデフォルトのストレージボリュームとして設定します。   |
| ALL   | ストレージボリュームに対する上記のすべての権限を持ちます。  |

## アップグレードノート

v2.x から v3.0 へのアップグレード中に、新しい権限システムの導入により、一部の操作が実行できなくなる可能性があります。以下の表は、アップグレード前後の変更を説明しています。

| **操作**               | **関連するコマンド**           | **アップグレード前**                                                   | **アップグレード後**                                                    |
| --------------------------- | ------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| テーブルの変更                | ALTER TABLE、CANCEL ALTER TABLE | テーブルまたはテーブルが属するデータベースに `LOAD_PRIV` 権限を持つユーザーは、`ALTER TABLE` および `CANCEL ALTER TABLE` 操作を実行できます。 | これらの操作を実行するには、テーブルに対する ALTER 権限が必要です。 |
| 外部テーブルのリフレッシュ      | REFRESH EXTERNAL TABLE          | 外部テーブルに `LOAD_PRIV` 権限を持つユーザーは、外部テーブルをリフレッシュできます。 | この操作を実行するには、外部テーブルに対する ALTER 権限が必要です。 |
| バックアップとリストア          | BACKUP、RESTORE                 | データベースに `LOAD_PRIV` 権限を持つユーザーは、データベースまたはデータベース内の任意のテーブルをバックアップおよびリストアできます。 | 管理者はアップグレード後に、バックアップおよびリストア権限をユーザーに再度付与する必要があります。 |
| 削除後のリカバリ      | RECOVER                         | データベースとテーブルに `ALTER_PRIV`、`CREATE_PRIV`、`DROP_PRIV` 権限を持つユーザーは、データベースとテーブルをリカバリできます。 | データベースをリカバリするには、default_catalog に対する CREATE DATABASE 権限が必要です。テーブルをリカバリするには、データベースに対する CREATE TABLE 権限と、テーブルに対する DROP 権限が必要です。 |
| ユーザーの作成と変更     | CREATE USER、ALTER USER         | データベースに `GRANT_PRIV` 権限を持つユーザーは、ユーザーを作成および変更できます。 | ユーザーを作成および変更するには、`user_admin` ロールが必要です。 |
| 権限の付与と取り消し | GRANT、REVOKE                   | オブジェクトに `GRANT_PRIV` 権限を持つユーザーは、そのオブジェクトに対する権限を他のユーザーやロールに付与できます。 | アップグレード後も、そのオブジェクトに対してすでに持っている権限を他のユーザーやロールに付与できます。<br />新しい権限システムでは: <ul><li>他のユーザーやロールに権限を付与するには、`user_admin` ロールが必要です。</li><li>GRANT 文に `WITH GRANT OPTION` が含まれている場合、その文に関連する権限を他のユーザーやロールに付与できます。</li></ul> |

v2.xでは、StarRocksはロールベースのアクセス制御（RBAC）を完全に実装していません。ユーザーにロールを割り当てると、StarRocksはロール自体ではなく、ロールのすべての権限をユーザーに直接付与します。したがって、ユーザーは実際にはロールを所有していません。

v3.0で、StarRocksはその権限システムを一新しました。v3.0へアップグレード後も、元のロールは維持されますが、ユーザーとロールの間に所有関係は存在しません。新しいRBACシステムを利用したい場合は、GRANTコマンドを使用してロールと権限を割り当ててください。
