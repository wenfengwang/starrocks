---
displayed_sidebar: English
---

# レプリカ管理

## 用語

* タブレット: テーブルの論理スライスで、テーブルには複数のタブレットがあります。
* レプリカ: タブレットのコピーで、デフォルトではタブレットごとに3つのレプリカがあります。
* 正常なレプリカ: バックエンドが稼働しており、バージョンが完全なレプリカ。
* TabletChecker (TC): すべてのタブレットを定期的にスキャンし、その状態に基づいてタブレットをTabletSchedulerに送信するかどうかを決定する常駐バックグラウンドスレッド。
* TabletScheduler (TS): TabletCheckerによって送信されたタブレットを処理し、クラスターレプリカのバランス調整も行う常駐バックグラウンドスレッド。
* TabletSchedCtx (TSC): タブレットのラッパー。TCによってタブレットが選択されると、TSCとしてカプセル化され、TSに送信されます。
* ストレージメディア: StarRocksは、SSDやHDDなど、パーティションの粒度に応じてさまざまなストレージメディアをサポートしています。レプリカのスケジューリングは、ストレージメディアによって異なります。

## ステータス

### レプリカのステータス

レプリカの健康状態は以下の通りです。

* **BAD**

レプリカが破損しています。これには、ディスク障害やバグなどによるレプリカへの回復不可能な損傷が含まれますが、これらに限定されません。

* **VERSION_MISSING**

各バッチインポートはデータの1つのバージョンに対応します。1つのレプリカには複数の連続したバージョンが存在するべきです。インポートエラーにより、一部のレプリカには不完全なバージョンのデータが含まれる場合があります。

* **HEALTHY**

レプリカには正しいデータがあり、レプリカが配置されているBEノードは正常な状態です（正常なハートビートがあり、オフラインプロセス中ではありません）。

### タブレットのステータス

タブレットの健康状態は、そのすべてのレプリカの状態によって決まります。

* **REPLICA_MISSING**

レプリカが不足しています。つまり、生存しているレプリカの数が期待されるレプリカの数よりも少ないです。

* **VERSION_INCOMPLETE**

生存しているレプリカの数は期待される数以上ですが、健康なレプリカの数は期待される数よりも少ないです。

* **REPLICA_RELOCATING**

完全なバージョンを持つ生存レプリカの数が`replication_num`と等しいです。しかし、一部のレプリカが配置されているBEノードが利用できない状態です（例：デコミッションステータス中）。

* **REPLICA_MISSING_IN_CLUSTER**

複数のクラスターを使用する場合、健康なレプリカの数は期待される数以上ですが、対応するクラスター内のレプリカの数は期待される数よりも少ないです。

* **REDUNDANT**

レプリカの冗長性。すべての健康なレプリカは対応するクラスター内にありますが、利用できないレプリカが冗長であるため、レプリカの総数が期待される数を超えています。

* **FORCE_REDUNDANT**

これは特別なステータスです。これは、期待されるレプリカの数が利用可能なノードの数以上であり、タブレットがレプリカ不足の状態にある場合にのみ発生します。この場合、新しいレプリカを作成するための利用可能なノードを確保するために、最初に1つのレプリカを削除する必要があります。

* **COLOCATE_MISMATCH**

コロケーション属性のタブレットステータスで、分割されたレプリカがコロケーショングループによって指定された分布と一致しないことを示します。

* **COLOCATE_REDUNDANT**

コロケーション属性のタブレットステータスで、コロケーションテーブルのタブレットレプリカが冗長であることを示します。

* **HEALTHY**

健康なタブレット。

## レプリカの修復

TabletCheckerは、すべてのタブレットのステータスを定期的にチェックします。健康でないタブレットは、スケジューリングと修復のためにTabletSchedulerに引き渡されます。修復はBE上でクローンタスクとして行われます。FEはクローンタスクの生成を担当します。

> 注 1: レプリカ修復の主な考え方は、まず新しいレプリカを作成またはパッチを適用して目的の値に到達し、その後で冗長なレプリカを削除することです。
> 注 2: クローンタスクは、リモートBEから宛先BEへターゲットデータをコピーすることです。

異なる状態には、異なる修復方法が使用されます。

1. REPLICA_MISSING/REPLICA_RELOCATING
   利用可能なBEノードを宛先BEとして選択します。健康なレプリカをソースとして選択します。クローンタスクは、ソースから宛先BEへ完全なレプリカをコピーします。レプリカ補充のためには、ストレージメディアに関係なく利用可能なBEノードが選択されます。
2. VERSION_INCOMPLETE
   比較的完全なレプリカを宛先として選択します。健康なレプリカをソースとして選択します。クローンタスクは、ソースから宛先へ不足しているバージョンをコピーします。
3. REPLICA_MISSING_IN_CLUSTER
   このステータスはREPLICA_MISSINGと同じ方法で処理されます。
4. REDUNDANT
  通常、レプリカの修復後、タブレットには冗長なレプリカがあります。冗長なレプリカを選択して削除します。冗長なレプリカの選択は、次の順序に従います：

   * レプリカが配置されているBEがすでにオフラインです
   * レプリカが破損しています
   * レプリカが配置されているBEが接続されていないか、オフラインに移行中です
   * レプリカがCLONE状態であり、クローンタスク実行中の中間状態です
   * レプリカに欠落バージョンがあります
   * レプリカが配置されているクラスターが不正です
   * レプリカが配置されているBEノードの負荷が高いです

5. FORCE_REDUNDANT
   タブレットにレプリカが不足しており、新しいレプリカを作成するために利用可能なノードがありません。この場合、最初にレプリカを削除して、新しいレプリカを作成するためのノードを解放する必要があります。レプリカを削除する順序はREDUNDANTと同じです。
6. COLOCATE_MISMATCH
   コロケーショングループで指定されたBEノードの中から、レプリカ補充の宛先ノードを1つ選択します。
7. COLOCATE_REDUNDANT
   コロケーショングループで指定されていないBEノード上のレプリカを削除します。

StarRocksは、同じホストの異なるBEに同じタブレットのレプリカをデプロイしないため、同じホストのすべてのBEが故障しても、一部のレプリカは生き残ることができます。

## レプリカのスケジューリング

### スケジューリングの優先順位

TabletSchedulerでスケジュールされるのを待っているタブレットには、その状態に応じて異なる優先順位が与えられます。優先度の高いタブレットが最初にスケジュールされます。優先度レベルは次のとおりです：

* VERY_HIGH

* `REDUNDANT`状態。冗長なレプリカを持つタブレットは非常に高い優先度が与えられます。レプリカの冗長性は緊急性が最も低いですが、処理とリソースの解放（ディスクスペースなど）が最も速いです。
* `FORCE_REDUNDANT`状態。上記と同じです。

* HIGH

* `REPLICA_MISSING`状態で、ほとんどのレプリカが不足しています（例：3つのレプリカのうち2つが不足している）
* `VERSION_INCOMPLETE`状態で、ほとんどのレプリカがバージョン不足です
* `COLOCATE_MISMATCH`状態。コロケーションテーブルに関連するタブレットは、できるだけ早く修正されます。
* `COLOCATE_REDUNDANT`状態。

* NORMAL

* `REPLICA_MISSING`状態ですが、ほとんどのレプリカは生存しています（例：3つのレプリカのうち1つが不足している）
* `VERSION_INCOMPLETE`状態ですが、ほとんどのレプリカは完全なバージョンを持っています
* `REPLICA_RELOCATING`状態で、ほとんどのレプリカが再配置が必要です（例：2つのレプリカが再配置が必要）

* LOW

* `REPLICA_MISSING_IN_CLUSTER`状態
* `REPLICA_RELOCATING`状態ですが、ほとんどのレプリカは安定しています

### 手動で決定される優先度

システムは自動的にスケジューリングの優先度を決定します。しかし、ユーザーが特定のタブレットをより速く修理したいと考えることがあります。そのため、ユーザーが特定のテーブルやパーティションのタブレットを優先して修理するよう指定できるコマンドを提供しています。

ADMIN REPAIR TABLE tbl [PARTITION (p1, p2, ...)] ;

このコマンドは、問題のタブレットに`VERY_HIGH`優先度を指定し、最優先で修理されるようTCに指示します。

> 注意: このコマンドは修理が成功することを保証するものではなく、優先度はTSのスケジューリングによって変更されます。この情報は、リーダーFEが交代または再起動された際に失われます。

優先度の設定は、以下のコマンドでキャンセルできます。

ADMIN CANCEL REPAIR TABLE tbl [PARTITION (p1, p2, ...)] ;

### 優先度スケジューリング

優先度付けにより、深刻な損傷を受けたタブレットが最初に修理されます。しかし、高優先度の修理タスクが繰り返し失敗すると、低優先度のタスクがスケジュールされないままになる可能性があります。そのため、各タスクの状態に基づいて優先度を動的に調整し、全てのタスクがスケジュールされる機会を確保します。

* スケジューリングが5回連続で失敗する（例えば、リソースを確保できない、適切なソースや宛先を見つけられないなど）と、タスクは優先度を下げられます。
* タスクが30分間スケジュールされていない場合、優先度が上げられます。
* タスクの優先度は、5分以内に2回調整されることはありません。

初期の優先度レベルに重みを与えるため、`VERY_HIGH`優先度のタスクは最大`NORMAL`まで、`LOW`優先度のタスクは最大`HIGH`まで優先度を変更できます。優先度の調整は、ユーザーによって手動で設定された優先度のタスクにも適用されます。

## レプリカバランシング

StarRocksはクラスタ内で自動的にレプリカバランシングを行います。バランシングの主な考え方は、低負荷のノードにレプリカを作成し、高負荷のノードからレプリカを削除することです。同じクラスタ内の異なるBEノードには複数のストレージメディアが存在することがあります。バランシング後もタブレットを元のストレージメディアに保持するため、BEノードはストレージメディアに基づいて分類され、賢明に負荷バランシングがスケジュールされます。

また、レプリカバランシングは、同じタブレットのレプリカが同じホストのBEに配置されないように保証します。

### BEノードの負荷

ClusterLoadStatistics（CLS）はクラスタ内の各Backendの負荷バランスを示し、TabletSchedulerをトリガーしてクラスタのバランスを取ります。現在、`**Disk Utilization**`と`**Number of Replicas**`を使用して各BEの`loadScore`を計算しています。スコアが高いほど、BEの負荷が重いことを意味します。

`capacityCoefficient`と`replicaNumCoefficient`（合計で1）は、`Disk Utilization`と`Number of Replicas`の重み付け係数です。`capacityCoefficient`は実際のディスク使用率に応じて動的に調整されます。BEの全体的なディスク使用率が50%以下の場合、`capacityCoefficient`の値は0.5です。ディスク使用率が75%以上（FEの設定項目`capacity_used_percent_high_water`を介して設定可能）の場合、その値は1です。使用率が50%から75%の間の場合、重み係数は以下の式に基づいて滑らかに増加します：

`capacityCoefficient = 2 * disk utilization - 0.5`

この重み係数は、ディスク使用率が過度に高い場合に、このBackendの負荷スコアを高くし、できるだけ早くこのBEの負荷を軽減するようにします。

TabletSchedulerはCLSを毎分更新します。

### バランシングポリシー

TabletSchedulerは、各スケジューリングラウンドでLoadBalancerを通じてバランシングの候補となる健全なタブレットを特定数選択し、これらの候補タブレットに基づいて将来のスケジューリングを調整します。

## リソースコントロール

レプリカの修復とバランシングは、BE間でのコピーによって行われます。同じBE上で同時に実行されるタスクが多すぎると、IOの圧力が増加します。そのため、StarRocksはスケジューリング時に各ノードで実行できるタスクの数を制御します。リソースコントロールの最小単位はディスクです（`be.conf`で指定されたデータパス）。デフォルトでは、各ディスクにレプリカ修復用に2つのスロットが割り当てられます。クローンタスクはソースと宛先の各1つのスロットを占有します。ディスクのスロットが0の場合、それ以上のタスクは割り当てられません。このスロット数はFEのパラメータ`schedule_slot_num_per_path`で設定可能です。

さらに、デフォルトでは、各ディスクにレプリカバランシング用に2つのスロットが割り当てられます。これは、負荷の高いノードが修復タスクによって占有され、バランシングによってスペースを解放できない状況を防ぐためです。

## レプリカステータスの表示

レプリカのステータスは**リーダーFEノードにのみ存在します**。したがって、以下のコマンドはリーダーFEに直接接続して実行する必要があります。

### レプリカステータスの表示

1. グローバルステータスチェック  
    `SHOW PROC '/statistic';` コマンドを使用すると、クラスタ全体のレプリカステータスを表示できます。

    ```plaintext
    +----------+-----------------------------+----------+--------------+----------+-----------+------------+--------------------+-----------------------+
    | DbId     | DbName                      | TableNum | PartitionNum | IndexNum | TabletNum | ReplicaNum | UnhealthyTabletNum | InconsistentTabletNum |
    +----------+-----------------------------+----------+--------------+----------+-----------+------------+--------------------+-----------------------+
    | 35153636 | default_cluster:DF_Newrisk  | 3        | 3            | 3        | 96        | 288        | 0                  | 0                     |
    | 48297972 | default_cluster:PaperData   | 0        | 0            | 0        | 0         | 0          | 0                  | 0                     |
    | 5909381  | default_cluster:UM_TEST     | 7        | 7            | 10       | 320       | 960        | 1                  | 0                     |
    | Total    | 240                         | 10       | 10           | 13       | 416       | 1248       | 1                  | 0                     |
    +----------+-----------------------------+----------+--------------+----------+-----------+------------+--------------------+-----------------------+
    ```

    `UnhealthyTabletNum`列は、対応するデータベース内の不健全なタブレットの数を示します。`InconsistentTabletNum`列は、対応するデータベース内でレプリカが不整合状態にあるタブレットの数を示します。最後の`Total`行は、クラスタ全体の統計を示しています。通常、`UnhealthyTabletNum`と`InconsistentTabletNum`はゼロであるべきです。ゼロでない場合は、タブレットの情報をさらに確認することができます。上記のように、`UM_TEST`データベースに不健全な状態のタブレットが1つある場合、次のコマンドを使用してどのタブレットかを確認できます。

    `SHOW PROC '/statistic/5909381';`  
    ここで、`5909381`は対応するDbIdです。

    ```plaintext
    +------------------+---------------------+
    | UnhealthyTablets | InconsistentTablets |
    +------------------+---------------------+
    | [40467980]       | []                  |
    +------------------+---------------------+
    ```

    上記の結果は、特定の不健全なタブレットID（40467980）を示しています。次に、特定のタブレットの各レプリカのステータスを確認する方法を説明します。

2. テーブル（パーティション）レベルのステータスチェック  
    ユーザーは、次のコマンドを使用して特定のテーブルまたはパーティションのレプリカのステータスを確認できます。また、WHERE句を使用してステータスをフィルタリングすることもできます。例えば、`tbl1`の`p1`と`p2`パーティションのNORMALレプリカのステータスを表示するには、以下のコマンドを使用します。  
    `ADMIN SHOW REPLICA STATUS FROM tbl1 PARTITION (p1, p2) WHERE STATUS = "OK";`

    ```plaintext
    +----------+-----------+-----------+---------+-------------------+--------------------+------------------+------------+------------+-------+--------+--------+
    | TabletId | ReplicaId | BackendId | Version | LastFailedVersion | LastSuccessVersion | CommittedVersion | SchemaHash | VersionNum | IsBad | State  | Status |
    +----------+-----------+-----------+---------+-------------------+--------------------+------------------+------------+------------+-------+--------+--------+
    | 29502429 | 29502432  | 10006     | 2       | -1                | 2                  | 1                | -1         | 2          | false | NORMAL | OK     |
    | 29502429 | 36885996  | 10002     | 2       | -1                | -1                 | 1                | -1         | 2          | false | NORMAL | OK     |
    | 29502429 | 48100551  | 10007     | 2       | -1                | -1                 | 1                | -1         | 2          | false | NORMAL | OK     |
    | 29502433 | 29502434  | 10001     | 2       | -1                | 2                  | 1                | -1         | 2          | false | NORMAL | OK     |
    | 29502433 | 44900737  | 10004     | 2       | -1                | -1                 | 1                | -1         | 2          | false | NORMAL | OK     |
    | 29502433 | 48369135  | 10006     | 2       | -1                | -1                 | 1                | -1         | 2          | false | NORMAL | OK     |
    +----------+-----------+-----------+---------+-------------------+--------------------+------------------+------------+------------+-------+--------+--------+
    ```

    `IsBad = true` の場合、レプリカが破損していることを意味します。`Status` 列には追加情報が表示されます。
    `ADMIN SHOW REPLICA STATUS` コマンドは、主にレプリカのヘルスステータスを表示するために使用されます。以下のコマンドでユーザーは追加情報を表示することもできます。

    `SHOW TABLET FROM tbl1;`

    ```plaintext
    +----------+-----------+-----------+------------+---------+-------------+-------------------+-----------------------+------------------+----------------------+---------------+----------+----------+--------+-------------------------+--------------+----------------------+--------------+----------------------+----------------------+----------------------+
    | TabletId | ReplicaId | BackendId | SchemaHash | Version | VersionHash | LstSuccessVersion | LstSuccessVersionHash | LstFailedVersion | LstFailedVersionHash | LstFailedTime | DataSize | RowCount | State  | LstConsistencyCheckTime | CheckVersion |     CheckVersionHash | VersionCount | PathHash             | MetaUrl              | CompactionStatus     |
    +----------+-----------+-----------+------------+---------+-------------+-------------------+-----------------------+------------------+----------------------+---------------+----------+----------+--------+-------------------------+--------------+----------------------+--------------+----------------------+----------------------+----------------------+
    | 29502429 | 29502432  | 10006     | 1421156361 | 2       | 0           | 2                 | 0                     | -1               | 0                    | N/A           | 784      | 0        | NORMAL | N/A                     | -1           |     -1               | 2            | -5822326203532286804 | url                  | url                  |
    | 29502429 | 36885996  | 10002     | 1421156361 | 2       | 0           | -1                | 0                     | -1               | 0                    | N/A           | 784      | 0        | NORMAL | N/A                     | -1           |     -1               | 2            | -1441285706148429853 | url                  | url                  |
    | 29502429 | 48100551  | 10007     | 1421156361 | 2       | 0           | -1                | 0                     | -1               | 0                    | N/A           | 784      | 0        | NORMAL | N/A                     | -1           |     -1               | 2            | -4784691547051455525 | url                  | url                  |
    +----------+-----------+-----------+------------+---------+-------------+-------------------+-----------------------+------------------+----------------------+---------------+----------+----------+--------+-------------------------+--------------+----------------------+--------------+----------------------+----------------------+----------------------+
    ```

追加情報には、レプリカのサイズ、行数、バージョン数、レプリカが配置されているデータパスなどが含まれます。

> 注: `State` 列は、レプリカ自体のヘルスステータスではなく、特定のタスク（例：`CLONE`、`SCHEMA_CHANGE`、`ROLLUP` など）におけるレプリカのステータスを表します。

さらに、ユーザーは次のコマンドでレプリカが均等に分散されているかどうかを確認できます。  
`ADMIN SHOW REPLICA DISTRIBUTION FROM tbl1;`

  ```plaintext
  +-----------+------------+-------+---------+
  | BackendId | ReplicaNum | Graph | Percent |
  +-----------+------------+-------+---------+
  | 10000     | 7          |       | 7.29 %  |
  | 10001     | 9          |       | 9.38 %  |
  | 10002     | 7          |       | 7.29 %  |
  | 10003     | 7          |       | 7.29 %  |
  | 10004     | 9          |       | 9.38 %  |
  | 10005     | 11         | >     | 11.46 % |
  | 10006     | 18         | >     | 18.75 % |
  | 10007     | 15         | >     | 15.62 % |
  | 10008     | 13         | >     | 13.54 % |
  +-----------+------------+-------+---------+
  ```

情報には、各BEノード上のレプリカ数、パーセンテージ、および単純なグラフィカル表示が含まれます。

タブレットレベルのステータスチェック  

ユーザーは以下のコマンドで特定のタブレットのステータスを確認できます。例えば、ID 29502553 のタブレットのステータスを確認するには。  

`SHOW TABLET 29502553;`

  ```plaintext
  +------------------------+-----------+---------------+-----------+----------+----------+-------------+----------+--------+---------------------------------------------------------------------------+
  | DbName                 | TableName | PartitionName | IndexName | DbId     | TableId  | PartitionId | IndexId  | IsSync | DetailCmd                                                                 |
  +------------------------+-----------+---------------+-----------+----------+----------+-------------+----------+--------+---------------------------------------------------------------------------+
  | default_cluster:test   | test      | test          | test      | 29502391 | 29502428 | 29502427    | 29502428 | true   | SHOW PROC '/dbs/29502391/29502428/partitions/29502427/29502428/29502553'; |
  +------------------------+-----------+---------------+-----------+----------+----------+-------------+----------+--------+---------------------------------------------------------------------------+
  ```

上記はタブレットに対応するデータベース、テーブル、パーティション、インデックスなどの情報を示しています。ユーザーは `DetailCmd` のコマンドをコピーして詳細を確認できます。
    `SHOW PROC '/dbs/29502391/29502428/partitions/29502427/29502428/29502553';`

  ```plaintext
  +-----------+-----------+---------+-------------+-------------------+-----------------------+------------------+----------------------+---------------+------------+----------+----------+--------+-------+--------------+----------------------+----------+------------------+
  | ReplicaId | BackendId | Version | VersionHash | LstSuccessVersion | LstSuccessVersionHash | LstFailedVersion | LstFailedVersionHash | LstFailedTime | SchemaHash | DataSize | RowCount | State  | IsBad | VersionCount | PathHash             | MetaUrl  | CompactionStatus |
  +-----------+-----------+---------+-------------+-------------------+-----------------------+------------------+----------------------+---------------+------------+----------+----------+--------+-------+--------------+----------------------+----------+------------------+
  | 43734060  | 10004     | 2       | 0           | -1                | 0                     | -1               | 0                    | N/A           | -1         | 784      | 0        | NORMAL | false | 2            | -8566523878520798656 | url      | url              |
  | 29502555  | 10002     | 2       | 0           | 2                 | 0                     | -1               | 0                    | N/A           | -1         | 784      | 0        | NORMAL | false | 2            | 1885826196444191611  | url      | url              |
  | 39279319  | 10007     | 2       | 0           | -1                | 0                     | -1               | 0                    | N/A           | -1         | 784      | 0        | NORMAL | false | 2            | 1656508631294397870  | url      | url              |
  +-----------+-----------+---------+-------------+-------------------+-----------------------+------------------+----------------------+---------------+------------+----------+----------+--------+-------+--------------+----------------------+----------+------------------+
  ```

上記は対応するタブレットのすべてのレプリカを示しています。ここに示される内容は `SHOW TABLET FROM tbl1;` と同じです。しかし、ここでは特定のタブレットのすべてのレプリカのステータスを明確に確認できます。

### レプリカのタスクスケジュール

1. `SHOW PROC '/cluster_balance/pending_tablets';` を使用して、スケジュール待ちのタスクを表示します。

     ```plaintext
     +----------+--------+-----------------+---------+----------+----------+-------+---------+--------+----------+---------+---------------------+---------------------+---------------------+----------+------+-------------+---------------+---------------------+------------+---------------------+--------+---------------------+-------------------------------+
     | TabletId | Type   | Status          | State   | OrigPrio | DynmPrio | SrcBe | SrcPath | DestBe | DestPath | Timeout | Create              | LstSched            | LstVisit            | Finished | Rate | FailedSched | FailedRunning | LstAdjPrio          | VisibleVer | VisibleVerHash      | CmtVer | CmtVerHash          | ErrMsg                        |
     +----------+--------+-----------------+---------+----------+----------+-------+---------+--------+----------+---------+---------------------+---------------------+---------------------+----------+------+-------------+---------------+---------------------+------------+---------------------+--------+---------------------+-------------------------------+
     | 4203036  | REPAIR | REPLICA_MISSING | PENDING | HIGH     | LOW      | -1    | -1      | -1     | -1       | 0       | 2019-02-21 15:00:20 | 2019-02-24 11:18:41 | 2019-02-24 11:18:41 | N/A      | N/A  | 2           | 0             | 2019-02-21 15:00:43 | 1          | 0                   | 2      | 0                   | unable to find source replica |
     +----------+--------+-----------------+---------+----------+----------+-------+---------+--------+----------+---------+---------------------+---------------------+---------------------+----------+------+-------------+---------------+---------------------+------------+---------------------+--------+---------------------+-------------------------------+
     ```

      |   Field   | Description   |
      |-----------|---------------|
      | TabletId  | スケジュール待ちのタブレットのIDです。 |
      | Type      | タスクの種類です。REPAIRまたはBALANCEのいずれかです。 |
      | Status    | タブレットの現在のステータスです。例えば `REPLICA_MISSING`。 |
      | State     | このスケジュールタスクの状態です。値: `PENDING`/`RUNNING`/`FINISHED`/`CANCELLED`/`TIMEOUT`/`UNEXPECTED`。 |
      | OrigPrio  | 初期優先度です。 |
      | DynmPrio  | 動的優先度です。 |
      | SrcBe     | ソースBEノードのIDです。|
      | SrcPath   | ソースBEノードのパスです。|
      | DestBe    | 宛先BEノードのIDです。|
      | DestPath  | 宛先BEノードのパスです。|
      | Timeout   | タスクが正常にスケジュールされた場合、ここにタスクのタイムアウトが秒単位で表示されます。|
      | Create    | タスクが作成された時間です。|
      | LstSched  | タスクが最後にスケジュールされた時間です。|
      | LstVisit  | タスクが最後にアクセスされた時間です。「アクセスされた」とは、スケジューリング、タスク実行報告を指します。|
      | Finished  | タスクが完了した時間です。|
      | Rate      | クローンタスクのデータコピー率です。|
      | FailedSched | タスクスケジュールが失敗した回数です。|
      | FailedRunning| タスクの実行が失敗した回数です。|
      | LstAdjPrio | タスクの優先度が最後に調整された時間です。 |
      | CmtVer/CmtVerHash/VisibleVer/VisibleVerHash| クローンタスクを実行するために使用されるバージョン情報です。 |
      | ErrMsg    | タスクのスケジュールと実行時のエラーメッセージです。|

2. `SHOW PROC '/cluster_balance/running_tablets';` を使用して、実行中のタスクを表示します。
   ここでも同じプロパティが使用されます。詳細については `pending tablets` を参照してください。
3. `SHOW PROC '/cluster_balance/history_tablets';` を使用して、完了したタスクを表示します。
   デフォルトでは、最後の1000件の完了したタスクのみが保持されます。ここでも同じプロパティが使用されます。詳細は `pending tablets` を参照してください。`State` が `FINISHED` であれば、タスクが正常に完了したことを意味します。それ以外の場合は、失敗したタスクの理由を `ErrMsg` で確認してください。
