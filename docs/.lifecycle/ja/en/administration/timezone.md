---
displayed_sidebar: English
---

# タイムゾーンの設定

このトピックでは、タイムゾーンを設定する方法と、タイムゾーン設定の影響について説明します。

## セッションレベルのタイムゾーンまたはグローバルタイムゾーンを設定する

`time_zone` パラメータを使用して、StarRocksクラスタのセッションレベルのタイムゾーンまたはグローバルタイムゾーンを設定できます。

- セッションレベルのタイムゾーンを設定するには、`SET time_zone = 'xxx';` コマンドを実行します。セッションごとに異なるタイムゾーンを設定できます。FEとの接続が切断されると、タイムゾーン設定は無効になります。
- グローバルタイムゾーンを設定するには、`SET global time_zone = 'xxx';` コマンドを実行します。タイムゾーン設定はFEに保存され、FEとの接続が切断されても有効です。

> **注記**
>
> StarRocksにデータをロードする前に、StarRocksクラスタのグローバルタイムゾーンを `system_time_zone` パラメータの値と同じに変更してください。そうしないと、データロード後にDATE型のデータが不正確になります。`system_time_zone` パラメータは、FEをホストするマシンのタイムゾーンを指します。マシンが起動されると、そのタイムゾーンがこのパラメータの値として記録されます。このパラメータは手動で設定することはできません。

### タイムゾーンの形式

`time_zone` パラメータの値は大文字小文字を区別しません。このパラメータの値は以下の形式のいずれかにすることができます。

| **形式**     | **例**                                                  |
| -------------- | ------------------------------------------------------------ |
| UTC オフセット     | `SET time_zone = '+10:00';` `SET global time_zone = '-6:00';` |
| タイムゾーン名 | `SET time_zone = 'Asia/Shanghai';` `SET global time_zone = 'America/Los_Angeles';` |

タイムゾーンの形式についての詳細は、[tzデータベースタイムゾーンのリスト](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)を参照してください。

> **注記**
>
> CSTを除くタイムゾーンの略称はサポートされていません。`time_zone` の値に `CST` を設定した場合、StarRocksは `CST` を `Asia/Shanghai` に変換します。

### デフォルトのタイムゾーン

`time_zone` パラメータのデフォルト値は `Asia/Shanghai` です。

## タイムゾーン設定の確認

タイムゾーン設定を確認するには、以下のコマンドを実行します。

```plaintext
 SHOW VARIABLES LIKE '%time_zone%';
```

## タイムゾーン設定の影響

- タイムゾーンの設定は、SHOW LOADおよびSHOW BACKENDSステートメントによって返される時間値に影響します。しかし、CREATE TABLEステートメントで指定されたパーティション列がDATE型またはDATETIME型である場合、`LESS THAN`句で指定された値には影響しません。また、DATE型およびDATETIME型のデータにも影響しません。
- タイムゾーンの設定は、以下の関数の表示と保存に影響を与えます：
  - **from_unixtime**: 指定されたUTCタイムスタンプに基づいて、指定されたタイムゾーンの日付と時刻を返します。例えば、StarRocksクラスタのグローバルタイムゾーンが `Asia/Shanghai` の場合、`select FROM_UNIXTIME(0);` は `1970-01-01 08:00:00` を返します。
  - **unix_timestamp**: 指定されたタイムゾーンの日付と時刻に基づいてUTCタイムスタンプを返します。例えば、StarRocksクラスタのグローバルタイムゾーンが `Asia/Shanghai` の場合、`select UNIX_TIMESTAMP('1970-01-01 08:00:00');` は `0` を返します。
  - **curtime**: 指定されたタイムゾーンの現在時刻を返します。例えば、指定されたタイムゾーンの現在時刻が16:34:05であれば、`select CURTIME();` は `16:34:05` を返します。
  - **now**: 指定されたタイムゾーンの現在の日付と時刻を返します。例えば、指定されたタイムゾーンの現在の日時が2021-02-11 16:34:13であれば、`select NOW();` は `2021-02-11 16:34:13` を返します。
  - **convert_tz**: あるタイムゾーンの日付と時刻を別のタイムゾーンに変換します。例えば、`select CONVERT_TZ('2021-08-01 11:11:11', 'Asia/Shanghai', 'America/Los_Angeles');` は `2021-07-31 20:11:11` を返します。
