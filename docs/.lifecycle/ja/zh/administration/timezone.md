---
displayed_sidebar: Chinese
---

# タイムゾーンの設定

この文書では、タイムゾーンの設定方法とその影響について説明します。

## セッション/グローバルタイムゾーンの設定

`time_zone` パラメータを使用して StarRocks のタイムゾーンを設定し、セッションレベルかグローバルレベルのどちらで有効にするかを指定できます。

- セッションレベルのタイムゾーンを指定する場合は、`SET time_zone = 'xxx';` を実行します。異なるセッションで異なるタイムゾーンを指定できますが、FE との接続が切断されるとタイムゾーン設定は失効します。
- グローバルタイムゾーンを指定する場合は、`SET global time_zone = 'xxx';` を実行します。FE はこのタイムゾーン設定を永続化し、FE との接続が切断された後も設定は有効です。

> **説明**
>
> データをインポートする前に、StarRocks のグローバルタイムゾーンと FE をデプロイしたマシンのタイムゾーンが一致していることを確認する必要があります。そうでない場合、インポート後に DATE 型のデータに異常が発生する可能性があります。`system_time_zone` パラメータは FE をデプロイしたマシンのタイムゾーンを表しています。マシンが起動すると、マシンのタイムゾーンはこのパラメータの値に自動的に設定され、手動で変更することはできません。

### タイムゾーンの形式

タイムゾーン値は大文字と小文字を区別せず、以下の形式をサポートしています：

| **形式**     | **例**                                                       |
| ------------ | ------------------------------------------------------------ |
| UTC オフセット | `SET time_zone = '+10:00';` `SET global time_zone = '-6:00';` |
| 標準タイムゾーン形式 | `SET time_zone = 'Asia/Shanghai';` `SET global time_zone = 'America/Los_Angeles';` |

タイムゾーン値の形式に関する詳細は、[List of tz database time zones](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones) を参照してください。

> **説明**
>
> 略称タイムゾーン形式は CST のみをサポートしており、StarRocks は `CST` を標準タイムゾーン `Asia/Shanghai` に変換します。

### デフォルトタイムゾーン

`time_zone` パラメータのデフォルト値は `Asia/Shanghai` です。

## タイムゾーン設定の確認

タイムゾーン設定を確認するには、以下のコマンドを実行します。

```Plain_Text
 SHOW VARIABLES LIKE '%time_zone%';
```

## タイムゾーン設定の影響

- タイムゾーン設定は SHOW LOAD および SHOW BACKENDS ステートメントが返す時間値に影響しますが、CREATE TABLE ステートメントで DATE または DATETIME 型のパーティション列に `LESS THAN` 句で指定された値や、DATE または DATETIME 型のデータには影響しません。
- タイムゾーン設定に影響される関数には以下が含まれます：
  - **from_unixtime**：UTC のタイムスタンプを指定されたタイムゾーンの日時に変換します。例えば、グローバルタイムゾーンが `Asia/Shanghai` の場合、`select FROM_UNIXTIME(0);` は `1970-01-01 08:00:00` を返します。
  - **unix_timestamp**：指定されたタイムゾーンの日時を UTC のタイムスタンプに変換します。例えば、グローバルタイムゾーンが `Asia/Shanghai` の場合、`select UNIX_TIMESTAMP('1970-01-01 08:00:00');` は `0` を返します。
  - **curtime**：指定されたタイムゾーンの現在時刻を返します。例えば、あるタイムゾーンの現在時刻が 16:34:05 の場合、`select CURTIME();` は `16:34:05` を返します。
  - **now**：指定されたタイムゾーンの現在の日付と時刻を返します。例えば、あるタイムゾーンの現在の日付と時刻が 2021-02-11 16:34:13 の場合、`select NOW();` は `2021-02-11 16:34:13` を返します。
  - **convert_tz**：指定されたタイムゾーンの日時を別のタイムゾーンに変換します。例えば、`select CONVERT_TZ('2021-08-01 11:11:11', 'Asia/Shanghai', 'America/Los_Angeles');` を指定すると `2021-07-31 20:11:11` が返されます。
