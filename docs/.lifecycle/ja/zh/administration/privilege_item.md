---
displayed_sidebar: Chinese
---

# 権限項目

本文では、StarRocks で権限付与に使用できる権限項目とその意味について詳しく説明しています。[GRANT](../sql-reference/sql-statements/account-management/GRANT.md) および [REVOKE](../sql-reference/sql-statements/account-management/REVOKE.md) コマンドを使用して、ユーザーやロールに権限を付与および取り消すことができます。

> 注意：ここで紹介する権限項目はバージョン 3.0 から提供されており、アップグレード後の権限フレームワークや構文は旧システムと互換性がありません。3.0 バージョンの操作ガイドに従ってください。アップグレード後も、一部の操作を除き、旧システムでのほとんどの操作権限は維持されます。具体的な違いについては、文書の最後にあるアップグレードガイドを参照してください。

## 権限リスト

### システムレベルの権限 (SYSTEM)

| 権限                    | 用途                                                         |
| ----------------------- | ------------------------------------------------------------ |
| NODE                    | ノードの操作に使用されます。例えば、ノードの追加、削除、オフライン化などです。クラスターの安全を確保するため、この権限はユーザーやロールに直接付与することはできません。`cluster_admin` ロールにはこの権限があります。 |
| GRANT                   | ユーザー/ロールの作成、変更、ユーザー/ロールへの権限付与に使用されます。この権限もユーザーやロールに直接付与することはできません。`user_admin` ロールにはこの権限があります。 |
| CREATE RESOURCE GROUP   | リソースグループの作成に使用されます。                                                 |
| CREATE RESOURCE         | Spark Load や外部テーブルに使用するリソースを作成します。                           |
| CREATE EXTERNAL CATALOG | 外部カタログを作成します。                                      |
| PLUGIN                  | プラグインのインストールやアンインストールに使用されます。                                         |
| REPOSITORY              | リポジトリの作成、削除、閲覧に使用されます。                                       |
| BLACKLIST               | SQL ブラックリストの作成、削除、閲覧に使用されます。                                |
| FILE                    | ファイルの作成、削除、閲覧に使用されます。                                       |
| OPERATE                 | レプリカ、設定項目、変数、トランザクションなどの管理に使用されます。                      |
| CREATE GLOBAL FUNCTION  | グローバル UDF の作成に使用されます。                                           |
| CREATE STORAGE VOLUME   | リモートストレージシステム用のストレージボリュームを作成します。                     |

### リソースグループの権限 (RESOURCE GROUP)

| 権限  | 用途                                                         |
| ----- | ------------------------------------------------------------ |
| ALTER | 指定されたリソースグループに分類器を追加または削減します。 |
| DROP  | 指定されたリソースグループを削除します。                                             |
| ALL   | そのリソースグループに対するすべての権限を持ちます。                               |

### リソースの権限 (RESOURCE)

| 権限  | 用途                         |
| ----- | ---------------------------- |
| USAGE | そのリソースを使用します。      |
| ALTER | そのリソースを変更します。                 |
| DROP  | そのリソースを削除します。                 |
| ALL   | そのリソースに対するすべての権限を持ちます。 |

### ユーザーの権限 (USER)

| 権限        | 用途                                 |
| ----------- | ------------------------------------ |
| IMPERSONATE | ユーザー A がユーザー B の身分で操作を実行できるようにします。 |

### グローバルユーザー定義関数の権限 (GLOBAL FUNCTION)

| 権限  | 用途                             |
| ----- | -------------------------------- |
| USAGE | クエリでその関数を使用します。             |
| DROP  | その関数を削除します。                     |
| ALL   | その関数に対するすべての権限を持ちます。 |

### データカタログの権限 (CATALOG)

| オブジェクト                                             | 権限            | 用途                                       |
| ------------------------------------------------ | --------------- | ------------------------------------------ |
| CATALOG <br />(内部カタログ、デフォルト名は default_catalog) | USAGE           | 内部カタログを使用します。                    |
|                                                  | CREATE DATABASE | 内部カタログ内でデータベースを作成します。         |
|                                                  | ALL             | 内部カタログに対するすべての権限を持ちます。   |
| CATALOG (外部カタログ)                             | USAGE           | 外部カタログを使用し、内部のテーブルを閲覧します。      |
|                                                  | DROP            | 外部カタログを削除します。                    |
|                                                  | ALL             | その外部カタログに対するすべての権限を持ちます。 |

> 説明：StarRocks の内部データカタログは削除できません。

### データベースの権限 (DATABASE)

| 権限                     | 用途                                       |
| ------------------------ | ------------------------------------------ |
| ALTER                    | 指定されたデータベースの属性を設定、名前の変更、クォータの設定などを行います。 |
| DROP                     | データベースを削除します。                               |
| CREATE TABLE             | データベース内にテーブルを作成します。                         |
| CREATE VIEW              | ビューを作成します。                                 |
| CREATE FUNCTION          | 関数を作成します。                                 |
| CREATE MATERIALIZED VIEW | マテリアライズドビューを作成します。                             |
| ALL                      | そのデータベースに対するすべての権限を持ちます。             |

### テーブルの権限 (TABLE)

| 権限   | 用途                                             |
| ------ | ------------------------------------------------ |
| ALTER  | テーブルを変更したり、外部テーブルのメタデータをリフレッシュしたりします。             |
| DROP   | テーブルを削除します。                                         |
| SELECT | テーブルのデータをクエリします。                                   |
| INSERT | テーブルにデータをインポートします。                      |
| UPDATE | テーブルを更新します。                                         |
| EXPORT | StarRocks テーブルからデータをエクスポートします。                      |
| DELETE | 条件に基づいて特定のテーブルのデータを削除するか、特定のテーブルのデータをクリアします。 |
| ALL    | そのテーブルに対するすべての権限を持ちます。                       |

### ビューの権限 (VIEW)

| 権限   | 用途                         |
| ------ | ---------------------------- |
| SELECT | ビュー内のデータをクエリします。   |
| ALTER  | ビューの定義を変更します。         |
| DROP   | ロジカルビューを削除します。           |
| ALL    | そのビューに対するすべての権限を持ちます。 |

### マテリアライズドビューの権限 (MATERIALIZED VIEW)

| 権限    | 用途                                                         |
| ------- | ------------------------------------------------------------ |
| SELECT  | クエリ時にマテリアライズドビューのデータを参照し、クエリを高速化します。 |
| ALTER   | マテリアライズドビューを変更します。                                               |
| REFRESH | マテリアライズドビューをリフレッシュします。                                               |
| DROP    | マテリアライズドビューを削除します。                                               |
| ALL     | そのマテリアライズドビューに対するすべての権限を持ちます。                             |

### ライブラリレベルのユーザー定義関数の権限 (FUNCTION)

| 権限    | 用途                                                         |
| ------- | ------------------------------------------------------------ |
| USAGE | その関数を使用します。                 |
| DROP  | その関数を削除します。                 |
| ALL   | その関数に対するすべての権限を持ちます。 |

### ストレージボリュームの権限 (STORAGE VOLUME)

| 権限    | 用途                                                         |
| ------- | ------------------------------------------------------------ |
| ALTER | ストレージボリュームの認証属性、コメント、または状態（有効）を変更します。      |
| DROP  | 特定のストレージボリュームを削除します。                 |
| USAGE | 特定のストレージボリュームの情報を表示し、デフォルトのストレージボリュームとして設定します。   |
| ALL   | そのストレージボリュームに対するすべての権限を持ちます。 |

## アップグレードに関する注意事項

バージョン 2.x から 3.0 にアップグレードする際、権限システムのアップグレードにより、一部の操作が実行できなくなる可能性があります。具体的には以下の通りです：

| **操作**       | **関連コマンド**                    | **アップグレード前**                                                   | **アップグレード後**                                                   |
| -------------- | ------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| テーブルの変更         | ALTER TABLE，CANCEL ALTER TABLE | テーブルまたはそのデータベースに `LOAD_PRIV` 権限があれば `ALTER TABLE`、`CANCEL ALTER TABLE` 操作を実行できます | 対応するテーブルに ALTER 権限が必要です。              |
| 外部テーブルのリフレッシュ       | REFRESH EXTERNAL TABLE          | 外部テーブルに `LOAD_PRIV` 権限があればリフレッシュできます。              | 対応する外部テーブルに ALTER 権限が必要です。        |
| バックアップとリストア     | BACKUP，RESTORE                 | データベースに `LOAD_PRIV` 権限があれば、そのデータベースとその下の任意のテーブルをバックアップおよびリストアできます。 | 管理者はユーザーに再度権限を付与する必要があります。これにより、ユーザーは `BACKUP` および `RESTORE` 操作を実行できます。 |
| 削除後の復元     | RECOVER データベースまたはテーブル            | 対応するデータベースまたはテーブルに `ALTER_PRIV`、`CREATE_PRIV`、`DROP_PRIV` 権限があれば復元できます。 | データベースを復元するには default_catalog に CREATE DATABASE 権限が必要です。また、対応するデータベースに CREATE TABLE 権限と対応するテーブルに DROP 権限が必要です。 |
| ユーザーの作成、変更 | CREATE USER，ALTER USER         | データベースに `GRANT_PRIV` 権限があればユーザーを作成および変更できます。           | `CREATE USER` および `ALTER USER` 操作を実行するには `user_admin` ロールが必要です。 |
| 権限の付与と取り消し | GRANT，REVOKE                   | 各オブジェクトに `GRANT_PRIV` 権限があれば、対応するオブジェクトの権限を他のユーザーやロールに付与できます。| アップグレード後も、そのオブジェクトに対して既に持っている権限を他のユーザーやロールに付与することができます。<br />新しい権限システムでは：<ul><li>`user_admin` ロールを持つユーザーのみが任意の権限を任意のユーザーやロールに付与できます。</li><li>`WITH GRANT OPTION` を含む権限付与文を使用する場合、その文に関連する権限を他のユーザーやロールに付与できます。</li></ul>|

バージョン 2.x では、StarRocks のロール実装は完全ではありませんでした。ロールをユーザーに付与すると、StarRocks はロールのすべての権限を直接ユーザーに付与し、ロール自体をユーザーに付与しませんでした。そのため、旧バージョンでは StarRocks のユーザーとロールには直接の従属関係はありませんでした。

アップグレード後、StarRocks は各ユーザーの権限をアップグレードします。旧ロールは引き続き存在しますが、ユーザーとの従属関係はありません。新しい RBAC を使用したい場合は、新しい GRANT 操作に従って権限を付与してください。
