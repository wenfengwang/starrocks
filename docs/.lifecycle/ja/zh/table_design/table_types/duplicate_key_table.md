---
displayed_sidebar: Chinese
---

# 明細モデル

明細モデルはデフォルトのテーブル作成モデルです。テーブル作成時に特定のモデルを指定しない場合、デフォルトで明細タイプのテーブルが作成されます。

テーブル作成時には、ソートキーを定義することができます。クエリのフィルタ条件にソートキーが含まれている場合、StarRocksはデータを迅速にフィルタリングし、クエリの効率を向上させることができます。明細モデルはログデータ分析などのシナリオに適しており、新しいデータの追加をサポートし、過去のデータの変更はサポートしていません。

## 適用シナリオ

- 原始データの分析、例えば原始ログや原始操作記録など。

- クエリ方法が柔軟で、プリアグリゲーションされた分析方法に限定される必要がありません。

- ログデータや時系列データをインポートする場合、主な特徴は旧データが更新されず、新しいデータのみが追加されることです。

## テーブル作成

例えば、特定の時間範囲内の特定のタイプのイベントデータを分析する必要がある場合、イベント時間（`event_time`）とイベントタイプ（`event_type`）をソートキーとして使用できます。

このビジネスシナリオでは、テーブル作成のSQLは以下の通りです：

```SQL
CREATE TABLE IF NOT EXISTS detail (
    event_time DATETIME NOT NULL COMMENT "eventのdatetime",
    event_type INT NOT NULL COMMENT "eventのtype",
    user_id INT COMMENT "userのid",
    device_code INT COMMENT "deviceのcode",
    channel INT COMMENT ""
)
DUPLICATE KEY(event_time, event_type)
DISTRIBUTED BY HASH(user_id)
PROPERTIES (
"replication_num" = "3"
);
```

> **注意**
>
> - テーブル作成時には `DISTRIBUTED BY HASH` 句を使用してバケットキーを指定する必要があります。そうしないとテーブル作成に失敗します。バケットキーの詳細については、[バケット](../Data_distribution.md#バケット)を参照してください。
> - 2.5.7バージョン以降、StarRocksはテーブル作成とパーティション追加時に自動的にバケット数（BUCKETS）を設定する機能をサポートしています。手動でバケット数を設定する必要はありません。詳細は、[バケット数の決定](../Data_distribution.md#バケット数の決定)を参照してください。

## 使用説明

- ソートキーに関する説明：
  - テーブル作成文では、ソートキーは他の列よりも前に定義する必要があります。
  - ソートキーは `DUPLICATE KEY` で明示的に定義することができます。この例では、ソートキーは `event_time` と `event_type` です。
    > 指定されていない場合、デフォルトでテーブルの最初の3列がソートキーとして選択されます。

  - 明細モデルのソートキーは、一部または全ての次元列であることができます。

- テーブル作成時には、指標列に対して BITMAP、Bloom Filter などのインデックスを作成することができます。

## 次のステップ

テーブル作成が完了したら、様々なインポートジョブを作成して、データをテーブルにインポートすることができます。具体的なインポート方法については、[インポート概要](../../loading/Loading_intro.md)を参照してください。

> - インポート時には、新しいデータの追加をサポートし、過去のデータの変更はサポートしていません。
> - 完全に同一のデータを2行インポートした場合、明細モデルではこれらを2行として扱い、1行としては扱いません。
