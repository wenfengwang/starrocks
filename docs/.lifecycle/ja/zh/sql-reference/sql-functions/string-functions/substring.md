---
displayed_sidebar: Chinese
---

# substr、substring

## 機能

文字列 (`str`) の指定された位置 (`pos`) から指定された長さ (`len`) の文字を切り取る。

- `len` パラメータが指定された場合、位置 `pos` から長さ `len` の部分文字列を返します。
- `len` パラメータが指定されていない場合、位置 `pos` から始まるすべての文字を返します。

## 文法

```Haskell
VARCHAR substr(VARCHAR str, INT pos[, INT len]);
```

## パラメータ説明

- `str`: 必須、サポートされるデータタイプは VARCHAR です。

- `pos`: 必須、サポートされるデータタイプは INT です。
  - `pos` には負の値を使用できます。この場合、文字列 `str` の末尾から右から左へ `pos` 文字目から始まります。例2を参照してください。
  - `pos` の値が 0 の場合、空文字列を返します。
  - 指定された開始位置が文字列の長さを超えている場合、空文字列を返します。例3を参照してください。

  > 注：文字列の最初の文字の位置は 1 です。

- `len`: オプション、サポートされるデータタイプは INT です。指定されていない場合、デフォルトで `pos` 以降のすべての文字を返します。返すべき文字の数が実際に一致する文字数を超えている場合、一致するすべての文字を返します。例4を参照してください。

## 戻り値の説明

戻り値のデータタイプは VARCHAR です。

## 例

```Plain Text
-- "starrocks" の文字列から3番目の文字 "a" から始まるすべての文字を返します。文字の長さは指定されていません。
mysql> select substr("starrocks",3);
+------------------------+
| substr('starrocks', 3) |
+------------------------+
| arrocks                |
+------------------------+
1 row in set (0.00 sec)

-- "starrocks" の文字列から右から左へ2番目の文字 "k" から始まるすべての文字を返します。文字の長さは指定されていません。
mysql> select substring("starrocks",-2);
+----------------------------+
| substring('starrocks', -2) |
+----------------------------+
| ks                         |
+----------------------------+
1 row in set (0.00 sec)

-- "apple" の文字列で指定された位置 8 は文字列の長さを超えているため、空文字列を返します。
MySQL > select substring("apple", 8, 2);
+--------------------------------+
| substring('apple', 8, 2)       |
+--------------------------------+
|                                |
+--------------------------------+

-- "apple" の文字列から最初の文字から始まる 9 文字を返します。9 は一致する文字数を超えているため、一致するすべての文字を返します。
MySQL > select substring("apple", 1, 9);
+--------------------------+
| substring('apple', 1, 9) |
+--------------------------+
| apple                    |
+--------------------------+
```
