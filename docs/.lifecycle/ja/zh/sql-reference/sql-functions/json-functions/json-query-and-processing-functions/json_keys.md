---
displayed_sidebar: Chinese
---

# json_keys

## 機能

JSONオブジェクトのすべての最上位のメンバー（キー）を配列として返します。`path`が指定されている場合は、`path`にマッチする最上位のメンバーを配列として返します。

## 文法

```SQL
json_keys(json_doc[, path])
```

## パラメータ説明

- `json_doc`：JSON文字列、必須。JSONオブジェクト（object）でなければなりません。

- `path`：パス式、オプション。VARCHAR型を取ります。`path`は通常`$`記号で始まり、`.`をパスの区切りとして使用し、`[]`は配列のインデックスを表し、0から始まります。

## 戻り値の説明

JSON ARRAY型の値を返します。

入力されたJSONオブジェクトが空の場合は、空の配列を返します。

`json_doc`がJSONオブジェクトでないか、指定されたパスが存在しない場合は`NULL`を返します。

`json_doc`がJSONオブジェクトを含む配列で、そのオブジェクトが`path`で指定された場合は、通常通り値を返します。例5を参照してください。

## 例

例1：JSONオブジェクトが空のオブジェクトの場合、空の配列を返します。

```Plain
SELECT JSON_KEYS('{}');
+-----------------+
| json_keys('{}') |
+-----------------+
| []              |
+-----------------+
```

例2：JSONオブジェクトのすべての最上位キーを配列として返します。

```Plain
SELECT JSON_KEYS('{"a": 1, "b": 2, "c": 3}');
+---------------------------------------+
| json_keys('{"a": 1, "b": 2, "c": 3}') |
+---------------------------------------+
| ["a", "b", "c"]                       |
+---------------------------------------+
```

例3：指定されたパスの下のすべての最上位キーを配列として返します。

```Plain
SELECT JSON_KEYS('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.c');
+---------------------------------------------------------------------+
| json_keys('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.c') |
+---------------------------------------------------------------------+
| ["d", "e", "f"]                                                     |
+---------------------------------------------------------------------+
```

例4：指定されたパスが存在しない場合、NULLを返します。

```JSON
SELECT JSON_KEYS('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.e');
+---------------------------------------------------------------------+
| json_keys('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.e') |
+---------------------------------------------------------------------+
| NULL                                                                |
+---------------------------------------------------------------------+
```

例5：入力された文字列がJSONオブジェクトでなく、`path`が指定されていない場合、NULLを返します。

```JSON
SELECT JSON_KEYS('[1, 2, {"a": 1, "b": 2}]');
+---------------------------------------+
| json_keys('[1, 2, {"a": 1, "b": 2}]') |
+---------------------------------------+
| NULL                                  |
+---------------------------------------+
```

例6：入力された文字列がJSONオブジェクトを含む配列で、そのオブジェクトがパスと一致する場合、正常に値を返します。

```JSON
SELECT JSON_KEYS('[0, 1, {"a": 1, "b": 2}]', '$[2]');
+-----------------------------------------------+
| json_keys('[0, 1, {"a": 1, "b": 2}]', '$[2]') |
+-----------------------------------------------+
| ["a", "b"]                                    |
+-----------------------------------------------+
```
