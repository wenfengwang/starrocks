---
displayed_sidebar: Chinese
---

# get_json_string

## 機能

`json_str` 内の `json_path` で指定された文字列を解析し取得します。`json_str` または `json_path` の形式が正しくない場合、または一致する項目が見つからない場合は、NULL を返します。この関数の別名は `get_json_object` です。

## 文法

```Haskell
VARCHAR get_json_string(VARCHAR json_str, VARCHAR json_path)
```

## パラメータ説明

- `json_str`: JSON 文字列で、対応するデータ型は VARCHAR です。

- `json_path`: 指定された解析パスで、対応するデータ型は VARCHAR です。`json_path` は通常 `$` 記号を先頭に使用し、`.` をパスの区切り文字として使用し、`[]` で配列のインデックスを表します。インデックスは 0 から始まります。

   例：`$."my.key"[1]` は `my.key` に対応するデータの2番目の値を取得することを意味します。

## 戻り値の説明

戻り値のデータ型は VARCHAR です。オブジェクトが見つからない場合は、NULL を返します。

## 例

例1：単一の文字列から "k1" に対応する値を取得します。

```Plain Text
MySQL > SELECT get_json_string('{"k1":"v1", "k2":"v2"}', "$.k1");
+---------------------------------------------------+
| get_json_string('{"k1":"v1", "k2":"v2"}', '$.k1') |
 +---------------------------------------------------+
| v1                                                |
+---------------------------------------------------+
```

例2：文字列の配列から、最初の文字列にある `a` に対応する値を取得します。

```Plain Text
MySQL > SELECT get_json_object('[{"a":"123", "b": "456"},{"a":"23", "b": "56"}]', '$[0].a');
+------------------------------------------------------------------------------+
| get_json_object('[{"a":"123", "b": "456"},{"a":"23", "b": "56"}]', '$[0].a') |
+------------------------------------------------------------------------------+
| 123                                                                          |
+------------------------------------------------------------------------------+
```

例3：`"my.key"` に対応する配列の2番目の要素を取得します。

```Plain Text
MySQL > SELECT get_json_string('{"k1":"v1", "my.key":["e1", "e2", "e3"]}', '$."my.key"[1]');
+------------------------------------------------------------------------------+
| get_json_string('{"k1":"v1", "my.key":["e1", "e2", "e3"]}', '$."my.key"[1]') |
+------------------------------------------------------------------------------+
| e2                                                                           |
+------------------------------------------------------------------------------+
```

例4：2階層のパス `k1.key` -> `k2` の配列から最初の要素を取得します。

```Plain Text
MySQL > SELECT get_json_string('{"k1.key":{"k2":["v1", "v2"]}}', '$."k1.key".k2[0]');
+-----------------------------------------------------------------------+
| get_json_string('{"k1.key":{"k2":["v1", "v2"]}}', '$."k1.key".k2[0]') |
+-----------------------------------------------------------------------+
| v1                                                                    |
+-----------------------------------------------------------------------+
 ```
