---
displayed_sidebar: Chinese
---

# to_binary

## 機能

指定されたバイナリ形式 (`binary_type`) に基づいて、VARCHAR 文字列をバイナリ型に変換します。サポートされるバイナリ形式には Hex、Base64、UTF-8 が含まれます。指定されていない場合のデフォルトは Hex です。

この関数はバージョン 3.0 からサポートされています。

## 文法

```Haskell
to_binary(str[, binary_type])
```

## パラメータ説明

- `str`: 必須、変換される文字列、VARCHAR 型。
- `binary_type`: オプション、指定されたバイナリ形式、VARCHAR 型。有効な値は `hex`、`encode64`、`utf8` です。

  - `hex` (デフォルト値): この関数は入力文字列を十六進数文字列として処理します（'0123456789abcdef'）、例えば `"abab"` は `x'abab'` に変換されます。入力値が不正な場合は、例外を投げるのではなく空の binary を返します。`hex` 形式では、この関数は大文字と小文字を区別しません。
  - `encode64`: この関数は入力文字列を Base64 文字列として処理し、例えば `"YWJhYg=="` は `x'abab'` にデコードされます。入力値が不正な場合は、例外を投げるのではなく空の binary を返します。
  - `utf8`: この関数は入力文字列をそのままバイナリ型に変換し、何の変換処理も行いません。

## 戻り値の説明

VARBINARY 型のバイナリ数値を返します。

## 例

以下の例では、MySQL クライアントを起動する際に `--binary-as-hex` オプションを追加し、BINARY データをデフォルトで `hex` 形式で表示します。

```Plain
mysql> select to_binary('abab', 'hex');
+----------------------------------------------------+
| to_binary('ABAB', 'hex')                           |
+----------------------------------------------------+
| 0xABAB                                             |
+----------------------------------------------------+
1 row in set (0.01 sec)

mysql> select to_binary('U1RBUlJPQ0tT', 'encode64');
+------------------------------------------------------------------------------+
| to_binary('U1RBUlJPQ0tT', 'encode64')                                        |
+------------------------------------------------------------------------------+
| 0x53544152524F434B53                                                         |
+------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> select to_binary('STARROCKS', 'utf8');
+----------------------------------------------------------------+
| to_binary('STARROCKS', 'utf8')                                 |
+----------------------------------------------------------------+
| 0x53544152524F434B53                                           |
+----------------------------------------------------------------+
1 row in set (0.00 sec)

-- 入力値が不正な場合、空の binary を返します。
mysql> select to_binary('U1RBUlJPQ0tT', 'hex');
+--------------------------------------------------------------------+
| to_binary('U1RBUlJPQ0tT', 'hex')                                   |
+--------------------------------------------------------------------+
| 0x                                                                 |
+--------------------------------------------------------------------+
1 row in set (0.00 sec)

```

## 関連文書

- [from_binary](from_binary.md)
- [BINARY/VARBINARY](../../sql-statements/data-types/BINARY.md)
