---
displayed_sidebar: Chinese
---

# array_contains_all

## 機能

配列`arr1`が配列`arr2`の全ての要素を含んでいるかどうかをチェックし、`arr2`が`arr1`のサブセットである場合は`1`を、そうでない場合は`0`を返します。

この関数はバージョン2.4からサポートされています。

## 文法

```Haskell
BOOLEAN array_contains_all(arr1, arr2)
```

## パラメータ説明

`arr1`と`arr2`: 比較する二つの配列です。上記の文法は`arr2`が`arr1`のサブセットかどうかをチェックします。

`arr1`と`arr2`の要素のデータ型は一致している必要があります。StarRocksがサポートする配列要素のデータ型については、[ARRAY](../../sql-statements/data-types/Array.md)を参照してください。

## 戻り値の説明

BOOLEAN型の値を返します。

`arr2`が`arr1`のサブセットである場合は`1`を、そうでない場合は`0`を返します。

`arr1`または`arr2`がNULLの場合はNULLを返します。

## 使用説明

- 配列要素に`null`が含まれている場合、システムは通常の値として処理します。

- 空の配列は、すべての配列のサブセットとしてデフォルトで扱われます。

- 二つの配列の要素の順序は一致している必要はありません。

## 例

1. テーブル`t1`を作成し、データを挿入します。

    ```SQL
    CREATE TABLE t1 (
        c0 INT,
        c1 ARRAY<INT>,
        c2 ARRAY<INT>
    ) ENGINE=OLAP
    DUPLICATE KEY(c0)
    DISTRIBUTED BY HASH(c0);

    INSERT INTO t1 VALUES
        (1,[1,2,3],[1,2]),
        (2,[1,2,3],[1,4]),
        (3,NULL,[1]),
        (4,[1,2,null],NULL),
        (5,[1,2,null],[null]),
        (6,[2,3],[]);
    ```

2. テーブルのデータを照会します。

    ```Plain
    SELECT * FROM t1 ORDER BY c0;
    +------+------------+----------+
    | c0   | c1         | c2       |
    +------+------------+----------+
    |    1 | [1,2,3]    | [1,2]    |
    |    2 | [1,2,3]    | [1,4]    |
    |    3 | NULL       | [1]      |
    |    4 | [1,2,null] | NULL     |
    |    5 | [1,2,null] | [null]   |
    |    6 | [2,3]      | []       |
    +------+------------+----------+
    ```

3. `c2`の各行が`c1`のサブセットかどうかをチェックします。

    ```Plaintext
    SELECT c0, c1, c2, array_contains_all(c1, c2) FROM t1 ORDER BY c0;
    +------+------------+----------+----------------------------+
    | c0   | c1         | c2       | array_contains_all(c1, c2) |
    +------+------------+----------+----------------------------+
    |    1 | [1,2,3]    | [1,2]    |                          1 |
    |    2 | [1,2,3]    | [1,4]    |                          0 |
    |    3 | NULL       | [1]      |                       NULL |
    |    4 | [1,2,null] | NULL     |                       NULL |
    |    5 | [1,2,null] | [null]   |                          1 |
    |    6 | [2,3]      | []       |                          1 |
    +------+------------+----------+----------------------------+
    ```

    戻り値の説明：

    `c0`が1の場合、`c2`は`c1`のサブセットであり、1を返します。

    `c0`が2の場合、`c2`は`c1`のサブセットではないため、0を返します。

    `c0`が3の場合、`c1`はNULLであり、`c0`が4の場合、`c2`はNULLであるため、どちらもNULLを返します。

    `c0`が5の場合、両方の配列に`null`が含まれているが、システムは通常の値として処理し、1を返します。

    `c0`が6の場合、`c2`は空の配列であり、すべての配列のサブセットとしてデフォルトで扱われるため、1を返します。
