---
displayed_sidebar: Chinese
---

# date_trunc

## 機能

指定された精度レベルで日時を切り捨てる。

StarRocks は `year()`、`quarter()`、`month()`、`week()`、`day()`、`hour()` などの関数を提供して、特定の部分を抽出する。

## 文法

```Haskell
DATETIME date_trunc(VARCHAR fmt, DATETIME|DATE datetime)
```

## パラメータ説明

- `datetime`: 切り捨てる日時。DATETIME または DATE 型。日付と時刻は実在する必要があり、そうでなければ NULL を返す。例えば '2021-02-29 11:12:13' は存在しない日付であり、計算時には NULL を返す。

- `fmt`: 精度レベル、つまり `datetime` をどの時間単位に切り捨てるか。VARCHAR 型の定数である。
  
  `fmt` の値は以下の表に示される時間単位でなければならない。値が正しくない場合はエラーを返す。

  `datetime` が DATE 型の場合、`fmt` は `year`、`quarter`、`month`、`week`、`day` のみをサポートし、他の粒度に設定されている場合はエラーを返す。例五を参照。

| fmt の値 | 意味                                   |
| -------- | -------------------------------------- |
| second   | 秒単位に切り捨て。                     |
| minute   | 分単位に切り捨て、秒はゼロになる。     |
| hour     | 時単位に切り捨て、分と秒はゼロになる。 |
| day      | 日単位に切り捨て、時間はゼロになる。   |
| week     | 週の最初の日に切り捨て、時間はゼロになる。 |
| month    | 月の最初の日に切り捨て、時間はゼロになる。 |
| quarter  | 四半期の最初の日に切り捨て、時間はゼロになる。 |
| year     | 年の最初の日に切り捨て、時間はゼロになる。 |

## 戻り値の説明

DATETIME 型の値を返す。

## 例

例一：入力された時間を分単位で切り捨てる。

```Plain
select date_trunc("minute", "2020-11-04 11:12:13");
+---------------------------------------------+
| date_trunc('minute', '2020-11-04 11:12:13') |
+---------------------------------------------+
| 2020-11-04 11:12:00                         |
+---------------------------------------------+
```

例二：入力された時間を時単位で切り捨てる。

```Plain
select date_trunc("hour", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('hour', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-11-04 11:00:00                       |
+-------------------------------------------+
```

例三：入力された時間を週の最初の日に切り捨てる。

```Plain
select date_trunc("week", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('week', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-11-02 00:00:00                       |
+-------------------------------------------+
```

例四：入力された時間を年の最初の日に切り捨てる。

```plain
select date_trunc("year", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('year', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-01-01 00:00:00                       |
+-------------------------------------------+
```

例五：DATE 型で `fmt` を `hour` に設定した場合、エラーが返される。

```plain
select date_trunc("hour", cast("2020-11-04" as date));

ERROR 1064 (HY000): Getting analyzing error from line 1, column 26 to line 1, column 51. Detail message: date_trunc function can't support argument other than year|quarter|month|week|day.
```
