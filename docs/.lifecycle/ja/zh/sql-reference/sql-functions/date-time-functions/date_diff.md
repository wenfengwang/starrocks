---
displayed_sidebar: Chinese
---

# date_diff

## 機能

指定された時間単位で2つの日付の差を返します。この関数は `unit` で指定された時間単位で `expr1 - expr2` の差を返します。例えば `date_diff('second', '2010-11-30 23:59:59', '2010-11-30 20:58:59')` は秒単位でこれら2つの日付の差を返します。

この関数はバージョン3.1からサポートされています。[datediff](./datediff.md) との違いは、datediff が時間単位 `unit` を指定できないことです。

## 文法

```Haskell
BIGINT DATE_DIFF(VARCHAR unit, DATETIME expr1, DATETIME expr2)
```

## パラメータ説明

- `unit`：差の時間単位で、必須です。`unit` の値は `year`, `quarter`, `month`, `week`, `day`, `hour`, `minute`, `second`, `millisecond` でなければなりません。
- `expr1`, `expr2`：比較する2つの日付値で、必須です。サポートされているデータ型は DATETIME と DATE です。

## 戻り値の説明

BIGINT 型の値を返します。

## 使用説明

- `expr1` が `expr2` より早い場合、負の値を返します。
- `unit` が指定された単位を超える場合、エラーを返します。
- 入力パラメータのいずれかが NULL の場合、NULL を返します。
- 指定された日付が存在しない場合、例えば `2022-11-31` のような場合、NULL を返します。

## 例

```Plain Text
mysql> select date_diff('second', '2010-11-30 23:59:59', '2010-11-30 20:58:59');
+-------------------------------------------------------------------+
| date_diff('second', '2010-11-30 23:59:59', '2010-11-30 20:58:59') |
+-------------------------------------------------------------------+
|                                                             10860 |

mysql> select date_diff('minute', '2010-11-30 23:59:59', '2010-11-30 20:58:59');
+-------------------------------------------------------------------+
| date_diff('minute', '2010-11-30 23:59:59', '2010-11-30 20:58:59') |
+-------------------------------------------------------------------+
|                                                               181 |
+-------------------------------------------------------------------+

mysql> select date_diff('hour', '2010-11-30 23:59:59', '2010-11-30 20:58:59');
+-----------------------------------------------------------------+
| date_diff('hour', '2010-11-30 23:59:59', '2010-11-30 20:58:59') |
+-----------------------------------------------------------------+
|                                                                3 |
+-----------------------------------------------------------------+

mysql> select date_diff('millisecond', '2010-11-30 23:59:59', '2010-11-30 20:58:59');
+------------------------------------------------------------------------+
| date_diff('millisecond', '2010-11-30 23:59:59', '2010-11-30 20:58:59') |
+------------------------------------------------------------------------+
|                                                               10860000 |
+------------------------------------------------------------------------+
```

## 関連参照

[datediff](./datediff.md)
