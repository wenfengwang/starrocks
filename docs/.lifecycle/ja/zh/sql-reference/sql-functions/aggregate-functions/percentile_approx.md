---
displayed_sidebar: Chinese
---

# percentile_approx

## 機能

p番目のパーセンタイルの近似値を返します。

> この関数は固定サイズのメモリを使用するため、高カーディナリティの列に対してより少ないメモリを使用でき、tp99などの統計値の計算に使用できます。

## 文法

```Haskell
PERCENTILE_APPROX(expr, p[, compression])
```

## パラメータ説明

`expr`: 選択された式。

`p`: サポートされるデータ型はDOUBLEで、pの値は0から1の間です。

`compression`: オプションのパラメータで、設定可能な範囲は[2048, 10000]で、値が大きいほど精度が高く、メモリの消費が大きく、計算時間が長くなります。このパラメータが指定されていないか、[2048, 10000]の範囲外に設定された場合、デフォルト値10000で実行されます。サポートされるデータ型はDOUBLEです。

## 戻り値の説明

戻り値は数値型です。

## 例

```plain text
MySQL > select `table`, percentile_approx(cost_time,0.99)
from log_statis
group by `table`;
+----------+--------------------------------------+
| table    | percentile_approx(`cost_time`, 0.99) |
+----------+--------------------------------------+
| test     |                                54.22 |
+----------+--------------------------------------+

MySQL > select `table`, percentile_approx(cost_time,0.99, 4096)
from log_statis
group by `table`;
+----------+----------------------------------------------+
| table    | percentile_approx(`cost_time`, 0.99, 4096.0) |
+----------+----------------------------------------------+
| test     |                                        54.21 |
+----------+----------------------------------------------+
```
