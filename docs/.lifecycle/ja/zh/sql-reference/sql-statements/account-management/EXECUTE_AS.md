---
displayed_sidebar: Chinese
---

# EXECUTE AS

## 機能

指定されたユーザーの身分で操作を実行する権限（IMPERSONATE）を取得した後、EXECUTE AS ステートメントを使用して現在のセッションの実行コンテキストをその指定ユーザーに切り替えることができます。この機能はバージョン 2.4 からサポートされています。

## 構文

```SQL
EXECUTE AS user WITH NO REVERT
```

## パラメータ説明

`user`：指定されたユーザーは既に存在するユーザーでなければなりません。

## 注意事項

- 現在ログインしているユーザー（EXECUTE AS ステートメントを呼び出すユーザー）は、指定されたユーザーにIMPERSONATEする権限を持っている必要があります。
- EXECUTE AS ステートメントには WITH NO REVERT 句を含める必要があり、これは現在のセッションが終了するまで、実行コンテキストを元のログインユーザーに戻すことができないことを意味します。

## 例

セッションの実行コンテキストをユーザー `test2` に切り替えます。

```SQL
EXECUTE AS test2 WITH NO REVERT;
```

ステートメントの実行に成功すると、`select current_user()` コマンドを使用して現在のユーザーを取得できます。

```plain
select current_user();
+-----------------------------+
| CURRENT_USER()              |
+-----------------------------+
| 'default_cluster:test2'@'%' |
+-----------------------------+
```
