---
displayed_sidebar: Chinese
---

# SHOW EXPORT

## 機能

指定された条件に合致するエクスポートジョブの実行状況を照会します。

## 構文

```SQL
SHOW EXPORT
[ FROM <db_name> ]
[
WHERE
    [ QUERYID = <query_id> ]
    [ STATE = { "PENDING" | "EXPORTING" | "FINISHED" | "CANCELLED" } ]
]
[ ORDER BY <field_name> [ ASC | DESC ] [, ... ] ]
[ LIMIT <count> ]
```

## パラメータ説明

この文には4つのオプションの句が含まれています：

- FROM

  照会するデータベースの名前を指定します。この句を指定しない場合、デフォルトで現在のデータベースが照会されます。

- WHERE

  フィルタ条件を指定します。フィルタ条件に合致するエクスポートジョブのレコードのみが照会結果として返されます。

  | **パラメータ** | **必須** | **説明**                                                     |
  | -------- | ------------ | ------------------------------------------------------------ |
  | QUERYID  | いいえ           | エクスポートジョブのID。このパラメータは単一のエクスポートジョブの実行状況を照会するために使用されます。        |
  | STATE    | いいえ           | エクスポートジョブの状態。値の範囲：<br /><ul><li>`PENDING`：スケジュール待ちのエクスポートジョブを照会します。</li><li>`EXPORTING`：実行中のエクスポートジョブを照会します。</li><li>`FINISHED`：正常に完了したエクスポートジョブを照会します。</li><li>`CANCELLED`：失敗したエクスポートジョブを照会します。</li></ul> |

- ORDER BY

  返されるエクスポートジョブのレコードをソートするためのフィールド名を指定します。複数のフィールドを指定することができ、フィールド間はコンマ (,) で区切る必要があります。また、フィールド名の後に `ASC` または `DESC` キーワードを追加することで、そのフィールドに基づいてエクスポートジョブのレコードを昇順または降順にソートすることができます。

- LIMIT

  返されるエクスポートジョブのレコードの最大数を指定します。値の範囲：正の整数。この句を指定しない場合、デフォルトで指定された条件に合致するすべてのエクスポートジョブが返されます。

## 戻り値の説明

例えば、IDが `edee47f0-abe1-11ec-b9d1-00163e1e238f` のエクスポートジョブの実行状況を確認する場合：

```SQL
SHOW EXPORT
WHERE QUERYID = "edee47f0-abe1-11ec-b9d1-00163e1e238f";
```

戻り値は以下の通りです：

```SQL
     JobId: 14008
   QueryId: edee47f0-abe1-11ec-b9d1-00163e1e238f
     State: FINISHED
  Progress: 100%
  TaskInfo: {"partitions":["*"],"column separator":"\t","columns":["*"],"tablet num":10,"broker":"","coord num":1,"db":"db0","tbl":"tbl_simple","row delimiter":"\n","mem limit":2147483648}
      Path: hdfs://127.0.0.1:9000/users/230320/
CreateTime: 2023-03-20 11:16:14
 StartTime: 2023-03-20 11:16:17
FinishTime: 2023-03-20 11:16:26
   Timeout: 7200
```

戻り値のパラメータ説明は以下の通りです：

- `JobId`：エクスポートジョブのID。
- `QueryId`：現在の照会のID。
- `State`：エクスポートジョブの状態で、以下を含みます：
  - `PENDING`：エクスポートジョブがスケジュール待ちです。
  - `EXPORTING`：エクスポートジョブが実行中です。
  - `FINISHED`：エクスポートジョブが成功しました。
  - `CANCELLED`：エクスポートジョブが失敗しました。
- `Progress`：エクスポートジョブの進行状況。この進行状況は照会計画に基づいています。例えば、エクスポートジョブが合計で10の照会計画に分けられ、現在3つが完了している場合、進行状況は30%です。照会計画の原理については、["EXPORTを使用してデータをアンロードする > エクスポートプロセス"](../../../unloading/Export.md#エクスポートプロセス)を参照してください。
- `TaskInfo`：エクスポートジョブの情報で、JSON形式で以下を含みます：
  - `partitions`：エクスポートされるデータがあるパーティション。ワイルドカード (`*`) はすべてのパーティションのデータがエクスポートされたことを意味します。
  - `column separator`：エクスポートファイルの列区切り文字。
  - `columns`：エクスポートされる列の名前。
  - `tablet num`：エクスポートされるタブレットの総数。
  - `broker`：v2.4以前のバージョンでは、このフィールドはエクスポートジョブで使用されるBrokerの名前を返します。v2.5以降では、このフィールドは空の文字列を返します。詳細は、["EXPORTを使用してデータをアンロードする > 背景情報"](../../../unloading/Export.md#背景情報)を参照してください。
  - `coord num`：エクスポートジョブが分割された照会計画の数。
  - `db`：エクスポートされるデータがあるデータベースの名前。
  - `tbl`：エクスポートされるデータがあるテーブルの名前。
  - `row delimiter`：エクスポートファイルの行区切り文字。
  - `mem limit`：エクスポートジョブのメモリ使用制限。単位はバイトです。
- `Path`：リモートストレージ上のエクスポートパス。
- `CreateTime`：エクスポートジョブの作成時間。
- `StartTime`：エクスポートジョブのスケジュール開始時間。
- `FinishTime`：エクスポートジョブの終了時間。
- `Timeout`：エクスポートジョブのタイムアウト時間。単位は秒です。この時間は `CreateTime` から計算されます。
- `ErrorMsg`：エクスポートジョブのエラー原因。このフィールドはエクスポートジョブにエラーが発生した場合のみ返されます。

## 例

- 現在のデータベースのすべてのエクスポートジョブを照会する：

  ```SQL
  SHOW EXPORT;
  ```

- 指定されたデータベース `example_db` でID `921d8f80-7c9d-11eb-9342-acde48001122` のエクスポートジョブを照会する：

  ```SQL
  SHOW EXPORT FROM example_db
  WHERE QUERYID = "921d8f80-7c9d-11eb-9342-acde48001122";
  ```

- 指定されたデータベース `example_db` で `EXPORTING` 状態のエクスポートジョブを照会し、`StartTime` で返されるエクスポートジョブのレコードを昇順にソートする：

  ```SQL
  SHOW EXPORT FROM example_db
  WHERE STATE = "EXPORTING"
  ORDER BY StartTime ASC;
  ```

- 指定されたデータベース `example_db` のすべてのエクスポートジョブを照会し、`StartTime` で返されるエクスポートジョブのレコードを降順にソートする：

  ```SQL
  SHOW EXPORT FROM example_db
  ORDER BY StartTime DESC;
  ```
