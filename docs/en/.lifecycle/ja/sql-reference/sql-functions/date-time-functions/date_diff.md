---
displayed_sidebar: "Japanese"
---

# date_diff

## 説明

指定された単位で、2つの日付値の差を返します。この関数は、`expr1 - expr2` の値を `unit` の単位で表現したものを返します。

例えば、`date_diff('second', '2010-11-30 23:59:59', '2010-11-30 20:58:59')` は、2つのDATETIME値の差を秒単位で返します。

この関数はv3.1からサポートされています。

date_diffと[datediff](./datediff.md)の違いは、datediff()が`unit`パラメータをサポートしていないことです。

## 構文

```Haskell
BIGINT DATE_DIFF(VARCHAR unit, DATETIME expr1, DATETIME expr2)
```

## パラメータ

- `expr1` と `expr2`：比較したい2つの日付時刻値。必須です。サポートされるデータ型はDATETIMEとDATEです。

- `unit`：時間差を表現するために使用する単位。必須です。以下の`unit`の値がサポートされています：year, quarter, month, week, day, hour, minute, second, millisecond。

## 戻り値

BIGINT値を返します。

## 使用上の注意

- `expr1`が`expr2`よりも早い場合、負の値が返されます。
- `unit`が無効な場合、エラーが返されます。
- 入力値のいずれかがNULLの場合、NULLが返されます。
- 指定された日付が存在しない場合、例えば`2022-11-31`、NULLが返されます。

## 例

```Plain Text
mysql> select date_diff('second', '2010-11-30 23:59:59', '2010-11-30 20:58:59');
+-------------------------------------------------------------------+
| date_diff('second', '2010-11-30 23:59:59', '2010-11-30 20:58:59') |
+-------------------------------------------------------------------+
|                                                             10860 |
+-------------------------------------------------------------------+

mysql> select date_diff('minute', '2010-11-30 23:59:59', '2010-11-30 20:58:59');
+-------------------------------------------------------------------+
| date_diff('minute', '2010-11-30 23:59:59', '2010-11-30 20:58:59') |
+-------------------------------------------------------------------+
|                                                               181 |
+-------------------------------------------------------------------+

mysql> select date_diff('hour', '2010-11-30 23:59:59', '2010-11-30 20:58:59');
+-----------------------------------------------------------------+
| date_diff('hour', '2010-11-30 23:59:59', '2010-11-30 20:58:59') |
+-----------------------------------------------------------------+
|                                                               3 |
+-----------------------------------------------------------------+

mysql> select date_diff('millisecond', '2010-11-30 23:59:59', '2010-11-30 20:58:59');
+------------------------------------------------------------------------+
| date_diff('millisecond', '2010-11-30 23:59:59', '2010-11-30 20:58:59') |
+------------------------------------------------------------------------+
|                                                               10860000 |
+------------------------------------------------------------------------+
```

## 参考

[datediff](./datediff.md)
