---
displayed_sidebar: "Japanese"
---

# date_trunc

## 説明

指定された日付部分（年、日、時、分など）に基づいて、時間値を切り捨てます。

StarRocksでは、指定された日付部分を抽出するために、year、quarter、month、week、day、hourの関数も提供されています。

## 構文

```Haskell
DATETIME date_trunc(VARCHAR fmt, DATETIME|DATE datetime)
```

## パラメータ

- `datetime`: 切り捨てる時間です。DATETIMEまたはDATE型である必要があります。日付と時刻が存在しない場合、NULLが返されます。例えば、`2021-02-29 11:12:13`は存在しない日付であり、NULLが返されます。

- `fmt`: 日付部分、つまり`datetime`が切り捨てられる精度を指定します。値はVARCHAR定数である必要があります。
  `fmt`は以下の表にリストされている値のいずれかに設定する必要があります。値が正しくない場合、エラーが返されます。

| 値      | 説明                                                         |
| ------- | ------------------------------------------------------------ |
| second  | 秒まで切り捨てます。                                         |
| minute  | 分まで切り捨てます。秒の部分は0になります。                   |
| hour    | 時まで切り捨てます。分と秒の部分は0になります。               |
| day     | 日まで切り捨てます。時刻部分は0になります。                    |
| week    | `datetime`が含まれる週の最初の日付まで切り捨てます。時刻部分は0になります。 |
| month   | `datetime`が含まれる月の最初の日付まで切り捨てます。時刻部分は0になります。 |
| quarter | `datetime`が含まれる四半期の最初の日付まで切り捨てます。時刻部分は0になります。 |
| year    | `datetime`が含まれる年の最初の日付まで切り捨てます。時刻部分は0になります。 |

## 戻り値

DATETIME型の値を返します。

`datetime`がDATE型であり、`fmt`が`hour`、`minute`、または`second`に設定されている場合、返される値の時刻部分はデフォルトで`00:00:00`になります。

## 例

例1: 入力された時間を分まで切り捨てます。

```Plain
select date_trunc("minute", "2020-11-04 11:12:13");
+---------------------------------------------+
| date_trunc('minute', '2020-11-04 11:12:13') |
+---------------------------------------------+
| 2020-11-04 11:12:00                         |
+---------------------------------------------+
```

例2: 入力された時間を時まで切り捨てます。

```Plain
select date_trunc("hour", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('hour', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-11-04 11:00:00                       |
+-------------------------------------------+
```

例3: 入力された時間を週の最初の日に切り捨てます。

```Plain
select date_trunc("week", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('week', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-11-02 00:00:00                       |
+-------------------------------------------+
```

例4: 入力された時間を年の最初の日に切り捨てます。

```Plain
select date_trunc("year", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('year', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-01-01 00:00:00                       |
+-------------------------------------------+
```

例5: DATE値を時まで切り捨てます。時刻部分として`00:00:00`が返されます。

```Plain
select date_trunc("hour", "2020-11-04");
+----------------------------------+
| date_trunc('hour', '2020-11-04') |
+----------------------------------+
| 2020-11-04 00:00:00              |
+----------------------------------+
```
