---
displayed_sidebar: "Japanese"
---

# to_binary

## 説明

指定されたバイナリ形式（`binary_type`）に基づいて、VARCHAR文字列をバイナリ値に変換します。以下のバイナリ形式がサポートされています：`hex`、`encode64`、および`utf8`。`binary_type`が指定されていない場合、デフォルトは`hex`です。

## 構文

```Haskell
to_binary(str[, binary_type])
```

## パラメータ

- `str`：変換する文字列、必須です。VARCHAR文字列である必要があります。
- `binary_type`：変換のためのバイナリ形式、オプションです。

  - `hex`（デフォルト）：`to_binary`は、すべての文字が '0123456789abcdef' の16進数文字列であると想定します。入力文字列が無効な場合、空のバイナリが返されます（例外はスローされません）。`to_binary`は入力文字列を直接バイナリに変換します。例えば、`"abab"`は`x'abab'`に変換されます。入力文字列は大文字と小文字を区別しません。
  - `encode64`：`to_binary`は、入力文字列がBase64でエンコードされた文字列であると想定します。入力文字列が無効な場合、空のバイナリが返されます（例外はスローされません）。`to_binary`はBase64でエンコードされた文字列をバイナリ結果としてデコードします。例えば、`"YWJhYg=="`は`x'abab'`に変換されます。
  - `utf8`：`to_binary`は、入力文字列を変換せずにバイナリ値として変換します。

## 戻り値

VARCHAR値を返します。

## 例

以下の例では、MySQLクライアントからStarRocksにアクセスする際に`--binary-as-hex`オプションが有効になっていることを前提としています。これにより、バイナリデータは16進数表記で表示されます。

```Plain
mysql> select to_binary('ABAB', 'hex');
+----------------------------------------------------+
| to_binary('ABAB', 'hex')                           |
+----------------------------------------------------+
| 0xABAB                                             |
+----------------------------------------------------+
1 row in set (0.01 sec)

mysql> select to_binary('U1RBUlJPQ0tT', 'encode64');
+------------------------------------------------------------------------------+
| to_binary('U1RBUlJPQ0tT', 'encode64')                                        |
+------------------------------------------------------------------------------+
| 0x53544152524F434B53                                                         |
+------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> select to_binary('STARROCKS', 'utf8');
+----------------------------------------------------------------+
| to_binary('STARROCKS', 'utf8')                                 |
+----------------------------------------------------------------+
| 0x53544152524F434B53                                           |
+----------------------------------------------------------------+
1 row in set (0.00 sec)

-- 入力文字列がバイナリ形式と一致せず、空のバイナリが返されます。

mysql> select to_binary('U1RBUlJPQ0tT', 'hex');
+--------------------------------------------------------------------+
| to_binary('U1RBUlJPQ0tT', 'hex')                                   |
+--------------------------------------------------------------------+
| 0x                                                                 |
+--------------------------------------------------------------------+
1 row in set (0.00 sec)
```

## 参考

- [from_binary](from_binary.md)
- [BINARY/VARBINARYデータ型](../../sql-statements/data-types/BINARY.md)
