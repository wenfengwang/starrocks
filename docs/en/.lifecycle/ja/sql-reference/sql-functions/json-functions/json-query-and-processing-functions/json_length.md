---
displayed_sidebar: "Japanese"
---

# json_length

## 説明

JSONドキュメントの長さを返します。パスが指定されている場合、この関数はパスで識別された値の長さを返します。

ドキュメントの長さは次のルールに従って決定されます：

- スカラー値の長さは1です。例えば、`1`、`"a"`、`true`、`false`、`null`の長さは1です。

- 配列の長さは配列の要素数です。例えば、`[1, 2]`の長さは2です。

- オブジェクトの長さはオブジェクトのメンバー数です。例えば、`{"a": 1}`の長さは1です。

- ネストされた配列やオブジェクトの長さはカウントされません。例えば、`{"a": [1, 2]}`の長さは1です。なぜなら、ネストされた配列`[1, 2]`は長さに含まれないからです。

## 構文

```Haskell
json_length(json_doc[, path])
```

## パラメーター

`json_doc`: 必須、長さを返すJSONドキュメントです。

`path`: オプションです。ドキュメント内の値の長さを返すために使用されます。パスは一般的に`$`で始まり、パスの区切り文字として`.`を使用します。`[]`は配列の添字として使用され、0から始まります。

## 戻り値

INT型の値を返します。

JSONドキュメントが有効なドキュメントでない場合はエラーが返されます。

以下のシナリオのいずれかで0が返されます：

- **`path`**がドキュメント内の値を識別していない場合。

- パスが有効なパス式ではない場合。

- パスに`*`または`**`のワイルドカードが含まれている場合。

## 例

例1：スカラー値の長さを返す。

```Plain
select json_length('1');
+------------------+
| json_length('1') |
+------------------+
|                1 |
+------------------+
```

例2：空のオブジェクトの長さを返す。

```Plain
select json_length('{}');
+-------------------+
| json_length('{}') |
+-------------------+
|                 0 |
+-------------------+
```

例3：データを持つオブジェクトの長さを返す。

```Plain
select json_length('{"Name": "Homer"}');
+----------------------------------+
| json_length('{"Name": "Homer"}') |
+----------------------------------+
|                                1 |
+----------------------------------+
```

例4：JSON配列の長さを返す。

```plain text
select json_length('[1, 2, 3]');
+--------------------------+
| json_length('[1, 2, 3]') |
+--------------------------+
|                        3 |
+--------------------------+
```

例5：ネストされた配列を持つJSON配列の長さを返す。

ネストされた配列`[3, 4]`は長さに含まれません。

```plain text
select json_length('[1, 2, [3, 4]]');
+-------------------------------+
| json_length('[1, 2, [3, 4]]') |
+-------------------------------+
|                             3 |
+-------------------------------+
```

例6：パス`$.Person`で指定されたオブジェクトの長さを返す。

```SQL
SET @file = '{  
    "Person": {    
       "Name": "Homer", 
       "Age": 39,
       "Hobbies": ["Eating", "Sleeping"]  
    }
 }';
select json_length(@file, '$.Person') 'Result';
```

例7：パス`$.y`で指定された値の長さを返す。

```plain text
select json_length('{"x": 1, "y": [1, 2]}', '$.y');
+---------------------------------------------+
| json_length('{"x": 1, "y": [1, 2]}', '$.y') |
+---------------------------------------------+
|                                           2 |
+---------------------------------------------+
```
