---
displayed_sidebar: "Japanese"
---

# array_filter

## 説明

指定されたフィルタに一致する配列の値を返します。

この関数は、次の2つの形式で提供されます。ラムダ式の採用により、より柔軟な配列のフィルタリングが可能です。ラムダ関数の詳細については、[Lambda expression](../Lambda_expression.md)を参照してください。この関数はv2.5からサポートされています。

## 構文

```Haskell
array_filter(array, array<bool>)
array_filter(lambda_function, arr1,arr2...)
```

- `array_filter(array, array<bool>)`

  `array<bool>`に一致する配列の値を返します。

- `array_filter(lambda_function, arr1,arr2...)`

  ラムダ関数に一致する配列の値を返します。

## パラメータ

`array`: 値をフィルタリングする配列。

`array<bool>`: 値をフィルタリングするために使用される式。

`lambda_function`: 値をフィルタリングするために使用されるラムダ関数。

## 使用上の注意

- `array_filter(array, array<bool>)`の2つの入力パラメータは、ARRAYである必要があり、フィルタ式は`array<bool>`に評価できる必要があります。
- `array_filter(lambda_function, arr1,arr2...)`のラムダ関数は、[array_map()](array_map.md)の使用上の注意に従います。
- 入力配列がnullの場合、nullが返されます。フィルタ配列がnullの場合、空の配列が返されます。

## 例

- ラムダ関数を使用しない例

    ```Plain
    -- 配列内のすべての要素がフィルタに一致します。
    select array_filter([1,2,3],[1,1,1]);
    +------------------------------------+
    | array_filter([1, 2, 3], [1, 1, 1]) |
    +------------------------------------+
    | [1,2,3]                            |
    +------------------------------------+
    1 行が返されました (0.01 秒)
    
    -- フィルタがnullであり、空の配列が返されます。
    select array_filter([1,2,3],null);
    +-------------------------------+
    | array_filter([1, 2, 3], NULL) |
    +-------------------------------+
    | []                            |
    +-------------------------------+
    1 行が返されました (0.01 秒)
    
    -- 入力配列がnullであり、nullが返されます。
    select array_filter(null,[1]);
    +-------------------------+
    | array_filter(NULL, [1]) |
    +-------------------------+
    | NULL                    |
    +-------------------------+
    
    -- 入力配列とフィルタがnullの場合、nullが返されます。
    select array_filter(null,null);
    +--------------------------+
    | array_filter(NULL, NULL) |
    +--------------------------+
    | NULL                     |
    +--------------------------+
    1 行が返されました (0.01 秒)
    
    -- フィルタにnullの要素が含まれており、空の配列が返されます。
    select array_filter([1,2,3],[null]);
    +---------------------------------+
    | array_filter([1, 2, 3], [NULL]) |
    +---------------------------------+
    | []                              |
    +---------------------------------+
    1 行が返されました (0.01 秒)
    
    -- フィルタに2つのnullの要素が含まれており、空の配列が返されます。
    select array_filter([1,2,3],[null,null]);
    +---------------------------------------+
    | array_filter([1, 2, 3], [NULL, NULL]) |
    +---------------------------------------+
    | []                                    |
    +---------------------------------------+
    1 行が返されました (0.00 秒)
    
    -- フィルタに一致する要素は1つだけです。
    select array_filter([1,2,3],[null,1,0]);
    +---------------------------------------+
    | array_filter([1, 2, 3], [NULL, 1, 0]) |
    +---------------------------------------+
    | [2]                                   |
    +---------------------------------------+
    1 行が返されました (0.00 秒)
    ```

- ラムダ関数を使用する例

  ```Plain
    -- xの要素がyの要素よりも小さい要素を返します。
    select array_filter((x,y) -> x < y, [1,2,null], [4,5,6]);
    +--------------------------------------------------------+
    | array_filter((x, y) -> x < y, [1, 2, NULL], [4, 5, 6]) |
    +--------------------------------------------------------+
    | [1,2]                                                  |
    +--------------------------------------------------------+
  ```
