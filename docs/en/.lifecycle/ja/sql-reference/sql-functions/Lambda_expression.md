---
displayed_sidebar: "Japanese"
---

# ラムダ式

ラムダ式は、高階SQL関数にパラメータとして渡すことができる匿名関数です。ラムダ式を使用すると、より簡潔でエレガントかつ拡張性のあるコードを開発することができます。

ラムダ式は `->` 演算子で記述されます。`->` の左側は入力パラメータ（ある場合）であり、右側は式です。

v2.5以降、StarRocksでは次の高階SQL関数でラムダ式を使用することがサポートされています：[array_map()](./array-functions/array_map.md)、[array_filter()](./array-functions/array_filter.md)、[array_sum()](./array-functions/array_sum.md)、および[array_sortby()](./array-functions/array_sortby.md)。

## 構文

```Haskell
パラメータ -> 式
```

## パラメータ

- `パラメータ`：ラムダ式の入力パラメータで、ゼロ個、1個、または複数のパラメータを受け入れることができます。2つ以上の入力パラメータは括弧で囲まれます。

- `式`：`パラメータ` を参照する単純な式です。式は入力パラメータに対して有効である必要があります。

## 戻り値

戻り値の型は `式` の結果型によって決まります。

## 使用上の注意

ほとんどのスカラー関数はラムダ本体で使用できます。ただし、いくつかの例外があります：

- サブクエリはサポートされていません。例：`x -> 5 + (SELECT 3)`。
- 集約関数はサポートされていません。例：`x -> min(y)`。
- ウィンドウ関数はサポートされていません。
- テーブル関数はサポートされていません。
- 相関列はラムダ関数内に出現することはできません。

## 例

ラムダ式の簡単な例：

```SQL
-- パラメータを受け取らず、5を返します。
() -> 5    
-- x を受け取り、(x + 2) の値を返します。
x -> x + 2 
-- x と y を受け取り、それらの合計を返します。
(x, y) -> x + y 
-- x を受け取り、x に関数を適用します。
x -> COALESCE(x, 0)
x -> day(x)
x -> split(x,",")
x -> if(x>0,"positive","negative")
```

高階関数でラムダ式を使用する例：

```Haskell
select array_map((x,y,z) -> x + y, [1], [2], [4]);
+----------------------------------------------+
| array_map((x, y, z) -> x + y, [1], [2], [4]) |
+----------------------------------------------+
| [3]                                          |
+----------------------------------------------+
1 行が返されました (0.01 秒)
```
