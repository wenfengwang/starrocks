---
displayed_sidebar: "Japanese"
---

# システム変数

StarRocksは、要件に合わせて設定および変更できる多くのシステム変数を提供しています。このセクションでは、StarRocksでサポートされている変数について説明します。これらの変数の設定を確認するには、MySQLクライアントで[SHOW VARIABLES](../sql-reference/sql-statements/Administration/SHOW_VARIABLES.md)コマンドを実行することができます。また、[SET](../sql-reference/sql-statements/Administration/SET.md)コマンドを使用して変数を動的に設定または変更することもできます。これらの変数は、システム全体、現在のセッションのみ、または単一のクエリ文のみに効果を与えるように設定することができます。

StarRocksの変数は、MySQLの変数セットを参照していますが、**一部の変数はMySQLクライアントプロトコルとの互換性しかなく、MySQLデータベースでは機能しません**。

> **注意**
>
> 任意のユーザーはSHOW VARIABLESを実行し、変数をセッションレベルで有効にする権限を持っています。ただし、SYSTEMレベルのOPERATE権限を持つユーザーのみが変数をグローバルに有効にすることができます。グローバルに有効な変数は、将来のすべてのセッション（現在のセッションを除く）に影響を与えます。
>
> 現在のセッションに対して設定変更を行い、その設定変更をすべての将来のセッションに適用する場合は、変更を2回行う必要があります。`GLOBAL`修飾子なしで1回、`GLOBAL`修飾子ありで1回行います。例：
>
> ```SQL
> SET query_mem_limit = 137438953472; -- 現在のセッションに適用
> SET GLOBAL query_mem_limit = 137438953472; -- 将来のすべてのセッションに適用
> ```

## 変数の階層とタイプ

StarRocksは、グローバル変数、セッション変数、および`SET_VAR`ヒントの3つのタイプ（レベル）の変数をサポートしています。これらの変数の階層関係は次のとおりです。

* グローバル変数はグローバルレベルで有効であり、セッション変数と`SET_VAR`ヒントによって上書きすることができます。
* セッション変数は現在のセッションのみに有効であり、`SET_VAR`ヒントによって上書きすることができます。
* `SET_VAR`ヒントは現在のクエリ文のみに有効です。

## 変数の表示

`SHOW VARIABLES [LIKE 'xxx']`を使用して、すべてまたは一部の変数を表示することができます。例：

```SQL
-- システムのすべての変数を表示します。
SHOW VARIABLES;

-- 特定のパターンに一致する変数を表示します。
SHOW VARIABLES LIKE '%time_zone%';
```

## 変数の設定

### グローバルまたは単一セッションでの変数の設定

変数を**グローバルに**または**現在のセッションのみに**有効にすることができます。グローバルに設定すると、新しい値は将来のすべてのセッションで使用されますが、現在のセッションは元の値を使用します。現在のセッションのみに設定する場合、変数は現在のセッションにのみ影響を与えます。

`SET <var_name> = xxx;`という形式で設定された変数は、現在のセッションにのみ影響を与えます。例：

```SQL
SET query_mem_limit = 137438953472;

SET forward_to_master = true;

SET time_zone = "Asia/Shanghai";
```

`SET GLOBAL <var_name> = xxx;`という形式で設定された変数は、グローバルに影響を与えます。例：

```SQL
SET GLOBAL query_mem_limit = 137438953472;
```

次の変数はグローバルにのみ影響を与えます。これらの変数は単一セッションには影響を与えることができず、これらの変数に対して単一セッションで設定しようとすると（`SET <var_name> = xxx;`）、エラーが返されます。

* activate_all_roles_on_login
* character_set_database
* default_rowset_type
* enable_query_queue_select
* enable_query_queue_statistic
* enable_query_queue_load
* init_connect
* lower_case_table_names
* license
* language
* query_cache_size
* query_queue_fresh_resource_usage_interval_ms
* query_queue_concurrency_limit
* query_queue_mem_used_pct_limit
* query_queue_cpu_used_permille_limit
* query_queue_pending_timeout_second
* query_queue_max_queued_queries
* system_time_zone
* version_comment
* version

さらに、変数の設定では定数式もサポートされています。例：

```SQL
SET query_mem_limit = 10 * 1024 * 1024 * 1024;
```

 ```SQL
SET forward_to_master = concat('tr', 'u', 'e');
```

### 単一のクエリ文での変数の設定

一部のシナリオでは、特定のクエリに対して変数を設定する必要がある場合があります。`SET_VAR`ヒントを使用することで、単一のステートメント内でのみ有効なセッション変数を設定することができます。例：

```sql
SELECT /*+ SET_VAR(query_mem_limit = 8589934592) */ name FROM people ORDER BY name;

SELECT /*+ SET_VAR(query_timeout = 1) */ sleep(3);
```

> **注意**
>
> `SET_VAR`は`SELECT`キーワードの後に配置し、`/*+...*/`で囲む必要があります。

また、単一のステートメントで複数の変数を設定することもできます。例：

```sql
SELECT /*+ SET_VAR
  (
  exec_mem_limit = 515396075520,
  query_timeout=10000000,
  batch_size=4096,
  parallel_fragment_exec_instance_num=32
  )
  */ * FROM TABLE;
```

## 変数の説明

変数は**アルファベット順**で説明されています。`global`ラベルを持つ変数はグローバルにのみ影響を与えます。その他の変数はグローバルまたは単一セッションのいずれかに影響を与えることができます。

### activate_all_roles_on_login（グローバル）

StarRocksユーザーがStarRocksクラスタに接続する際に、すべてのロール（デフォルトのロールと付与されたロールを含む）を有効にするかどうかを指定します。この変数はv3.0以降でサポートされています。

* 有効にする場合（true）、ユーザーのすべてのロールがユーザーログイン時に有効になります。これは[SET DEFAULT ROLE](../sql-reference/sql-statements/account-management/SET_DEFAULT_ROLE.md)で設定されたロールよりも優先されます。
* 無効にする場合（false）、SET DEFAULT ROLEで設定されたロールが有効になります。

デフォルト値：false。

セッションで割り当てられたロールを有効にする場合は、[SET ROLE](../sql-reference/sql-statements/account-management/SET_DEFAULT_ROLE.md)コマンドを使用してください。

### auto_increment_increment

MySQLクライアントとの互換性のために使用されます。実用的な使用方法はありません。

### autocommit

MySQLクライアントとの互換性のために使用されます。実用的な使用方法はありません。

### batch_size

クエリの実行中に各ノードが送信する単一パケットの行数を指定するために使用されます。デフォルトは1024であり、ソースノードが生成するデータの1024行ごとにパッケージ化され、宛先ノードに送信されます。行数を増やすと、大量のデータのシナリオでクエリのスループットが向上しますが、小量のデータのシナリオではクエリのレイテンシが増加する可能性があります。また、クエリのメモリオーバーヘッドも増加する可能性があります。`batch_size`は1024から4096の間で設定することを推奨します。

### cbo_enable_low_cardinality_optimize

低基数最適化を有効にするかどうかを指定します。この機能を有効にすると、STRING列のクエリパフォーマンスが約3倍向上します。デフォルト値：true。

### character_set_database（グローバル）

StarRocksでサポートされている文字セット。UTF8（`utf8`）のみがサポートされています。

### connector_io_tasks_per_scan_operator（2.5以降）

外部テーブルクエリ中にスキャンオペレータが発行できる同時I/Oタスクの最大数。値は整数です。デフォルト値：16。

現在、StarRocksは外部テーブルのクエリ時に同時I/Oタスクの数を自動的に調整することができます。この機能はデフォルトで有効になっており、変数`enable_connector_adaptive_io_tasks`で制御されます。

### count_distinct_column_buckets（2.5以降）

グループバイカウントディスティンクトクエリのCOUNT DISTINCT列のバケット数。この変数は、`enable_distinct_column_bucketization`が`true`に設定されている場合にのみ効果があります。デフォルト値：1024。

### default_rowset_type（グローバル）

グローバル変数。計算ノードのストレージエンジンで使用されるデフォルトのストレージ形式を設定するために使用されます。現在サポートされているストレージ形式は`alpha`と`beta`です。

### default_table_compression（3.0以降）

テーブルストレージのデフォルトの圧縮アルゴリズム。サポートされている圧縮アルゴリズムは`snappy, lz4, zlib, zstd`です。デフォルト値：lz4_frame。

なお、CREATE TABLE文で`compression`プロパティを指定した場合は、`compression`で指定された圧縮アルゴリズムが適用されます。

### disable_colocate_join

コロケーションジョインを有効にするかどうかを制御するために使用されます。デフォルト値は`false`で、機能が有効になっています。この機能が無効になっている場合、クエリのプランニングではコロケーションジョインを実行しません。

### disable_streaming_preaggregations

ストリーミングプリアグリゲーションを有効にするために使用されます。デフォルト値は`false`で、有効になっています。

### div_precision_increment

MySQLクライアントとの互換性のために使用されます。実用的な使用方法はありません。

### enable_connector_adaptive_io_tasks（2.5以降）

外部テーブルのクエリ時に同時I/Oタスクの数を自動的に調整するかどうかを指定します。デフォルト値：true。

この機能が無効になっている場合、変数`connector_io_tasks_per_scan_operator`を使用して手動で同時I/Oタスクの数を設定することができます。

### enable_distinct_column_bucketization（2.5以降）

グループバイカウントディスティンクトクエリのバケット化を有効にするかどうかを指定します。例として、`select a, count(distinct b) from t group by a;`クエリを使用します。GROUP BY列`a`が低基数列であり、COUNT DISTINCT列`b`がデータの偏りがある高基数列である場合、パフォーマンスボトルネックが発生します。このような場合、COUNT DISTINCT列のデータを複数のバケットに分割してデータをバランスさせ、データの偏りを防ぐことができます。

デフォルト値：falseで、この機能は無効です。この変数は変数`count_distinct_column_buckets`と共に使用する必要があります。

また、COUNT DISTINCT列のバケット化を有効にするには、クエリに`skew`ヒントを追加することもできます。例えば、`select a,count(distinct [skew] b) from t group by a;`です。

### enable_group_level_query_queue（3.1.4以降）

リソースグループレベルの[クエリキュー](../administration/query_queues.md)を有効にするかどうかを指定します。

デフォルト値：falseで、この機能は無効です。

### enable_insert_strict

INSERT文を使用してデータをロードする際に厳密モードを有効にするために使用されます。デフォルト値は`true`で、厳密モードがデフォルトで有効になっています。詳細については、[厳密モード](../loading/load_concept/strict_mode.md)を参照してください。

### enable_materialized_view_union_rewrite（2.5以降）

マテリアライズドビューのUnionクエリのリライトを有効にするかどうかを制御するブール値です。デフォルト：`true`。

### enable_rule_based_materialized_view_rewrite（2.5以降）

ルールベースのマテリアライズドビュークエリのリライトを有効にするかどうかを制御するブール値です。この変数は主に単一テーブルクエリのリライトに使用されます。デフォルト：`true`。

### enable_spill（3.0以降）

中間結果のスピリングを有効にするかどうかを指定します。デフォルト：`false`。`true`に設定すると、StarRocksはクエリの集計、ソート、または結合演算子の処理時にメモリ使用量を削減するために、中間結果をディスクにスピルします。

### enable_profile

クエリのプロファイルを解析するためにプロファイルを送信するかどうかを指定します。デフォルト値は`false`で、プロファイルは必要ありません。

デフォルトでは、プロファイルはBEでクエリエラーが発生した場合にのみFEに送信されます。プロファイルの送信はネットワークオーバーヘッドを引き起こし、高い同時性に影響を与えます。

クエリのプロファイルを解析する必要がある場合は、この変数を`true`に設定できます。クエリが完了した後、プロファイルは現在接続されているFEのWebページ（アドレス：`fe_host:fe_http_port/query`）で表示することができます。このページでは、`enable_profile`がオンになっている最新の100件のクエリのプロファイルが表示されます。

### enable_query_queue_load（グローバル）

ロードタスクのためのクエリキューを有効にするためのブール値です。デフォルト：`false`。

### enable_query_queue_select（グローバル）

SELECTクエリのためのクエリキューを有効にするためのブール値です。デフォルト：`false`。

### enable_query_queue_statistic（グローバル）

統計クエリのためのクエリキューを有効にするためのブール値です。

### enable_query_tablet_affinity（2.5以降）

同じタブレットに対する複数のクエリを固定のレプリカに向けるかどうかを制御するブール値です。

クエリ対象のテーブルにタブレットが多数存在する場合、この機能はクエリのパフォーマンスを大幅に向上させます。なぜなら、タブレットのメタ情報とデータをメモリにキャッシュすることがより速く行えるからです。

ただし、ホットスポットタブレットが存在する場合、この機能はクエリのパフォーマンスを低下させる可能性があります。なぜなら、クエリを同じBEに向けるため、高並行性のシナリオで複数のBEのリソースを十分に活用できなくなるからです。

デフォルト値：`false`で、システムは各クエリに対してレプリカを選択します。この機能は2.5.6、3.0.8、3.1.4、および3.2.0以降でサポートされています。

### enable_scan_block_cache（2.5以降）

データキャッシュ機能を有効にするかどうかを指定します。この機能を有効にすると、StarRocksは外部ストレージシステムから読み込まれたホットデータをブロックにキャッシュし、クエリと解析を高速化します。詳細については、[データキャッシュ](../data_source/data_cache.md)を参照してください。

### enable_populate_block_cache（2.5以降）

StarRocksで外部ストレージシステムから読み込まれたデータブロックをキャッシュするかどうかを指定します。外部ストレージシステムから読み込まれたデータブロックをキャッシュしたくない場合は、この変数を`false`に設定します。デフォルト値：true。この変数は2.5からサポートされています。

### enable_tablet_internal_parallel（2.3以降）

タブレットのアダプティブ並列スキャンを有効にするかどうかを指定します。この機能を有効にすると、セグメントごとに複数のスレッドを使用してタブレットをスキャンすることができ、スキャンの並列性が向上します。デフォルト値：true。

### enable_query_cache（2.5以降）

クエリキャッシュ機能を有効にするかどうかを指定します。有効な値はtrueとfalseです。`true`はこの機能を有効にし、`false`はこの機能を無効にします。この機能は、[クエリキャッシュのアプリケーションシナリオ](../using_starrocks/query_cache.md#application-scenarios)で指定された条件を満たすクエリにのみ適用されます。

### enable_adaptive_sink_dop（2.5以降）

データロードのための適応的な並列性を有効にするかどうかを指定します。この機能を有効にすると、システムはINSERT INTOおよびBroker Loadジョブのロード並列性を自動的に設定します。これは`pipeline_dop`のメカニズムに相当します。新しく展開されたv2.5のStarRocksクラスタの場合、デフォルト値は`true`です。v2.4からv2.5にアップグレードされたv2.5クラスタの場合、デフォルト値は`false`です。

### enable_pipeline_engine

パイプライン実行エンジンを有効にするかどうかを指定します。`true`は有効、`false`は無効を示します。デフォルト値：`true`。

### enable_sort_aggregate（2.5以降）

ソートストリーミングを有効にするかどうかを指定します。`true`はソートストリーミングが有効であり、データストリーム内のデータをソートするために使用されます。

### enable_global_runtime_filter

グローバルランタイムフィルタ（RF）を有効にするかどうかを指定します。RFはランタイムでデータをフィルタリングします。データのフィルタリングは、Joinステージで頻繁に発生します。複数のテーブルの結合では、データのフィルタリングを行うためにプッシュダウンなどの最適化が使用されます。これにより、Joinのスキャン行数やShuffleステージのI/Oを減らしてクエリの高速化が図られます。

StarRocksでは、ローカルRFとグローバルRFの2つのタイプのRFを提供しています。ローカルRFはBroadcast Hash Joinに適しており、グローバルRFはShuffle Joinに適しています。

デフォルト値：`true`で、グローバルRFが有効になっています。この機能が無効になっている場合、グローバルRFは効果を発揮しません。ローカルRFは引き続き動作します。

### enable_multicolumn_global_runtime_filter

マルチカラムグローバルランタイムフィルタを有効にするかどうかを指定します。デフォルト値：`false`で、マルチカラムグローバルRFは無効です。

Join（Broadcast JoinおよびReplicated Joinを除く）に複数の等価結合条件がある場合：

* この機能が無効になっている場合、ローカルRFのみが動作します。
* この機能が有効になっている場合、マルチカラムグローバルRFが効果を発揮し、パーティションに`multi-column`を含めます。

### ENABLE_WRITE_HIVE_EXTERNAL_TABLE（v3.2以降）

Hiveの外部テーブルにデータをシンクすることを許可するかどうかを指定します。デフォルト値：`false`。

### event_scheduler

MySQLクライアントとの互換性のために使用されます。実用的な使用方法はありません。

### enable_strict_type（v3.1以降）

すべての複合述語およびWHERE句のすべての式に対して暗黙の型変換を許可するかどうかを指定します。デフォルト値：`false`。

### force_streaming_aggregate

集計ノードが計算にストリーミング集計を有効にするかどうかを制御するために使用されます。デフォルト値はfalseで、機能は無効です。

### forward_to_master

一部のコマンドをリーダーFEに転送して実行するかどうかを指定します。デフォルト値は`false`で、リーダーFEに転送されません。StarRocksクラスタには複数のFEがあり、そのうちの1つがリーダーFEです。通常、ユーザーはフル機能の操作を行うために任意のFEに接続できます。ただし、一部の情報はリーダーFEのみで利用できます。

たとえば、SHOW BACKENDSコマンドをリーダーFEに転送しない場合、基本的な情報（例：ノードが稼働しているかどうか）のみを表示することができます。リーダーFEに転送することで、ノードの起動時間や最終ハートビート時間などの詳細な情報を含む詳細な情報を取得することができます。

この変数に影響を受けるコマンドは次のとおりです。

* SHOW FRONTENDS：リーダーFEに転送することで、最後のハートビートメッセージを表示できます。
* SHOW BACKENDS：リーダーFEに転送することで、起動時間、最後のハートビート情報、ディスク容量情報を表示できます。
* SHOW BROKER：リーダーFEに転送することで、起動時間と最後のハートビート情報を表示できます。
* SHOW TABLET
* ADMIN SHOW REPLICA DISTRIBUTION
* ADMIN SHOW REPLICA STATUS：リーダーFEに転送することで、リーダーFEのメタデータに格納されているタブレット情報を表示できます。通常、異なるFEのメタデータは同じであるはずです。エラーが発生した場合は、現在のFEとリーダーFEのメタデータを比較するためにこの方法を使用できます。
* Show PROC：リーダーFEに転送することで、メタデータに格納されているPROC情報を表示できます。これは主にメタデータの比較に使用されます。

### group_concat_max_len

[group_concat](../sql-reference/sql-functions/string-functions/group_concat.md)関数によって返される文字列の最大長さ。デフォルト値：1024。最小値：4。単位：文字。

### hash_join_push_down_right_table

Joinクエリで右テーブルのフィルタ条件を使用して左テーブルのデータをフィルタリングできるかどうかを制御するために使用されます。これにより、クエリの処理中に処理する必要のあるデータ量を減らすことができます。

`true`は操作が許可され、システムが左テーブルをフィルタリングできるかどうかを決定します。`false`は操作が無効です。デフォルト値は`true`です。

### init_connect（グローバル）

MySQLクライアントとの互換性のために使用されます。実用的な使用方法はありません。

### interactive_timeout

MySQLクライアントとの互換性のために使用されます。実用的な使用方法はありません。

### io_tasks_per_scan_operator（2.5以降）

スキャンオペレータが発行できる同時I/Oタスクの数。HDFSやS3などのリモートストレージシステムにアクセスする場合に、遅延が高い場合にこの値を増やすことができます。ただし、大きな値はより多くのメモリ消費を引き起こします。

値は整数です。デフォルト値：4。

### language（グローバル）

MySQLクライアントとの互換性のために使用されます。実用的な使用方法はありません。

### license（グローバル）

StarRocksのライセンスを表示します。

### load_mem_limit

インポート操作のメモリ制限を指定します。デフォルト値は0で、この変数は使用されず、`query_mem_limit`が使用されます。

この変数は、クエリとインポートの両方を含む`INSERT`操作にのみ使用されます。ユーザーがこの変数を設定しない場合、クエリとインポートのメモリ制限は`exec_mem_limit`として設定されます。それ以外の場合、クエリのメモリ制限は`exec_mem_limit`として設定され、インポートのメモリ制限は`load_mem_limit`として設定されます。

`BROKER LOAD`、`STREAM LOAD`などの他のインポート方法は引き続きメモリ制限として`exec_mem_limit`を使用します。

### log_rejected_record_num（v3.1以降）

ログに記録できる不適格なデータ行の最大数を指定します。有効な値は`0`、`-1`、および0以外の正の整数です。デフォルト値：`0`。

* 値`0`は、フィルタリングされたデータ行はログに記録されません。
* 値`-1`は、フィルタリングされたすべてのデータ行がログに記録されます。
* `n`などの0以外の正の整数は、各BEで最大`n`個のフィルタリングされたデータ行がログに記録されることを指定します。

### lower_case_table_names（グローバル）

MySQLクライアントとの互換性のために使用されます。実用的な使用方法はありません。StarRocksのテーブル名は大文字と小文字を区別します。

### materialized_view_rewrite_mode（v3.2以降）

非同期マテリアライズドビューのクエリリライトモードを指定します。有効な値：

* `disable`：非同期マテリアライズドビューの自動クエリリライトを無効にします。
* `default`（デフォルト値）：非同期マテリアライズドビューの自動クエリリライトを有効にし、クエリがコストに基づいてマテリアライズドビューを使用してリライトできるかどうかをオプティマイザが決定します。クエリがリライトできない場合、ベーステーブルのデータを直接スキャンします。
* `default_or_error`：非同期マテリアライズドビューの自動クエリリライトを有効にし、クエリがコストに基づいてマテリアライズドビューを使用してリライトできるかどうかをオプティマイザが決定します。クエリがリライトできない場合、エラーが返されます。
* `force`：非同期マテリアライズドビューの自動クエリリライトを有効にし、オプティマイザがクエリリライトにマテリアライズドビューを優先的に使用します。クエリがリライトできない場合、ベーステーブルのデータを直接スキャンします。
* `force_or_error`：非同期マテリアライズドビューの自動クエリリライトを有効にし、オプティマイザがクエリリライトにマテリアライズドビューを優先的に使用します。クエリがリライトできない場合、エラーが返されます。

### max_allowed_packet

JDBC接続プールC3P0との互換性のために使用されます。この変数はクライアントとサーバー間で送信できるパケットの最大サイズを指定します。デフォルト値：32 MB。単位：バイト。クライアントが「PacketTooBigException」を報告する場合は、この値を増やすことができます。

### max_scan_key_num

クエリごとにセグメント化されたスキャンキーの最大数。デフォルト値：-1で、`be.conf`ファイルの値が使用されます。この変数を0より大きな値に設定すると、`be.conf`の値は無視されます。

### max_pushdown_conditions_per_column

列ごとにプッシュダウンできる述語の最大数。デフォルト値：-1で、`be.conf`ファイルの値が使用されます。この変数を0より大きな値に設定すると、`be.conf`の値は無視されます。

### nested_mv_rewrite_max_level

クエリリライトに使用できるネストされたマテリアライズドビューの最大レベル。タイプ：INT。範囲：[1, +∞)。値`1`はベーステーブルで作成されたマテリアライズドビューのみがクエリリライトに使用できることを示します。デフォルト：`3`。

### net_buffer_length

MySQLクライアントとの互換性のために使用されます。実用的な使用方法はありません。

### net_read_timeout

MySQLクライアントとの互換性のために使用されます。実用的な使用方法はありません。

### net_write_timeout

MySQLクライアントとの互換性のために使用されます。実用的な使用方法はありません。

### new_planner_optimize_timeout

クエリオプティマイザのタイムアウト時間。オプティマイザがタイムアウトすると、エラーが返され、クエリが停止し、クエリのパフォーマンスに影響を与えます。クエリに結合が多すぎる場合など、タイムアウトが頻繁に発生します。

デフォルト値：3000。単位：ミリ秒。

### parallel_exchange_instance_num

実行計画で上位ノードが下位ノードからデータを受け取るために使用するエクスチェンジノードの数を設定するために使用されます。デフォルト値は-1で、エクスチェンジノードの数は下位ノードの実行インスタンス数と同じです。この変数を0より大きく、下位ノードの実行インスタンス数より小さい値に設定すると、エクスチェンジノードの数は設定された値となります。
分散クエリ実行計画では、上位ノードは通常、異なるBEの下位ノードの実行インスタンスからデータを受け取るために1つ以上のエクスチェンジノードを持っています。通常、エクスチェンジノードの数は下位ノードの実行インスタンスの数と同じです。

データの量が集計後に劇的に減少するような集計クエリのシナリオでは、この変数を小さな値に変更してリソースのオーバーヘッドを削減することができます。例えば、Duplicate Keyテーブルを使用して集計クエリを実行する場合です。

### parallel_fragment_exec_instance_num

各BEでノードをスキャンするために使用されるインスタンスの数を設定するために使用されます。デフォルト値は1です。

クエリプランは通常、一連のスキャン範囲を生成します。このデータは複数のBEノードに分散されます。BEノードは1つ以上のスキャン範囲を持ち、デフォルトでは各BEノードのスキャン範囲のセットは1つの実行インスタンスによって処理されます。マシンリソースが十分な場合、この変数を増やしてより多くの実行インスタンスがスキャン範囲を同時に処理できるようにすることで、効率を向上させることができます。

スキャンインスタンスの数は、集計ノードや結合ノードなどの上位レベルの他の実行ノードの数を決定します。したがって、クエリプラン全体の並行性が増加します。この変数を変更することで効率が向上しますが、大きな値ではCPU、メモリ、ディスクIOなどのマシンリソースを消費します。

### partial_update_mode (3.1以降)

部分更新のモードを制御するために使用されます。有効な値は次のとおりです。

* `auto` (デフォルト): システムはUPDATEステートメントと関連する列を分析して、部分更新のモードを自動的に決定します。
* `column`: 部分更新のために列モードが使用されます。これは、列の数が少なく、行の数が多い部分更新に特に適しています。

詳細については、[UPDATE](../sql-reference/sql-statements/data-manipulation/UPDATE.md#partial-updates-in-column-mode-since-v31)を参照してください。

### performance_schema

MySQL JDBCバージョン8.0.16以降との互換性のために使用されます。実用的な使用方法はありません。

### prefer_compute_node

FEがクエリ実行計画をCNノードに配布するかどうかを指定します。有効な値は次のとおりです。

* true: FEはクエリ実行計画をCNノードに配布します。
* false: FEはクエリ実行計画をCNノードに配布しません。

### pipeline_dop

パイプラインインスタンスの並列性を調整するために使用されます。デフォルト値は0で、システムは各パイプラインインスタンスの並列性を自動的に調整します。また、この変数を0より大きな値に設定することもできます。一般的には、物理CPUコアの数の半分の値に設定します。

v3.0以降、StarRocksはクエリの並列性に基づいてこの変数を自動的に調整します。

### pipeline_profile_level

クエリプロファイルのレベルを制御します。クエリプロファイルには通常、Fragment、FragmentInstance、Pipeline、PipelineDriver、Operatorの5つのレイヤーがあります。異なるレベルでは、プロファイルの異なる詳細が提供されます。

* 0: StarRocksはプロファイルのメトリクスを組み合わせて、わずかなコアメトリクスのみを表示します。
* 1: デフォルト値です。StarRocksはプロファイルを簡略化し、プロファイルのメトリクスを組み合わせてプロファイルのレイヤーを減らします。
* 2: StarRocksはプロファイルのすべてのレイヤーを保持します。このシナリオでは、プロファイルのサイズが大きくなります。特にSQLクエリが複雑な場合には、この値は推奨されません。

### query_cache_entry_max_bytes (2.5以降)

パススルーモードをトリガするためのしきい値です。有効な値は0から9223372036854775807までです。クエリが特定のタブレットの計算結果からのバイト数または行数が`query_cache_entry_max_bytes`または`query_cache_entry_max_rows`で指定されたしきい値を超える場合、クエリはパススルーモードに切り替えられます。

### query_cache_entry_max_rows (2.5以降)

キャッシュできる行の上限です。`query_cache_entry_max_bytes`の説明を参照してください。デフォルト値は409600です。

### query_cache_agg_cardinality_limit (2.5以降)

クエリキャッシュのGROUP BYの基数の上限です。GROUP BYによって生成される行がこの値を超える場合、クエリキャッシュは有効になりません。デフォルト値は5000000です。`query_cache_entry_max_bytes`または`query_cache_entry_max_rows`が0に設定されている場合、関連するタブレットから計算結果が生成されない場合でも、パススルーモードが使用されます。

### query_cache_size (global)

MySQLクライアントの互換性のために使用されます。実用的な使用方法はありません。

### query_cache_type

JDBC接続プールC3P0との互換性のために使用されます。実用的な使用方法はありません。

### query_mem_limit

各バックエンドノードのクエリのメモリ制限を設定するために使用されます。デフォルト値は0で、制限はありません。`Memory Exceed Limit`エラーが発生した場合、この変数を増やしてみることができます。

### query_queue_concurrency_limit (global)

BE上での同時クエリの上限です。`0`より大きな値に設定された場合にのみ効果があります。デフォルト値は`0`です。

### query_queue_cpu_used_permille_limit (global)

BE上でのCPU使用率の上限をパーミル単位（CPU使用率 * 1000）で指定します。`0`より大きな値に設定された場合にのみ効果があります。デフォルト値は`0`です。範囲：[0, 1000]

### query_queue_max_queued_queries (global)

キュー内のクエリの上限です。このしきい値に達すると、新しいクエリは拒否されます。`0`より大きな値に設定された場合にのみ効果があります。デフォルト値は`1024`です。

### query_queue_mem_used_pct_limit (global)

BE上でのメモリ使用率の上限です。`0`より大きな値に設定された場合にのみ効果があります。デフォルト値は`0`です。範囲：[0, 1]

### query_queue_pending_timeout_second (global)

キュー内の保留中のクエリの最大タイムアウトです。このしきい値に達すると、対応するクエリは拒否されます。単位：秒。デフォルト値は`300`です。

### query_timeout

クエリのタイムアウトを「秒」単位で設定するために使用されます。この変数は、現在の接続のすべてのクエリ文、およびINSERT文に対して動作します。デフォルト値は300秒です。値の範囲：[1, 259200]。

### range_pruner_max_predicate (v3.0以降)

Rangeパーティションプルーニングに使用できるIN述語の最大数です。デフォルト値は100です。100より大きな値は、システムがすべてのタブレットをスキャンすることになり、クエリのパフォーマンスが低下します。

### rewrite_count_distinct_to_bitmap_hll

count distinctクエリをbitmap_union_countおよびhll_union_aggに書き換えるかどうかを決定するために使用されます。

### runtime_filter_on_exchange_node

GRFがExchange演算子を下位レベルの演算子にプッシュダウンした後にExchangeノードに配置するかどうかを指定します。デフォルト値は`false`で、GRFはExchange演算子を下位レベルの演算子にプッシュダウンした後にExchangeノードに配置されません。これにより、GRFの繰り返し使用が防止され、計算時間が短縮されます。

ただし、GRFの配信は「ベストエフォート」のプロセスです。下位レベルの演算子がGRFを受信できない場合、GRFがExchangeノードに配置されないと、データはフィルタリングされず、フィルタリングのパフォーマンスが低下します。`true`は、GRFがExchange演算子を下位レベルの演算子にプッシュダウンした後でも、GRFがExchangeノードに配置されることを意味します。

### runtime_join_filter_push_down_limit

BloomフィルターローカルRFが生成されるハッシュテーブルの最大行数です。この値を超えると、ローカルRFは生成されません。この変数は、過剰に長いローカルRFの生成を防止します。

値は整数です。デフォルト値は1024000です。

### runtime_profile_report_interval

ランタイムプロファイルが報告される時間間隔です。この変数は、v3.1.0以降でサポートされています。

単位：秒、デフォルト：`10`。

### spill_mode (3.0以降)

中間結果のスピリングの実行モードです。有効な値は次のとおりです。

* `auto`: メモリ使用量のしきい値に達した場合、自動的にスピリングがトリガされます。
* `force`: メモリ使用量に関係なく、StarRocksは関連するすべての演算子に対してスピリングを強制的に実行します。

この変数は、変数`enable_spill`が`true`に設定されている場合にのみ効果があります。

### SQL_AUTO_IS_NULL

JDBC接続プールC3P0との互換性のために使用されます。実用的な使用方法はありません。

### sql_dialect (v3.0以降)

使用されるSQLの方言です。たとえば、`set sql_dialect = 'trino';`コマンドを実行してSQLの方言をTrinoに設定することで、クエリでTrino固有のSQL構文と関数を使用することができます。

> **注意**
>
> StarRocksをTrinoの方言を使用するように設定した場合、クエリ内の識別子はデフォルトで大文字と小文字を区別しません。したがって、データベースとテーブルの作成時には、データベースとテーブルの名前をすべて小文字で指定する必要があります。大文字でデータベースとテーブルの名前を指定すると、これらのデータベースとテーブルに対するクエリが失敗します。

### sql_mode

特定のSQLの方言に対応するためにSQLモードを指定するために使用されます。

### sql_safe_updates

MySQLクライアントの互換性のために使用されます。実用的な使用方法はありません。

### sql_select_limit

MySQLクライアントの互換性のために使用されます。実用的な使用方法はありません。

### storage_engine

StarRocksでサポートされるエンジンの種類です。

* olap: StarRocksシステムが所有するエンジン。
* mysql: MySQL外部テーブル。
* broker: ブローカープログラムを介して外部テーブルにアクセスします。
* elasticsearchまたはes: Elasticsearch外部テーブル。
* hive: Hive外部テーブル。
* iceberg: Iceberg外部テーブル（v2.1以降でサポート）。
* hudi: Hudi外部テーブル（v2.2以降でサポート）。
* jdbc: JDBC互換のデータベース用の外部テーブル（v2.3以降でサポート）。

### streaming_preaggregation_mode

GROUP BYの第1フェーズのプリアグリゲーションモードを指定するために使用されます。第1フェーズのプリアグリゲーションの効果が十分でない場合、ストリーミングモードを使用することができます。ストリーミングモードでは、データをストリーミング先に送信する前に単純なデータシリアル化を行います。有効な値は次のとおりです。

* `auto`: システムはまずローカルプリアグリゲーションを試みます。効果が十分でない場合は、ストリーミングモードに切り替えます。これがデフォルト値です。
* `force_preaggregation`: システムは直接ローカルプリアグリゲーションを実行します。
* `force_streaming`: システムは直接ストリーミングを実行します。

### system_time_zone

現在のシステムのタイムゾーンを表示するために使用されます。変更することはできません。

### time_zone

現在のセッションのタイムゾーンを設定するために使用されます。タイムゾーンは特定の時間関数の結果に影響を与えることがあります。

### tx_isolation

MySQLクライアントの互換性のために使用されます。実用的な使用方法はありません。

### use_compute_nodes

使用できる最大のCNノードの数です。この変数は、`prefer_compute_node=true`の場合に有効です。有効な値は次のとおりです。

* `-1`: すべてのCNノードが使用されることを示します。
* `0`: CNノードは使用されません。

### use_v2_rollup

セグメントv2ストレージ形式のロールアップインデックスを使用してデータを取得するクエリを制御するために使用されます。この変数は、セグメントv2でオンラインになる際の検証に使用されますが、他のケースでは推奨されません。

### vectorized_engine_enable (v2.4以降非推奨)

クエリの実行にベクトル化エンジンを使用するかどうかを制御するために使用されます。`true`の場合、ベクトル化エンジンが使用されます。それ以外の場合は非ベクトル化エンジンが使用されます。デフォルトは`true`です。この機能はv2.4以降でデフォルトで有効になっており、非推奨です。

### version (global)

クライアントに返されるMySQLサーバのバージョンです。

### version_comment (global)

StarRocksのバージョンです。変更することはできません。

### wait_timeout

アイドル接続の接続タイムアウトを設定するために使用されます。アイドル接続がStarRocksとのやり取りを行わない時間がこの長さに達すると、StarRocksはリンクをアクティブに切断します。デフォルト値は8時間で、秒単位です。
