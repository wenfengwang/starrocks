---
displayed_sidebar: "Japanese"
---

# タイムゾーンの設定

このトピックでは、タイムゾーンの設定方法とタイムゾーン設定の影響について説明します。

## セッションレベルのタイムゾーンまたはグローバルタイムゾーンの設定

`time_zone`パラメータを使用して、StarRocksクラスタのセッションレベルのタイムゾーンまたはグローバルタイムゾーンを設定することができます。

- セッションレベルのタイムゾーンを設定するには、`SET time_zone = 'xxx';`というコマンドを実行します。異なるセッションごとに異なるタイムゾーンを設定することができます。FEとの接続が切断されると、タイムゾーンの設定は無効になります。
- グローバルタイムゾーンを設定するには、`SET global time_zone = 'xxx';`というコマンドを実行します。タイムゾーンの設定はFEに永続化され、FEとの接続が切断されても有効です。

> **注意**
>
> StarRocksにデータをロードする前に、StarRocksクラスタのグローバルタイムゾーンを`system_time_zone`パラメータの値と同じに変更してください。そうしないと、データのロード後、DATE型のデータが正しく表示されません。`system_time_zone`パラメータは、FEをホストするマシンのタイムゾーンを指します。マシンが起動すると、そのマシンのタイムゾーンがこのパラメータの値として記録されます。このパラメータは手動で設定することはできません。

### タイムゾーンの形式

`time_zone`パラメータの値は大文字と小文字を区別しません。パラメータの値は次のいずれかの形式で指定することができます。

| **形式**       | **例**                                                        |
| -------------- | ------------------------------------------------------------ |
| UTCオフセット  | `SET time_zone = '+10:00';` `SET global time_zone = '-6:00';` |
| タイムゾーン名 | `SET time_zone = 'Asia/Shanghai';` `SET global time_zone = 'America/Los_Angeles';` |

タイムゾーンの形式の詳細については、[tzデータベースのタイムゾーンの一覧](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)を参照してください。

> **注意**
>
> CST以外のタイムゾーンの略語はサポートされていません。`time_zone`の値を`CST`に設定すると、StarRocksは`CST`を`Asia/Shanghai`に変換します。

### デフォルトのタイムゾーン

`time_zone`パラメータのデフォルト値は`Asia/Shanghai`です。

## タイムゾーン設定の表示

タイムゾーンの設定を表示するには、次のコマンドを実行します。

```plaintext
 SHOW VARIABLES LIKE '%time_zone%';
```

## タイムゾーン設定の影響

- タイムゾーンの設定は、SHOW LOADおよびSHOW BACKENDSステートメントによって返される時刻の値に影響を与えます。ただし、CREATE TABLEステートメントで指定されたパーティショニング列がDATE型またはDATETIME型の場合、`LESS THAN`句で指定された値には影響しません。また、DATE型およびDATETIME型のデータにも影響しません。
- タイムゾーンの設定は、以下の関数の表示と保存に影響を与えます：
  - **from_unixtime**：指定されたUTCタイムスタンプに基づいて、指定されたタイムゾーンの日付と時刻を返します。たとえば、StarRocksクラスタのグローバルタイムゾーンが`Asia/Shanghai`の場合、`select FROM_UNIXTIME(0);`は`1970-01-01 08:00:00`を返します。
  - **unix_timestamp**：指定されたタイムゾーンの日付と時刻に基づいて、UTCタイムスタンプを返します。たとえば、StarRocksクラスタのグローバルタイムゾーンが`Asia/Shanghai`の場合、`select UNIX_TIMESTAMP('1970-01-01 08:00:00');`は`0`を返します。
  - **curtime**：指定されたタイムゾーンの現在時刻を返します。たとえば、指定されたタイムゾーンの現在時刻が16:34:05の場合、`select CURTIME();`は`16:34:05`を返します。
  - **now**：指定されたタイムゾーンの現在の日付と時刻を返します。たとえば、指定されたタイムゾーンの現在の日付と時刻が2021-02-11 16:34:13の場合、`select NOW();`は`2021-02-11 16:34:13`を返します。
  - **convert_tz**：日付と時刻を1つのタイムゾーンから別のタイムゾーンに変換します。たとえば、`select CONVERT_TZ('2021-08-01 11:11:11', 'Asia/Shanghai', 'America/Los_Angeles');`は`2021-07-31 20:11:11`を返します。
