---
displayed_sidebar: "Japanese"
---

# StarRocks でサポートされる特権

ユーザーまたはロールに付与される特権は、ユーザーまたはロールが特定のオブジェクト上で実行できる操作を決定します。特権は、データのセキュリティを保護するために細かい粒度のアクセス制御を実装するために使用できます。

このトピックでは、StarRocks が異なるオブジェクトに対して提供する特権とその意味について説明します。特権は、[GRANT](../sql-reference/sql-statements/account-management/GRANT.md) および [REVOKE](../sql-reference/sql-statements/account-management/REVOKE.md) を使用して付与および取り消されます。オブジェクトに付与できる特権は、オブジェクトの種類によって異なります。たとえば、テーブルの特権はデータベースの特権とは異なります。

> 注意: このトピックで説明されている特権は、v3.0 以降でのみ利用可能です。v3.0 での特権フレームワークと構文は、以前のバージョンとは互換性がありません。v3.0 へのアップグレード後、元の特権のほとんどは保持されますが、特定の操作に関する特権は保持されません。詳細な違いについては、このトピックの最後の [アップグレードノート](#upgrade-notes) を参照してください。

## 特権リスト

このセクションでは、異なるオブジェクトで利用可能な特権について説明します。

### SYSTEM

| 特権                      | 説明                                                         |
| ----------------------- | ------------------------------------------------------------ |
| NODE                    | ノードの操作（ノードの追加、削除、非稼働化など）を行います。クラスタのセキュリティを確保するため、この特権はユーザーやロールに直接付与することはできません。`cluster_admin` ロールにはこの特権があります。 |
| GRANT                   | ユーザーやロールの作成、ユーザーやロールの変更、ユーザーやロールに特権を付与する操作を行います。この特権はユーザーやロールに直接付与することはできません。`user_admin` ロールにはこの特権があります。 |
| CREATE RESOURCE GROUP   | リソースグループを作成します。                                    |
| CREATE RESOURCE         | Spark Load ジョブや外部テーブルのためのリソースを作成します。    |
| CREATE EXTERNAL CATALOG | 外部カタログを作成します。                                 |
| PLUGIN                  | プラグインをインストールまたはアンインストールします。                             |
| REPOSITORY              | リポジトリを作成、削除、表示します。                     |
| BLACKLIST               | SQL のブラックリストを作成、削除、表示します。                |
| FILE                    | ファイルを作成、削除、表示します。                            |
| OPERATE                 | レプリカ、設定項目、変数、トランザクションの管理を行います。 |
| CREATE GLOBAL FUNCTION  | グローバル UDF を作成します。                           |
| CREATE STORAGE VOLUME  | リモートストレージシステム用のストレージボリュームを作成します。    |

### RESOURCE GROUP

| 特権 | 説明                                       |
| --------- | ------------------------------------------------- |
| ALTER     | リソースグループの分類子を追加または削除します。 |
| DROP      | リソースグループを削除します。                         |
| ALL       | リソースグループに対して上記のすべての特権を持ちます。  |

### RESOURCE

| 特権 | 説明                                |
| --------- | ------------------------------------------ |
| USAGE     | リソースを使用します。                           |
| ALTER     | リソースを変更します。                           |
| DROP      | リソースを削除します。                           |
| ALL       | リソースに対して上記のすべての特権を持ちます。  |

### USER

| 特権   | 説明                                    |
| ----------- | ---------------------------------------------- |
| IMPERSONATE | ユーザー A がユーザー B として操作を実行できるようにします。 |

### GLOBAL FUNCTION (グローバル UDF)

| 特権 | 説明                                 |
| --------- | ------------------------------------------- |
| USAGE     | クエリ内で関数を使用します。                 |
| DROP      | 関数を削除します。                         |
| ALL       | 関数に対して上記のすべての特権を持ちます。  |

### CATALOG

| オブジェクト                      | 特権                                             | 説明                                    |
| --------------------------- | ----------------------------------------------------- | ---------------------------------------------- |
| CATALOG (内部カタログ) | USAGE                                                 | 内部カタログ（default_catalog）を使用します。   |
| CATALOG (内部カタログ)             | CREATE DATABASE           |        内部カタログ内でデータベースを作成します。                                   |
| CATALOG (内部カタログ)                        | ALL  |               内部カタログに対して上記のすべての特権を持ちます。                           |
| CATALOG (外部カタログ)  | USAGE                                                 | 外部カタログを使用してその中のテーブルを表示します。 |
| CATALOG (外部カタログ)                        |   DROP                       |    外部カタログを削除します。                                   |
| CATALOG (外部カタログ)                         |  ALL   |              外部カタログに対して上記のすべての特権を持ちます。                                |

> 注意: StarRocks の内部カタログは削除できません。

### DATABASE

| 特権                | 説明                                                  |
| ------------------------ | ------------------------------------------------------------ |
| ALTER                    | データベースのプロパティを設定したり、データベースの名前を変更したり、データベースのクォータを設定したりします。 |
| DROP                     | データベースを削除します。                                          |
| CREATE TABLE             | データベース内にテーブルを作成します。                                |
| CREATE VIEW              | ビューを作成します。                                              |
| CREATE FUNCTION          | 関数を作成します。                                              |
| CREATE MATERIALIZED VIEW | マテリアライズドビューを作成します。                                 |
| ALL                      | データベースに対して上記のすべての特権を持ちます。                 |

### TABLE

| 特権 | 説明                                                  |
| --------- | ------------------------------------------------------------ |
| ALTER     | テーブルを変更したり、外部テーブルのメタデータを更新したりします。 |
| DROP      | テーブルを削除します。                                            |
| SELECT    | テーブル内のデータをクエリします。                                  |
| INSERT    | テーブルにデータを挿入します。                                      |
| UPDATE    | テーブル内のデータを更新します。                                    |
| EXPORT    | StarRocks テーブルからデータをエクスポートします。                   |
| DELETE    | 指定した条件に基づいてテーブルからデータを削除するか、テーブルからすべてのデータを削除します。 |
| ALL       | テーブルに対して上記のすべての特権を持ちます。                      |

### VIEW

| 特権 | 説明                             |
| --------- | --------------------------------------- |
| SELECT    | ビュー内のデータをクエリします。           |
| ALTER     | ビューの定義を変更します。              |
| DROP      | 論理ビューを削除します。                 |
| ALL       | ビューに対して上記のすべての特権を持ちます。 |

### MATERIALIZED VIEW

| 特権 | 説明                                          |
| --------- | ---------------------------------------------------- |
| SELECT    | クエリの高速化のためにマテリアライズドビューをクエリします。   |
| ALTER     | マテリアライズドビューを変更します。                       |
| REFRESH   | マテリアライズドビューをリフレッシュします。                 |
| DROP      | マテリアライズドビューを削除します。                       |
| ALL       | マテリアライズドビューに対して上記のすべての特権を持ちます。 |

### FUNCTION (データベースレベルの UDF)

| 特権 | 説明                             |
| ------- | ------------------------------------------|
| USAGE | 関数を使用します。                            |
| DROP  | 関数を削除します。                         |
| ALL   | 関数に対して上記のすべての特権を持ちます。  |

### STORAGE VOLUME

| 特権 | 説明                             |
| ------- | ------------------------------------------------------------ |
| ALTER | ストレージボリュームの認証情報のプロパティ、コメント、ステータス（有効）を変更します。      |
| DROP  | ストレージボリュームを削除します。               |
| USAGE | ストレージボリュームを説明し、ストレージボリュームをデフォルトのストレージボリュームとして設定します。   |
| ALL   | ストレージボリュームに対して上記のすべての特権を持ちます。  |

## アップグレードノート

v2.x から v3.0 へのアップグレード時に、新しい特権システムの導入により、一部の操作が実行できなくなる場合があります。次の表に、アップグレード前とアップグレード後の変更内容を示します。

| **操作**               | **関連するコマンド**           | **アップグレード前**                                                   | **アップグレード後**                                                    |
| --------------------------- | ------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| テーブルの変更                | ALTER TABLE, CANCEL ALTER TABLE | テーブルまたはテーブルが所属するデータベースに対して `LOAD_PRIV` 特権を持つユーザーは、`ALTER TABLE` および `CANCEL ALTER TABLE` 操作を実行できます。 | これらの操作を実行するには、テーブルに対して ALTER 特権を持つ必要があります。 |
| 外部テーブルのリフレッシュ      | REFRESH EXTERNAL TABLE          | 外部テーブルに対して `LOAD_PRIV` 特権を持つユーザーは、外部テーブルをリフレッシュできます。 | この操作を実行するには、外部テーブルに対して ALTER 特権を持つ必要があります。 |
| バックアップとリストア          | BACKUP, RESTORE                 | データベースに対して `LOAD_PRIV` 特権を持つユーザーは、データベースまたはデータベース内の任意のテーブルをバックアップおよびリストアできます。 | アップグレード後、管理者はユーザーに対してバックアップおよびリストアの特権を再度付与する必要があります。 |
| 削除後の復旧                  | RECOVER                         | データベースおよびテーブルに対して `ALTER_PRIV`、`CREATE_PRIV`、`DROP_PRIV` 特権を持つユーザーは、データベースおよびテーブルを復旧できます。 | データベースを復旧するには、default_catalog に対して CREATE DATABASE 特権を持つ必要があります。テーブルに対して CREATE TABLE 特権とテーブルに対する DROP 特権が必要です。 |
| ユーザーの作成と変更           | CREATE USER, ALTER USER         | データベースに対して `GRANT_PRIV` 特権を持つユーザーは、ユーザーを作成および変更できます。 | ユーザーを作成および変更するには、`user_admin` ロールを持つ必要があります。 |
| 特権の付与と取り消し           | GRANT, REVOKE                   | オブジェクトに対して `GRANT_PRIV` 特権を持つユーザーは、オブジェクトに対する特権を他のユーザーやロールに付与できます。 | アップグレード後、アップグレード前に既に持っていた特権を他のユーザーやロールに付与することができます。<br />新しい特権システムでは: <ul><li>他のユーザーやロールに特権を付与するには、`user_admin` ロールを持つ必要があります。</li><li>GRANT ステートメントに `WITH GRANT OPTION` が含まれている場合、ステートメントに関連する特権を他のユーザーやロールに付与できます。</li></ul>|

v2.x では、StarRocks はロールベースのアクセス制御（RBAC）を完全に実装していません。ユーザーにロールを割り当てると、StarRocks はロール自体ではなく、ロールのすべての特権を直接ユーザーに付与します。したがって、ユーザーは実際にはロールを所有していません。

v3.0 では、StarRocks は特権システムを刷新しました。v3.0 へのアップグレード後、元のロールは保持されますが、ユーザーとロールの間にはまだ所有関係がありません。新しい RBAC システムを使用する場合は、ロールと特権を割り当てるために GRANT 操作を実行してください。
