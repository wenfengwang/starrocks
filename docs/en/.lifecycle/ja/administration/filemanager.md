---
displayed_sidebar: "Japanese"
---

# ファイルマネージャー

ファイルマネージャーを使用すると、公開鍵ファイル、秘密鍵ファイル、証明書ファイルなど、外部データソースへのアクセスに使用されるファイルを作成、表示、削除することができます。作成されたファイルはコマンドを使用して参照またはアクセスすることができます。

## 基本的な概念

**ファイル**: StarRocksに作成され保存されたファイルを指します。ファイルがStarRocksに作成され、保存されると、StarRocksはファイルに一意のIDを割り当てます。データベース名、カタログ、ファイル名に基づいてファイルを検索することができます。データベースでは、管理者ユーザーのみがファイルを作成および削除でき、データベースにアクセス権限を持つすべてのユーザーはデータベースに属するファイルを使用することができます。

## 開始する前に

- 各FEに対して以下のパラメータを設定します。
  - `small_file_dir`: アップロードされたファイルが保存されるパスです。デフォルトのパスは`small_files/`で、FEのランタイムディレクトリにあります。このパラメータを**fe.conf**ファイルで指定し、FEを再起動して変更を有効にする必要があります。
  - `max_small_file_size_bytes`: 単一のファイルの最大サイズです。このパラメータのデフォルト値は1 MBです。ファイルのサイズがこのパラメータの値を超えると、ファイルを作成できません。このパラメータは[ADMIN SET CONFIG](../sql-reference/sql-statements/Administration/ADMIN_SET_CONFIG.md)ステートメントを使用して指定することができます。
  - `max_small_file_number`: クラスタ内で作成できるファイルの最大数です。このパラメータのデフォルト値は100です。作成したファイルの数がこのパラメータの値に達すると、ファイルの作成を続けることはできません。このパラメータはADMIN SET CONFIGステートメントを使用して指定することができます。

> 注意: 2つのパラメータの値を増やすと、FEのメモリ使用量が増加します。そのため、必要な場合を除き、2つのパラメータの値を増やさないことをおすすめします。

- 各BEに対して以下のパラメータを設定します。

`small_file_dir`: ダウンロードされたファイルが保存されるパスです。デフォルトのパスは`lib/small_files/`で、BEのランタイムディレクトリにあります。このパラメータを**be.conf**ファイルで指定することができます。

## ファイルの作成

CREATE FILEステートメントを実行してファイルを作成することができます。詳細については、[CREATE FILE](../sql-reference/sql-statements/Administration/CREATE_FILE.md)を参照してください。ファイルが作成されると、ファイルはStarRocksにアップロードされ、永続化されます。

## ファイルの表示

SHOW FILEステートメントを実行して、データベースに保存されているファイルの情報を表示することができます。詳細については、[SHOW FILE](../sql-reference/sql-statements/Administration/SHOW_FILE.md)を参照してください。

## ファイルの削除

DROP FILEステートメントを実行してファイルを削除することができます。詳細については、[DROP FILE](../sql-reference/sql-statements/Administration/DROP_FILE.md)を参照してください。

## FEとBEがファイルを使用する方法

- **FE**: SmallFileMgrクラスは、FEの指定されたディレクトリに関連するファイルのデータを保存します。その後、SmallFileMgrクラスはFEがファイルを使用するためのローカルファイルパスを返します。
- **BE**: BEは**/api/get_small_file API** (HTTP)を呼び出してファイルを指定されたディレクトリにダウンロードし、ファイルの情報を記録します。BEがファイルを使用するためにリクエストすると、BEはファイルがダウンロードされたかどうかを確認し、ファイルを検証します。ファイルが検証に合格した場合、ファイルのパスが返されます。ファイルが検証に合格しない場合、ファイルは削除され、FEから再度ダウンロードされます。BEが再起動すると、ダウンロードしたファイルをメモリにプリロードします。
