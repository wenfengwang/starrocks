---
displayed_sidebar: "Japanese"
---

# テーブルの種類の概要

テーブルの作成時には、テーブルの種類を指定し、1つ以上の列をソートキーとして定義する必要があります。これにより、作成したテーブルに最初にデータがロードされる際に、StarRocksはソートキーに基づいてデータをソート、処理、および保存することができます。このトピックでは、StarRocksが提供するテーブルの種類について説明し、さまざまなビジネス要件に対応します。

## 基本的な概念

### テーブルの種類

StarRocksは、4つのテーブルの種類を提供しています。Duplicate Keyテーブル、Aggregateテーブル、Unique Keyテーブル、Primary Keyテーブルです。これらの4つのテーブルの種類は、ログ分析、データの集計と分析、リアルタイムデータ分析など、さまざまなデータ分析シナリオに適しています。

### ソートキー

特定のテーブルの種類を使用して作成されたテーブルにデータがロードされると、テーブルの作成時にソートキーとして定義された1つ以上の列に基づいてデータがソートされ、保存されます。ソートキーは通常、クエリのフィルタ条件として頻繁に使用される1つ以上の列であり、クエリの高速化に役立ちます。

Duplicate Keyテーブルでは、`DUPLICATE KEY`で指定されたソートキーがデータのソートに使用され、UNIQUE制約は割り当てられません。
Aggregateテーブルでは、`AGGREGATE KEY`で指定されたソートキーがデータのソートに使用され、UNIQUE制約が割り当てられます。
Unique Keyテーブルでは、`UNIQUE KEY`で指定されたソートキーがデータのソートに使用され、UNIQUE制約が割り当てられます。
Primary Keyテーブルでは、主キーとソートキーが切り離されています。`PRIMARY KEY`で指定された主キーにはUNIQUEおよびNOT NULL制約が割り当てられます。`ORDER BY`で指定されたソートキーはデータのソートに使用されます。

> **注意**
>
> - v3.0より前のバージョンでは、Primary Keyテーブルでは主キーとソートキーを別々に定義することはサポートされていません。
> - ソートキーの詳細については、[ソートキーとプレフィックスインデックス](../Sort_key.md)を参照してください。

## 注意事項

- テーブルの作成文において、ソートキーの列は他の列よりも先に定義する必要があります。

- テーブルの作成文におけるソートキーの列の順序は、テーブルの行がソートされる条件の順序を指定します。

- テーブルのプレフィックスインデックスの長さは36バイトに制限されています。ソートキーの列の合計長が36バイトを超える場合、StarRocksはプレフィックスインデックスの長さ制限内で最初のいくつかのソートキー列のみを保存します。

- テーブルにロードされるレコードが同じ主キーを持つ場合、StarRocksはテーブルの種類に基づいてレコードを処理し、保存します：
  - Duplicate Keyテーブル

    StarRocksは、各レコードを別々の行としてテーブルにロードします。データのロードが完了すると、テーブルには同じ主キーを持つ行が含まれ、行はソースレコードとの1対1の関係を持ちます。ロードしたすべての過去のデータを呼び出すことができます。

  - Aggregateテーブル

    StarRocksは、レコードを集計し、集計されたレコードを1つの行としてテーブルにロードします。ロードが完了すると、テーブルには同じ主キーを持つ行は含まれません。ロードしたすべての過去のデータの集計結果を呼び出すことができますが、すべての過去のデータを呼び出すことはできません。

  - Unique KeyテーブルとPrimary Keyテーブル

    StarRocksは、新しくロードされたレコードを以前にロードされたレコードで置き換え、テーブルには最新のロードされたレコードのみが保持されます。ロードが完了すると、テーブルには同じ主キーを持つ行は含まれません。Unique KeyテーブルとPrimary Keyテーブルは、同じ主キーを持つレコードのグループの中で最新のレコードを返すためにメトリック列にREPLACE集計関数が指定された特別なAggregateテーブルと見なすことができます。
