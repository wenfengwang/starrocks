---
displayed_sidebar: English
---

# date_trunc

## 描述

根据指定的日期部分（例如年、日、小时或分钟）截断时间值。

StarRocks 还提供 year、quarter、month、week、day 和 hour 函数供您提取指定的日期部分。

## 语法

```Haskell
DATETIME date_trunc(VARCHAR fmt, DATETIME|DATE datetime)
```

## 参数

- `datetime`：要截断的时间，可以是 DATETIME 或 DATE 类型。日期和时间必须存在。否则，将返回 NULL。例如，`2021-02-29 11:12:13` 作为日期不存在，将返回 NULL。

- `fmt`：日期部分，即 `datetime` 将被截断的精度。该值必须是 VARCHAR 常量。

  `fmt` 必须设置为下表中列出的值。如果该值不正确，将返回错误。

  如果 `datetime` 是 DATE 值，则 `fmt` 只能是 `year`、`quarter`、`month`、`week` 或 `day`。如果将 `fmt` 设置为其他日期单位，例如 `hour`，则会报告错误。参见示例 5。

|值|描述|
|---|---|
|second|截断到秒。|
|minute|截断到分钟。秒部分将被归零。|
|hour|截断到小时。分钟和秒部分将被归零。|
|day|截断到日。时间部分将被归零。|
|week|截断到 `datetime` 所在周的第一天。时间部分将被归零。|
|month|截断到 `datetime` 所在月的第一天。时间部分将被归零。|
|quarter|截断到 `datetime` 所在季度的第一天。时间部分将被归零。|
|year|截断到 `datetime` 所在年的第一天。时间部分将被归零。|

## 返回值

返回 DATETIME 类型的值。

如果 `datetime` 为 DATE 类型且 `fmt` 设置为 `hour`、`minute` 或 `second`，则返回值的时间部分默认为 `00:00:00`。

## 示例

示例 1：将输入时间截断到分钟。

```Plain
select date_trunc("minute", "2020-11-04 11:12:13");
+---------------------------------------------+
| date_trunc('minute', '2020-11-04 11:12:13') |
+---------------------------------------------+
| 2020-11-04 11:12:00                         |
+---------------------------------------------+
```

示例 2：将输入时间截断到小时。

```Plain
select date_trunc("hour", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('hour', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-11-04 11:00:00                       |
+-------------------------------------------+
```

示例 3：将输入时间截断到一周的第一天。

```Plain
select date_trunc("week", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('week', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-11-02 00:00:00                       |
+-------------------------------------------+
```

示例 4：将输入时间截断到一年的第一天。

```Plain
select date_trunc("year", "2020-11-04 11:12:13");
+-------------------------------------------+
| date_trunc('year', '2020-11-04 11:12:13') |
+-------------------------------------------+
| 2020-01-01 00:00:00                       |
+-------------------------------------------+
```

示例 5：将 DATE 值截断到小时。返回错误。

```Plain
select date_trunc("hour", cast("2020-11-04" as date));

ERROR 1064 (HY000): Getting analyzing error from line 1, column 26 to line 1, column 51. Detail message: date_trunc function can't support argument other than year|quarter|month|week|day.
```