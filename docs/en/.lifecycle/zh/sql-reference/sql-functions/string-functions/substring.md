---
displayed_sidebar: English
---

# substring, substr

## 描述

从指定位置开始提取字符，并返回指定长度的子字符串。

## 语法

```Haskell
VARCHAR substr(VARCHAR str, pos[, len])
```

## 参数

- `str`：必填，要提取字符的字符串。它必须是 VARCHAR 类型的值。
- `pos`：必填，一个整数，指定起始位置。请注意，字符串中的第一个字符是 1，而不是 0。
  - 如果 `pos` 为 0，则返回一个空字符串。
  - `pos` 可以是负整数。在这种情况下，该函数从字符串末尾开始提取字符。参见示例 2。
  - 如果由 `pos` 指定的位置超出了字符串的范围，则返回一个空字符串。参见示例 3。
- `len`：可选，一个正整数，指定要提取的字符数。
  - 如果指定了 `len`，则该函数从由 `pos` 指定的位置开始提取 `len` 个字符。
  - 如果未指定 `len`，则该函数从 `pos` 开始提取所有字符。参见示例 1。
  - 如果 `len` 超出了匹配字符的实际长度，则返回所有匹配的字符。参见示例 4。

## 返回值

返回一个 VARCHAR 类型的值。

## 例子

```Plain Text
-- 从第一个字符 "s" 开始提取所有字符。
MySQL > select substring("starrockscluster", 1);
+-------------------------------------+
| substring('starrockscluster', 1) |
+-------------------------------------+
| starrocks                           |
+-------------------------------------+

-- 位置是负数，从字符串末尾开始计数。
MySQL > select substring("starrocks", -5, 5);
+-------------------------------+
| substring('starrocks', -5, 5) |
+-------------------------------+
| rocks                         |
+-------------------------------+

-- 位置超出字符串的长度，返回一个空字符串。
MySQL > select substring("apple", 8, 2);
+--------------------------------+
| substring('apple', 8, 2)       |
+--------------------------------+
|                                |
+--------------------------------+

-- 有 5 个匹配字符。长度 9 超出了匹配字符的长度，返回所有匹配的字符。
MySQL > select substring("apple", 1, 9);
+--------------------------+
| substring('apple', 1, 9) |
+--------------------------+
| apple                    |
+--------------------------+
```

## 关键词

substring, string, sub
