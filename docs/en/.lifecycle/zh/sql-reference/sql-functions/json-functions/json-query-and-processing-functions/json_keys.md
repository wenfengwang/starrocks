---
displayed_sidebar: English
---

# json_keys

## 描述

返回 JSON 对象的顶层键，以 JSON 数组的形式返回，或者如果指定了 `path`，则返回路径中的顶层键。

## 语法

```Haskell
json_keys(json_doc[, path])
```

## 参数

`json_doc`：必填。要返回其键的 JSON 文档。它必须是 JSON 对象。

`path`：可选。路径通常以`$`开头，并使用`.`作为路径分隔符。`[]`用作数组下标，从0开始。

## 返回值

返回一个 JSON 数组。

如果 JSON 对象为空，则返回一个空数组。 

如果 JSON 文档不是 JSON 对象，或路径未标识文档中的值，则返回`NULL`。

如果 JSON 文档是嵌套了 JSON 对象的数组，您可以使用`path`参数从该对象获取键。

## 例子

示例 1：因输入 JSON 对象为空，返回一个空数组。

```Plain
select json_keys('{}');
+-----------------+
| json_keys('{}') |
+-----------------+
| []              |
+-----------------+
```

示例 2：返回 JSON 对象的键。

```Plain
select json_keys('{"a": 1, "b": 2, "c": 3}');
+----------------+
| json_keys('1') |
+----------------+
|["a", "b", "c"] |
+----------------+
```

示例 3：返回与指定路径匹配的 JSON 对象的键。

```Plain
select json_keys('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.c');
+---------------------------------------------------------------------+
| json_keys('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.c') |
+---------------------------------------------------------------------+
| ["d", "e", "f"]                                                     |
+---------------------------------------------------------------------+
```

示例 4：路径不存在。

```Plain
select json_keys('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.e');
+---------------------------------------------------------------------+
| json_keys('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.e') |
+---------------------------------------------------------------------+
| NULL                                                                |
+---------------------------------------------------------------------+
```

示例 5：JSON 文档不是 JSON 对象。

```Plain
select json_keys('[1, 2, {"a": 1, "b": 2}]');
+---------------------------------------+
| json_keys('[1, 2, {"a": 1, "b": 2}]') |
+---------------------------------------+
| NULL                                  |
+---------------------------------------+
```

示例 6：JSON 文档是嵌套了 JSON 对象的数组。指定一个路径以从该对象获取键。

```Plain
select json_keys('[0, 1, {"a": 1, "b": 2}]', '$[2]');
+-----------------------------------------------+
| json_keys('[0, 1, {"a": 1, "b": 2}]', '$[2]') |
+-----------------------------------------------+
| ["a", "b"]                                    |
+-----------------------------------------------+
```
