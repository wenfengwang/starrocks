---
displayed_sidebar: English
---

# array_filter

## 描述

返回与给定筛选器匹配的数组中的值。

此函数有以下两种形式。采用 Lambda 的方式允许更灵活的数组筛选。有关 lambda 函数的更多信息，请参阅 [Lambda 表达式](../Lambda_expression.md)。此函数从 v2.5 版本开始得到支持。

## 语法

```Haskell
array_filter(array, array<bool>)
array_filter(lambda_function, arr1,arr2...)
```

- `array_filter(array, array<bool>)`

  返回与 `array<bool>` 匹配的数组中的值。

- `array_filter(lambda_function, arr1,arr2...)`

  返回与 lambda 函数匹配的数组中的值。

## 参数

`array`：要从中筛选值的数组。

`array<bool>`：用于筛选值的表达式。

`lambda_function`：用于筛选值的 lambda 函数。

## 使用说明

- `array_filter(array, array<bool>)` 的两个输入参数必须是数组，并且筛选表达式的计算结果可以为 `array<bool>`。
- `array_filter(lambda_function, arr1,arr2...)` 中的 lambda 函数遵循 [array_map()](array_map.md) 中的使用说明。
- 如果输入数组为 null，则返回 null。如果筛选器数组为 null，则返回空数组。

## 例子

- 不使用 lambda 函数的示例

    ```Plain
    -- 数组中的所有元素都与筛选器匹配。
    select array_filter([1,2,3],[1,1,1]);
    +------------------------------------+
    | array_filter([1, 2, 3], [1, 1, 1]) |
    +------------------------------------+
    | [1,2,3]                            |
    +------------------------------------+
    1 行受影响 (0.01 秒)
    
    -- 筛选器为 null，返回一个空数组。
    select array_filter([1,2,3],null);
    +-------------------------------+
    | array_filter([1, 2, 3], NULL) |
    +-------------------------------+
    | []                            |
    +-------------------------------+
    1 行受影响 (0.01 秒)
    
    -- 输入数组为 null，返回 null。
    select array_filter(null,[1]);
    +-------------------------+
    | array_filter(NULL, [1]) |
    +-------------------------+
    | NULL                    |
    +-------------------------+
    
    -- 输入数组和筛选器都为 null，返回 null。
    select array_filter(null,null);
    +--------------------------+
    | array_filter(NULL, NULL) |
    +--------------------------+
    | NULL                     |
    +--------------------------+
    1 行受影响 (0.01 秒)
    
    -- 筛选器包含一个 null 元素，返回一个空数组。
    select array_filter([1,2,3],[null]);
    +---------------------------------+
    | array_filter([1, 2, 3], [NULL]) |
    +---------------------------------+
    | []                              |
    +---------------------------------+
    1 行受影响 (0.01 秒)
    
    -- 筛选器包含两个 null 元素，返回一个空数组。
    select array_filter([1,2,3],[null,null]);
    +---------------------------------------+
    | array_filter([1, 2, 3], [NULL, NULL]) |
    +---------------------------------------+
    | []                                    |
    +---------------------------------------+
    1 行受影响 (0.00 秒)
    
    -- 只有一个元素与筛选器匹配。
    select array_filter([1,2,3],[null,1,0]);
    +---------------------------------------+
    | array_filter([1, 2, 3], [NULL, 1, 0]) |
    +---------------------------------------+
    | [2]                                   |
    +---------------------------------------+
    1 行受影响 (0.00 秒)
    ```

- 使用 lambda 函数的示例

  ```Plain
    -- 返回 x 中小于 y 的元素。
    select array_filter((x,y) -> x < y, [1,2,null], [4,5,6]);
    +--------------------------------------------------------+
    | array_filter((x, y) -> x < y, [1, 2, NULL], [4, 5, 6]) |
    +--------------------------------------------------------+
    | [1,2]                                                  |
    +--------------------------------------------------------+
  ```
