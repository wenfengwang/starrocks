---
displayed_sidebar: English
---

# 表类型概览

您在创建表时必须指定一个表类型，并定义一个或多个列作为排序键。这样，当数据最初被加载到您创建的表中时，StarRocks 能够根据排序键对数据进行排序、处理和存储。本主题描述了 StarRocks 提供的表类型，以满足您不同的业务需求。

## 基本概念

### 表类型

StarRocks 提供四种表类型：Duplicate Key 表、Aggregate 表、Unique Key 表和 Primary Key 表。这四种表类型非常适合于各种数据分析场景，如日志分析、数据聚合与分析、实时数据分析等。

### 排序键

当数据被加载到使用特定表类型创建的表中时，数据会根据在创建表时定义的一个或多个排序键列进行排序和存储。排序键通常是一个或多个在查询中频繁用作过滤条件的列，从而加快查询速度。

在 Duplicate Key 表中，由 `DUPLICATE KEY` 指定的排序键用于数据排序，并且没有赋予 UNIQUE 约束。
在 Aggregate 表中，由 `AGGREGATE KEY` 指定的排序键用于数据排序，并且赋予了 UNIQUE 约束。
在 Unique Key 表中，由 `UNIQUE KEY` 指定的排序键用于数据排序，并且赋予了 UNIQUE 约束。
在 Primary Key 表中，主键和排序键是分离的。由 `PRIMARY KEY` 指定的主键赋予了 UNIQUE 和 NOT NULL 约束。由 `ORDER BY` 指定的排序键用于数据排序。

> **注意**
- 在 v3.0 之前的版本中，Primary Key 表不支持分别定义主键和排序键。
- 关于排序键的更多描述，请参见[排序键和前缀索引](../Sort_key.md)。

## 注意事项

- 在创建表的语句中，必须先定义排序键列，再定义其他列。

- 在创建表的语句中，排序键列的顺序决定了表中行的排序依据。

- 表的前缀索引长度限制为 36 字节。如果排序键列的总长度超过 36 字节，StarRocks 只会存储长度限制内的前几个排序键列作为前缀索引。

- 如果要加载到表中的记录具有相同的主键，StarRocks 会根据表类型来处理和存储这些记录：
-   Duplicate Key 表
    StarRocks 会将每条记录作为独立的行加载到表中。数据加载完成后，表中会包含具有相同主键的行，并且这些行与源记录一一对应。您可以查询您加载的所有历史数据。

-   Aggregate 表

    StarRocks 会将记录聚合成一条记录，并将该聚合记录作为一行加载到表中。加载完成后，表中不会包含具有相同主键的行。您可以查询您加载的所有历史数据的聚合结果，但无法查询所有历史数据的详细信息。

-   Unique Key 表和 Primary Key 表

    StarRocks 会用新加载的记录替换先前加载的记录，并只保留最新加载的记录作为表中的行。加载完成后，表中不会包含具有相同主键的行。Unique Key 表和 Primary Key 表可以被视为特殊的 Aggregate 表，在这种表中为度量列指定了 REPLACE 聚合函数，以返回具有相同主键的记录组中最新的记录。