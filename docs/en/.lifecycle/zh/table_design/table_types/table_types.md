---
displayed_sidebar: English
---

# 表类型概述

在创建表时，您必须指定表类型，并定义一个或多个列作为排序键。这样一来，当数据最初加载到您创建的表中时，StarRocks 就可以根据排序键对数据进行排序、处理和存储。本主题将介绍 StarRocks 提供的表类型，以满足您不同的业务需求。

## 基本概念

### 表类型

StarRocks 提供四种表类型：Duplicate Key 表、Aggregate 表、Unique Key 表和 Primary Key 表。这四种表类型非常适合各种数据分析场景，如日志分析、数据聚合分析和实时数据分析。

### 排序键

当数据加载到使用特定表类型创建的表中时，数据将根据在创建表时定义的一个或多个列作为排序键进行排序和存储。排序键通常是在查询中经常用作筛选条件的一个或多个列，从而加快查询速度。

在 Duplicate Key 表中，由 `DUPLICATE KEY` 指定的排序键用于对数据进行排序，并且不分配 UNIQUE 约束。
在 Aggregate 表中，由 `AGGREGATE KEY` 指定的排序键用于对数据进行排序，并分配了 UNIQUE 约束。
在 Unique Key 表中，由 `UNIQUE KEY` 指定的排序键用于对数据进行排序，并分配了 UNIQUE 约束。
在 Primary Key 表中，主键和排序键是分离的。由 `PRIMARY KEY` 指定的主键分配了 UNIQUE 和 NOT NULL 约束。由 `ORDER BY` 指定的排序键用于对数据进行排序。

> **注意**
>
> - 在 v3.0 之前的版本中，主键表不支持单独定义主键和排序键。
> - 有关排序键的更多说明，请参阅[排序键和前缀索引](../Sort_key.md)。

## 注意事项

- 在创建表的语句中，必须先定义排序键列，然后再定义其他列。

- 在创建表的语句中，排序键列的顺序决定了表中行的排序顺序所依据的条件顺序。

- 表的前缀索引长度限制为 36 个字节。如果排序键列的总长度超过 36 个字节，StarRocks 仅存储前缀索引长度限制内的前几个排序键列。

- 如果要加载到表中的记录具有相同的主键，StarRocks 会根据表类型对记录进行处理和存储：
  - Duplicate Key 表

    StarRocks 会将每条记录作为单独的行加载到表中。数据加载完成后，该表将包含具有相同主键的行，并且这些行以一对一关系映射源记录。您可以调用所有加载的历史数据。

  - Aggregate 表

    StarRocks 将记录聚合为一条记录，并将聚合后的记录作为一行加载到表中。加载完成后，该表不包含具有相同主键的行。您可以调用所有加载的历史数据的聚合结果。但是，您无法调用所有历史数据。

  - Unique Key 表和 Primary Key 表

    StarRocks 会用新加载的记录替换先前加载的记录，并且仅保留最近加载的记录作为表中的一行。加载完成后，该表不包含具有相同主键的行。唯一键表和主键表可以被视为特殊的 Aggregate 表，其中为度量列指定了 REPLACE 聚合函数，以返回具有相同主键的一组记录中的最新记录。
