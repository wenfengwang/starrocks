---
displayed_sidebar: English
---
# StarRocks 支持的权限

授予用户或角色的权限决定了用户或角色可以在某些对象上执行哪些操作。权限可用于实现细粒度访问控制，以保障数据安全。

本主题描述了 StarRocks 在不同对象上提供的权限及其含义。使用 [GRANT](../sql-reference/sql-statements/account-management/GRANT.md) 和 [REVOKE](../sql-reference/sql-statements/account-management/REVOKE.md) 进行权限的授予和撤销。可授予对象的权限特定于对象类型。例如，表权限与数据库权限不同。

> 注意：本主题描述的权限仅在 v3.0 及以上版本中可用。v3.0 中的权限框架和语法与早期版本不兼容。升级到 v3.0 后，大部分原有权限仍保留，但特定操作的权限可能有所变化。有关详细差异，请参阅本主题末尾的[升级说明](#升级说明)。

## 权限列表

本节描述了不同对象上可用的权限。

### 系统

| 权限               | 描述                                                  |
| ----------------------- | ------------------------------------------------------------ |
| NODE                    | 操作节点，例如添加、删除或停用节点。为确保集群安全，不能直接授予用户或角色。`cluster_admin` 角色具有此权限。 |
| GRANT                   | 创建用户或角色、更改用户或角色，或向用户或角色授予权限。不能直接授予用户或角色。`user_admin` 角色具有此权限。 |
| CREATE RESOURCE GROUP   | 创建资源组。                                    |
| CREATE RESOURCE         | 为 Spark Load 作业或外部表创建资源。    |
| CREATE EXTERNAL CATALOG | 创建外部目录。                                 |
| PLUGIN                  | 安装或卸载插件。                             |
| REPOSITORY              | 创建、删除或查看存储库。                     |
| BLACKLIST               | 创建、删除或显示 SQL 黑名单。                |
| FILE                    | 创建、删除或查看文件。                            |
| OPERATE                 | 管理副本、配置项、变量和事务。 |
| CREATE GLOBAL FUNCTION  | 创建全局 UDF。                           |
| CREATE STORAGE VOLUME  | 为远程存储系统创建存储卷。    |

### 资源组

| 权限 | 描述                                       |
| --------- | ------------------------------------------------- |
| ALTER     | 为资源组添加或删除分类器。 |
| DROP      | 删除资源组。                         |
| ALL       | 在资源组上具有上述所有权限。  |

### 资源

| 权限 | 描述                                |
| --------- | ------------------------------------------ |
| USAGE     | 使用资源。                           |
| ALTER     | 更改资源。                         |
| DROP      | 删除资源。                        |
| ALL       | 在资源上具有上述所有权限。 |

### 用户

| 权限   | 描述                                    |
| ----------- | ---------------------------------------------- |
| IMPERSONATE | 允许用户 A 以用户 B 的身份执行操作。 |

### GLOBAL FUNCTION（全局 UDF）

| 权限 | 描述                                 |
| --------- | ------------------------------------------- |
| USAGE     | 在查询中使用函数。                 |
| DROP      | 删除函数。                         |
| ALL       | 在函数上具有上述所有权限。 |

### CATALOG

| 对象                      | 权限                                             | 描述                                    |
| --------------------------- | ----------------------------------------------------- | ---------------------------------------------- |
| CATALOG（内部目录） | USAGE                                                 | 使用内部目录（default_catalog）。   |
| CATALOG（内部目录）             | CREATE DATABASE           | 在内部目录中创建数据库。                                   |
| CATALOG（内部目录）                        | ALL  | 对内部目录具有上述所有权限。                           |
| CATALOG（外部目录）  | USAGE                                                 | 使用外部目录查看其中的表。 |
| CATALOG（外部目录）                        | DROP                       | 删除外部目录。                                   |
| CATALOG（外部目录）                         | ALL   | 对外部目录具有上述所有权限。                                |

> 注意：StarRocks 内部目录无法删除。

### DATABASE

| 权限                | 描述                                                  |
| ------------------------ | ------------------------------------------------------------ |
| ALTER                    | 设置数据库的属性、重命名数据库或设置数据库的配额。 |
| DROP                     | 删除数据库。                                          |
| CREATE TABLE             | 在数据库中创建表。                                |
| CREATE VIEW              | 创建视图。                                              |
| CREATE FUNCTION          | 创建函数。                                          |
| CREATE MATERIALIZED VIEW | 创建实例化视图。                                 |
| ALL                      | 在数据库上具有上述所有权限。                  |

### TABLE

| 权限 | 描述                                                  |
| --------- | ------------------------------------------------------------ |
| ALTER     | 修改表或刷新外部表中的元数据。 |
| DROP      | 删除表。                                               |
| SELECT    | 查询表中的数据。                                     |
| INSERT    | 将数据插入到表中。                                   |
| UPDATE    | 更新表中的数据。                                     |
| EXPORT    | 导出 StarRocks 表中的数据。                         |
| DELETE    | 根据指定条件从表中删除数据，或从表中删除所有数据。 |
| ALL       | 在表上具有上述所有权限。                     |

### VIEW

| 权限 | 描述                             |
| --------- | --------------------------------------- |
| SELECT    | 在视图中查询数据。                 |
| ALTER     | 修改视图的定义。      |
| DROP      | 删除逻辑视图。                 |
| ALL       | 在视图上具有上述所有权限。 |

### MATERIALIZED VIEW

| 权限 | 描述                                          |
| --------- | ---------------------------------------------------- |
| SELECT    | 查询实例化视图以加速查询。   |
| ALTER     | 更改实例化视图。                         |
| REFRESH   | 刷新实例化视图。                       |
| DROP      | 删除实例化视图。                         |
| ALL       | 在实例化视图上具有上述所有权限。 |

### FUNCTION（数据库级 UDF）

| 权限 | 描述                             |
| ------- | ------------------------------------------|
| USAGE | 使用函数。                            |
| DROP  | 删除函数。                         |
| ALL   | 在函数上具有上述所有权限。 |

### STORAGE VOLUME

| 权限 | 描述                             |
| ------- | ------------------------------------------------------------ |
| ALTER | 更改存储卷的凭据属性、注释或状态（已启用）。      |
| DROP  | 删除存储卷。               |
| USAGE | 描述存储卷并将存储卷设置为默认存储卷。   |
| ALL   | 对存储卷具有上述所有权限。  |

## 升级说明

在从 v2.x 升级到 v3.0 的过程中，由于引入了新的权限系统，您的某些操作可能无法执行。下表描述了升级前后的更改。

| **操作**               | **涉及的命令**           | **升级前**                                                   | **升级后**                                                    |
| --------------------------- | ------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 更改表格                | 更改表、取消更改表 | 对表或表所属数据库具有 `LOAD_PRIV` 权限的用户可以执行 `ALTER TABLE` 和 `CANCEL ALTER TABLE` 操作。 | 您必须对表具有 ALTER 特权才能执行这两项操作。 |
| 刷新外部表      | 刷新外部表          |对外部表具有 `LOAD_PRIV` 权限的用户可以刷新外部表。 | 您必须对外部表具有 ALTER 特权才能执行此操作。 |
| 备份和还原          | 备份、恢复                 | 对数据库具有 `LOAD_PRIV` 权限的用户可以备份和还原数据库或数据库中的任何表。 | 升级后，管理员必须再次向用户授予备份和还原权限。 |
| 删除后恢复      | 恢复                         |对数据库和表具有 `ALTER_PRIV`、`CREATE_PRIV` 和 `DROP_PRIV` 权限的用户可以恢复数据库和表。 | 您必须对 default_catalog 具有 CREATE DATABASE 特权才能恢复数据库。您必须对数据库具有 CREATE TABLE 特权，对表具有 DROP 特权。 |
| 创建和更改用户     | 创建用户，更改用户         | 对数据库具有权限的用户可以创建和更改用户。 | 您必须具有 `user_admin` 角色才能创建和更改用户。 |
| 授予和撤消权限 | 授予、撤销                   | 对对象具有 `GRANT_PRIV` 权限的用户可以将对象的权限授予其他用户或角色。 | 升级后，您仍然可以在升级后将您已经拥有的对该对象的权限授予其他用户或角色。<br />在新的权限系统中：<ul><li>您必须具有 `user_admin` 角色才能向其他用户或角色授予权限。</li><li>如果您的 GRANT 语句包括 `WITH GRANT OPTION`，则可以将语句中涉及的权限授予其他用户或角色。 </li></ul>|

在 v2.x 版本中，StarRocks 没有完全实现基于角色的访问控制（RBAC）。当您为用户分配角色时，StarRocks 直接授予用户角色的所有权限，而不是角色本身。因此，用户实际上并不拥有该角色。

在 v3.0 中，StarRocks 对权限系统进行了全新升级。升级到 v3.0 后，将保留原始角色，但用户和角色之间仍然没有所有权。如果要使用新的 RBAC 系统，请执行 GRANT 操作以分配角色和权限。
